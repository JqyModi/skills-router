"use strict";const Ln=require("node:process"),Lr=require("./executor-CmfbmGNi.cjs"),No=require("node:path"),Ja=require("node:fs/promises");function O(e,t,r){function n(i,c){if(i._zod||Object.defineProperty(i,"_zod",{value:{def:c,constr:a,traits:new Set},enumerable:!1}),i._zod.traits.has(e))return;i._zod.traits.add(e),t(i,c);const l=a.prototype,d=Object.keys(l);for(let v=0;v<d.length;v++){const m=d[v];m in i||(i[m]=l[m].bind(i))}}const s=r?.Parent??Object;class o extends s{}Object.defineProperty(o,"name",{value:e});function a(i){var c;const l=r?.Parent?new o:this;n(l,i),(c=l._zod).deferred??(c.deferred=[]);for(const d of l._zod.deferred)d();return l}return Object.defineProperty(a,"init",{value:n}),Object.defineProperty(a,Symbol.hasInstance,{value:i=>r?.Parent&&i instanceof r.Parent?!0:i?._zod?.traits?.has(e)}),Object.defineProperty(a,"name",{value:e}),a}class dt extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class Oo extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const jo={};function Be(e){return jo}function qo(e){const t=Object.values(e).filter(n=>typeof n=="number");return Object.entries(e).filter(([n,s])=>t.indexOf(+n)===-1).map(([n,s])=>s)}function sn(e,t){return typeof t=="bigint"?t.toString():t}function Rr(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function ln(e){return e==null}function dn(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function Ga(e,t){const r=(e.toString().split(".")[1]||"").length,n=t.toString();let s=(n.split(".")[1]||"").length;if(s===0&&/\d?e-\d?/.test(n)){const c=n.match(/\d?e-(\d?)/);c?.[1]&&(s=Number.parseInt(c[1]))}const o=r>s?r:s,a=Number.parseInt(e.toFixed(o).replace(".","")),i=Number.parseInt(t.toFixed(o).replace(".",""));return a%i/10**o}const xn=Symbol("evaluating");function ae(e,t,r){let n;Object.defineProperty(e,t,{get(){if(n!==xn)return n===void 0&&(n=xn,n=r()),n},set(s){Object.defineProperty(e,t,{value:s})},configurable:!0})}function ot(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function Qe(...e){const t={};for(const r of e){const n=Object.getOwnPropertyDescriptors(r);Object.assign(t,n)}return Object.defineProperties({},t)}function Hn(e){return JSON.stringify(e)}function Ba(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const Co="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function St(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const Wa=Rr(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function ft(e){if(St(e)===!1)return!1;const t=e.constructor;if(t===void 0||typeof t!="function")return!0;const r=t.prototype;return!(St(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function Ao(e){return ft(e)?{...e}:Array.isArray(e)?[...e]:e}const Qa=new Set(["string","number","symbol"]);function ht(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ye(e,t,r){const n=new e._zod.constr(t??e._zod.def);return(!t||r?.parent)&&(n._zod.parent=e),n}function K(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function Ya(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const Xa={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function ei(e,t){const r=e._zod.def,n=r.checks;if(n&&n.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const o=Qe(e._zod.def,{get shape(){const a={};for(const i in t){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&(a[i]=r.shape[i])}return ot(this,"shape",a),a},checks:[]});return Ye(e,o)}function ti(e,t){const r=e._zod.def,n=r.checks;if(n&&n.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const o=Qe(e._zod.def,{get shape(){const a={...e._zod.def.shape};for(const i in t){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&delete a[i]}return ot(this,"shape",a),a},checks:[]});return Ye(e,o)}function ri(e,t){if(!ft(t))throw new Error("Invalid input to extend: expected a plain object");const r=e._zod.def.checks;if(r&&r.length>0){const o=e._zod.def.shape;for(const a in t)if(Object.getOwnPropertyDescriptor(o,a)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const s=Qe(e._zod.def,{get shape(){const o={...e._zod.def.shape,...t};return ot(this,"shape",o),o}});return Ye(e,s)}function ni(e,t){if(!ft(t))throw new Error("Invalid input to safeExtend: expected a plain object");const r=Qe(e._zod.def,{get shape(){const n={...e._zod.def.shape,...t};return ot(this,"shape",n),n}});return Ye(e,r)}function si(e,t){const r=Qe(e._zod.def,{get shape(){const n={...e._zod.def.shape,...t._zod.def.shape};return ot(this,"shape",n),n},get catchall(){return t._zod.def.catchall},checks:[]});return Ye(e,r)}function oi(e,t,r){const s=t._zod.def.checks;if(s&&s.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const a=Qe(t._zod.def,{get shape(){const i=t._zod.def.shape,c={...i};if(r)for(const l in r){if(!(l in i))throw new Error(`Unrecognized key: "${l}"`);r[l]&&(c[l]=e?new e({type:"optional",innerType:i[l]}):i[l])}else for(const l in i)c[l]=e?new e({type:"optional",innerType:i[l]}):i[l];return ot(this,"shape",c),c},checks:[]});return Ye(t,a)}function ai(e,t,r){const n=Qe(t._zod.def,{get shape(){const s=t._zod.def.shape,o={...s};if(r)for(const a in r){if(!(a in o))throw new Error(`Unrecognized key: "${a}"`);r[a]&&(o[a]=new e({type:"nonoptional",innerType:s[a]}))}else for(const a in s)o[a]=new e({type:"nonoptional",innerType:s[a]});return ot(this,"shape",o),o}});return Ye(t,n)}function ut(e,t=0){if(e.aborted===!0)return!0;for(let r=t;r<e.issues.length;r++)if(e.issues[r]?.continue!==!0)return!0;return!1}function lt(e,t){return t.map(r=>{var n;return(n=r).path??(n.path=[]),r.path.unshift(e),r})}function Nt(e){return typeof e=="string"?e:e?.message}function We(e,t,r){const n={...e,path:e.path??[]};if(!e.message){const s=Nt(e.inst?._zod.def?.error?.(e))??Nt(t?.error?.(e))??Nt(r.customError?.(e))??Nt(r.localeError?.(e))??"Invalid input";n.message=s}return delete n.inst,delete n.continue,t?.reportInput||delete n.input,n}function fn(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function kt(...e){const[t,r,n]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:n}:{...t}}const Mo=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,sn,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Do=O("$ZodError",Mo),Zo=O("$ZodError",Mo,{Parent:Error});function ii(e,t=r=>r.message){const r={},n=[];for(const s of e.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(t(s))):n.push(t(s));return{formErrors:n,fieldErrors:r}}function ci(e,t=r=>r.message){const r={_errors:[]},n=s=>{for(const o of s.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(a=>n({issues:a}));else if(o.code==="invalid_key")n({issues:o.issues});else if(o.code==="invalid_element")n({issues:o.issues});else if(o.path.length===0)r._errors.push(t(o));else{let a=r,i=0;for(;i<o.path.length;){const c=o.path[i];i===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(t(o))):a[c]=a[c]||{_errors:[]},a=a[c],i++}}};return n(e),r}const hn=e=>(t,r,n,s)=>{const o=n?Object.assign(n,{async:!1}):{async:!1},a=t._zod.run({value:r,issues:[]},o);if(a instanceof Promise)throw new dt;if(a.issues.length){const i=new(s?.Err??e)(a.issues.map(c=>We(c,o,Be())));throw Co(i,s?.callee),i}return a.value},pn=e=>async(t,r,n,s)=>{const o=n?Object.assign(n,{async:!0}):{async:!0};let a=t._zod.run({value:r,issues:[]},o);if(a instanceof Promise&&(a=await a),a.issues.length){const i=new(s?.Err??e)(a.issues.map(c=>We(c,o,Be())));throw Co(i,s?.callee),i}return a.value},Ir=e=>(t,r,n)=>{const s=n?{...n,async:!1}:{async:!1},o=t._zod.run({value:r,issues:[]},s);if(o instanceof Promise)throw new dt;return o.issues.length?{success:!1,error:new(e??Do)(o.issues.map(a=>We(a,s,Be())))}:{success:!0,data:o.value}},Vo=Ir(Zo),zr=e=>async(t,r,n)=>{const s=n?Object.assign(n,{async:!0}):{async:!0};let o=t._zod.run({value:r,issues:[]},s);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new e(o.issues.map(a=>We(a,s,Be())))}:{success:!0,data:o.value}},ui=zr(Zo),li=e=>(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return hn(e)(t,r,s)},di=e=>(t,r,n)=>hn(e)(t,r,n),fi=e=>async(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return pn(e)(t,r,s)},hi=e=>async(t,r,n)=>pn(e)(t,r,n),pi=e=>(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Ir(e)(t,r,s)},mi=e=>(t,r,n)=>Ir(e)(t,r,n),_i=e=>async(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return zr(e)(t,r,s)},gi=e=>async(t,r,n)=>zr(e)(t,r,n),yi=/^[cC][^\s-]{8,}$/,vi=/^[0-9a-z]+$/,wi=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,$i=/^[0-9a-vA-V]{20}$/,bi=/^[A-Za-z0-9]{27}$/,Si=/^[a-zA-Z0-9_-]{21}$/,ki=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Ei=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Kn=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,Pi=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,Ti="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function Ri(){return new RegExp(Ti,"u")}const Ii=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,zi=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,Ni=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Oi=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ji=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Uo=/^[A-Za-z0-9_-]*$/,qi=/^\+[1-9]\d{6,14}$/,Fo="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Ci=new RegExp(`^${Fo}$`);function Lo(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Ai(e){return new RegExp(`^${Lo(e)}$`)}function Mi(e){const t=Lo({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const n=`${t}(?:${r.join("|")})`;return new RegExp(`^${Fo}T(?:${n})$`)}const Di=e=>{const t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},Zi=/^-?\d+$/,xo=/^-?\d+(?:\.\d+)?$/,Vi=/^(?:true|false)$/i,Ui=/^null$/i,Fi=/^[^A-Z]*$/,Li=/^[^a-z]*$/,je=O("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),Ho={number:"number",bigint:"bigint",object:"date"},Ko=O("$ZodCheckLessThan",(e,t)=>{je.init(e,t);const r=Ho[typeof t.value];e._zod.onattach.push(n=>{const s=n._zod.bag,o=(t.inclusive?s.maximum:s.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<o&&(t.inclusive?s.maximum=t.value:s.exclusiveMaximum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value<=t.value:n.value<t.value)||n.issues.push({origin:r,code:"too_big",maximum:typeof t.value=="object"?t.value.getTime():t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Jo=O("$ZodCheckGreaterThan",(e,t)=>{je.init(e,t);const r=Ho[typeof t.value];e._zod.onattach.push(n=>{const s=n._zod.bag,o=(t.inclusive?s.minimum:s.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>o&&(t.inclusive?s.minimum=t.value:s.exclusiveMinimum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value>=t.value:n.value>t.value)||n.issues.push({origin:r,code:"too_small",minimum:typeof t.value=="object"?t.value.getTime():t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),xi=O("$ZodCheckMultipleOf",(e,t)=>{je.init(e,t),e._zod.onattach.push(r=>{var n;(n=r._zod.bag).multipleOf??(n.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%t.value===BigInt(0):Ga(r.value,t.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),Hi=O("$ZodCheckNumberFormat",(e,t)=>{je.init(e,t),t.format=t.format||"float64";const r=t.format?.includes("int"),n=r?"int":"number",[s,o]=Xa[t.format];e._zod.onattach.push(a=>{const i=a._zod.bag;i.format=t.format,i.minimum=s,i.maximum=o,r&&(i.pattern=Zi)}),e._zod.check=a=>{const i=a.value;if(r){if(!Number.isInteger(i)){a.issues.push({expected:n,format:t.format,code:"invalid_type",continue:!1,input:i,inst:e});return}if(!Number.isSafeInteger(i)){i>0?a.issues.push({input:i,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,inclusive:!0,continue:!t.abort}):a.issues.push({input:i,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,inclusive:!0,continue:!t.abort});return}}i<s&&a.issues.push({origin:"number",input:i,code:"too_small",minimum:s,inclusive:!0,inst:e,continue:!t.abort}),i>o&&a.issues.push({origin:"number",input:i,code:"too_big",maximum:o,inclusive:!0,inst:e,continue:!t.abort})}}),Ki=O("$ZodCheckMaxLength",(e,t)=>{var r;je.init(e,t),(r=e._zod.def).when??(r.when=n=>{const s=n.value;return!ln(s)&&s.length!==void 0}),e._zod.onattach.push(n=>{const s=n._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<s&&(n._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const s=n.value;if(s.length<=t.maximum)return;const a=fn(s);n.issues.push({origin:a,code:"too_big",maximum:t.maximum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),Ji=O("$ZodCheckMinLength",(e,t)=>{var r;je.init(e,t),(r=e._zod.def).when??(r.when=n=>{const s=n.value;return!ln(s)&&s.length!==void 0}),e._zod.onattach.push(n=>{const s=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>s&&(n._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const s=n.value;if(s.length>=t.minimum)return;const a=fn(s);n.issues.push({origin:a,code:"too_small",minimum:t.minimum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),Gi=O("$ZodCheckLengthEquals",(e,t)=>{var r;je.init(e,t),(r=e._zod.def).when??(r.when=n=>{const s=n.value;return!ln(s)&&s.length!==void 0}),e._zod.onattach.push(n=>{const s=n._zod.bag;s.minimum=t.length,s.maximum=t.length,s.length=t.length}),e._zod.check=n=>{const s=n.value,o=s.length;if(o===t.length)return;const a=fn(s),i=o>t.length;n.issues.push({origin:a,...i?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),Nr=O("$ZodCheckStringFormat",(e,t)=>{var r,n;je.init(e,t),e._zod.onattach.push(s=>{const o=s._zod.bag;o.format=t.format,t.pattern&&(o.patterns??(o.patterns=new Set),o.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=s=>{t.pattern.lastIndex=0,!t.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:t.format,input:s.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(n=e._zod).check??(n.check=()=>{})}),Bi=O("$ZodCheckRegex",(e,t)=>{Nr.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),Wi=O("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=Fi),Nr.init(e,t)}),Qi=O("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=Li),Nr.init(e,t)}),Yi=O("$ZodCheckIncludes",(e,t)=>{je.init(e,t);const r=ht(t.includes),n=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=n,e._zod.onattach.push(s=>{const o=s._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(n)}),e._zod.check=s=>{s.value.includes(t.includes,t.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:s.value,inst:e,continue:!t.abort})}}),Xi=O("$ZodCheckStartsWith",(e,t)=>{je.init(e,t);const r=new RegExp(`^${ht(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const s=n._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),ec=O("$ZodCheckEndsWith",(e,t)=>{je.init(e,t);const r=new RegExp(`.*${ht(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const s=n._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}}),tc=O("$ZodCheckOverwrite",(e,t)=>{je.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});class rc{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const n=t.split(`
`).filter(a=>a),s=Math.min(...n.map(a=>a.length-a.trimStart().length)),o=n.map(a=>a.slice(s)).map(a=>" ".repeat(this.indent*2)+a);for(const a of o)this.content.push(a)}compile(){const t=Function,r=this?.args,s=[...(this?.content??[""]).map(o=>`  ${o}`)];return new t(...r,s.join(`
`))}}const nc={major:4,minor:3,patch:6},de=O("$ZodType",(e,t)=>{var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=nc;const n=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&n.unshift(e);for(const s of n)for(const o of s._zod.onattach)o(e);if(n.length===0)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const s=(a,i,c)=>{let l=ut(a),d;for(const v of i){if(v._zod.def.when){if(!v._zod.def.when(a))continue}else if(l)continue;const m=a.issues.length,_=v._zod.check(a);if(_ instanceof Promise&&c?.async===!1)throw new dt;if(d||_ instanceof Promise)d=(d??Promise.resolve()).then(async()=>{await _,a.issues.length!==m&&(l||(l=ut(a,m)))});else{if(a.issues.length===m)continue;l||(l=ut(a,m))}}return d?d.then(()=>a):a},o=(a,i,c)=>{if(ut(a))return a.aborted=!0,a;const l=s(i,n,c);if(l instanceof Promise){if(c.async===!1)throw new dt;return l.then(d=>e._zod.parse(d,c))}return e._zod.parse(l,c)};e._zod.run=(a,i)=>{if(i.skipChecks)return e._zod.parse(a,i);if(i.direction==="backward"){const l=e._zod.parse({value:a.value,issues:[]},{...i,skipChecks:!0});return l instanceof Promise?l.then(d=>o(d,a,i)):o(l,a,i)}const c=e._zod.parse(a,i);if(c instanceof Promise){if(i.async===!1)throw new dt;return c.then(l=>s(l,n,i))}return s(c,n,i)}}ae(e,"~standard",()=>({validate:s=>{try{const o=Vo(e,s);return o.success?{value:o.data}:{issues:o.error?.issues}}catch{return ui(e,s).then(a=>a.success?{value:a.data}:{issues:a.error?.issues})}},vendor:"zod",version:1}))}),mn=O("$ZodString",(e,t)=>{de.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??Di(e._zod.bag),e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),fe=O("$ZodStringFormat",(e,t)=>{Nr.init(e,t),mn.init(e,t)}),sc=O("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=Ei),fe.init(e,t)}),oc=O("$ZodUUID",(e,t)=>{if(t.version){const n={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(n===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=Kn(n))}else t.pattern??(t.pattern=Kn());fe.init(e,t)}),ac=O("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=Pi),fe.init(e,t)}),ic=O("$ZodURL",(e,t)=>{fe.init(e,t),e._zod.check=r=>{try{const n=r.value.trim(),s=new URL(n);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(s.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:t.hostname.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),t.normalize?r.value=s.href:r.value=n;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),cc=O("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=Ri()),fe.init(e,t)}),uc=O("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=Si),fe.init(e,t)}),lc=O("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=yi),fe.init(e,t)}),dc=O("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=vi),fe.init(e,t)}),fc=O("$ZodULID",(e,t)=>{t.pattern??(t.pattern=wi),fe.init(e,t)}),hc=O("$ZodXID",(e,t)=>{t.pattern??(t.pattern=$i),fe.init(e,t)}),pc=O("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=bi),fe.init(e,t)}),mc=O("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=Mi(t)),fe.init(e,t)}),_c=O("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=Ci),fe.init(e,t)}),gc=O("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=Ai(t)),fe.init(e,t)}),yc=O("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=ki),fe.init(e,t)}),vc=O("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=Ii),fe.init(e,t),e._zod.bag.format="ipv4"}),wc=O("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=zi),fe.init(e,t),e._zod.bag.format="ipv6",e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),$c=O("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=Ni),fe.init(e,t)}),bc=O("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=Oi),fe.init(e,t),e._zod.check=r=>{const n=r.value.split("/");try{if(n.length!==2)throw new Error;const[s,o]=n;if(!o)throw new Error;const a=Number(o);if(`${a}`!==o)throw new Error;if(a<0||a>128)throw new Error;new URL(`http://[${s}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function Go(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const Sc=O("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=ji),fe.init(e,t),e._zod.bag.contentEncoding="base64",e._zod.check=r=>{Go(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function kc(e){if(!Uo.test(e))return!1;const t=e.replace(/[-_]/g,n=>n==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return Go(r)}const Ec=O("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=Uo),fe.init(e,t),e._zod.bag.contentEncoding="base64url",e._zod.check=r=>{kc(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),Pc=O("$ZodE164",(e,t)=>{t.pattern??(t.pattern=qi),fe.init(e,t)});function Tc(e,t=null){try{const r=e.split(".");if(r.length!==3)return!1;const[n]=r;if(!n)return!1;const s=JSON.parse(atob(n));return!("typ"in s&&s?.typ!=="JWT"||!s.alg||t&&(!("alg"in s)||s.alg!==t))}catch{return!1}}const Rc=O("$ZodJWT",(e,t)=>{fe.init(e,t),e._zod.check=r=>{Tc(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),Bo=O("$ZodNumber",(e,t)=>{de.init(e,t),e._zod.pattern=e._zod.bag.pattern??xo,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=Number(r.value)}catch{}const s=r.value;if(typeof s=="number"&&!Number.isNaN(s)&&Number.isFinite(s))return r;const o=typeof s=="number"?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:s,inst:e,...o?{received:o}:{}}),r}}),Ic=O("$ZodNumberFormat",(e,t)=>{Hi.init(e,t),Bo.init(e,t)}),zc=O("$ZodBoolean",(e,t)=>{de.init(e,t),e._zod.pattern=Vi,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=!!r.value}catch{}const s=r.value;return typeof s=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:s,inst:e}),r}}),Nc=O("$ZodNull",(e,t)=>{de.init(e,t),e._zod.pattern=Ui,e._zod.values=new Set([null]),e._zod.parse=(r,n)=>{const s=r.value;return s===null||r.issues.push({expected:"null",code:"invalid_type",input:s,inst:e}),r}}),Oc=O("$ZodUnknown",(e,t)=>{de.init(e,t),e._zod.parse=r=>r}),jc=O("$ZodNever",(e,t)=>{de.init(e,t),e._zod.parse=(r,n)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)});function Jn(e,t,r){e.issues.length&&t.issues.push(...lt(r,e.issues)),t.value[r]=e.value}const qc=O("$ZodArray",(e,t)=>{de.init(e,t),e._zod.parse=(r,n)=>{const s=r.value;if(!Array.isArray(s))return r.issues.push({expected:"array",code:"invalid_type",input:s,inst:e}),r;r.value=Array(s.length);const o=[];for(let a=0;a<s.length;a++){const i=s[a],c=t.element._zod.run({value:i,issues:[]},n);c instanceof Promise?o.push(c.then(l=>Jn(l,r,a))):Jn(c,r,a)}return o.length?Promise.all(o).then(()=>r):r}});function wr(e,t,r,n,s){if(e.issues.length){if(s&&!(r in n))return;t.issues.push(...lt(r,e.issues))}e.value===void 0?r in n&&(t.value[r]=void 0):t.value[r]=e.value}function Wo(e){const t=Object.keys(e.shape);for(const n of t)if(!e.shape?.[n]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${n}": expected a Zod schema`);const r=Ya(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(r)}}function Qo(e,t,r,n,s,o){const a=[],i=s.keySet,c=s.catchall._zod,l=c.def.type,d=c.optout==="optional";for(const v in t){if(i.has(v))continue;if(l==="never"){a.push(v);continue}const m=c.run({value:t[v],issues:[]},n);m instanceof Promise?e.push(m.then(_=>wr(_,r,v,t,d))):wr(m,r,v,t,d)}return a.length&&r.issues.push({code:"unrecognized_keys",keys:a,input:t,inst:o}),e.length?Promise.all(e).then(()=>r):r}const Cc=O("$ZodObject",(e,t)=>{if(de.init(e,t),!Object.getOwnPropertyDescriptor(t,"shape")?.get){const i=t.shape;Object.defineProperty(t,"shape",{get:()=>{const c={...i};return Object.defineProperty(t,"shape",{value:c}),c}})}const n=Rr(()=>Wo(t));ae(e._zod,"propValues",()=>{const i=t.shape,c={};for(const l in i){const d=i[l]._zod;if(d.values){c[l]??(c[l]=new Set);for(const v of d.values)c[l].add(v)}}return c});const s=St,o=t.catchall;let a;e._zod.parse=(i,c)=>{a??(a=n.value);const l=i.value;if(!s(l))return i.issues.push({expected:"object",code:"invalid_type",input:l,inst:e}),i;i.value={};const d=[],v=a.shape;for(const m of a.keys){const _=v[m],$=_._zod.optout==="optional",S=_._zod.run({value:l[m],issues:[]},c);S instanceof Promise?d.push(S.then(p=>wr(p,i,m,l,$))):wr(S,i,m,l,$)}return o?Qo(d,l,i,c,n.value,e):d.length?Promise.all(d).then(()=>i):i}}),Ac=O("$ZodObjectJIT",(e,t)=>{Cc.init(e,t);const r=e._zod.parse,n=Rr(()=>Wo(t)),s=m=>{const _=new rc(["shape","payload","ctx"]),$=n.value,S=h=>{const w=Hn(h);return`shape[${w}]._zod.run({ value: input[${w}], issues: [] }, ctx)`};_.write("const input = payload.value;");const p=Object.create(null);let g=0;for(const h of $.keys)p[h]=`key_${g++}`;_.write("const newResult = {};");for(const h of $.keys){const w=p[h],f=Hn(h),k=m[h]?._zod?.optout==="optional";_.write(`const ${w} = ${S(h)};`),k?_.write(`
        if (${w}.issues.length) {
          if (${f} in input) {
            payload.issues = payload.issues.concat(${w}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${f}, ...iss.path] : [${f}]
            })));
          }
        }
        
        if (${w}.value === undefined) {
          if (${f} in input) {
            newResult[${f}] = undefined;
          }
        } else {
          newResult[${f}] = ${w}.value;
        }
        
      `):_.write(`
        if (${w}.issues.length) {
          payload.issues = payload.issues.concat(${w}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${f}, ...iss.path] : [${f}]
          })));
        }
        
        if (${w}.value === undefined) {
          if (${f} in input) {
            newResult[${f}] = undefined;
          }
        } else {
          newResult[${f}] = ${w}.value;
        }
        
      `)}_.write("payload.value = newResult;"),_.write("return payload;");const u=_.compile();return(h,w)=>u(m,h,w)};let o;const a=St,i=!jo.jitless,l=i&&Wa.value,d=t.catchall;let v;e._zod.parse=(m,_)=>{v??(v=n.value);const $=m.value;return a($)?i&&l&&_?.async===!1&&_.jitless!==!0?(o||(o=s(t.shape)),m=o(m,_),d?Qo([],$,m,_,v,e):m):r(m,_):(m.issues.push({expected:"object",code:"invalid_type",input:$,inst:e}),m)}});function Gn(e,t,r,n){for(const o of e)if(o.issues.length===0)return t.value=o.value,t;const s=e.filter(o=>!ut(o));return s.length===1?(t.value=s[0].value,s[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(o=>o.issues.map(a=>We(a,n,Be())))}),t)}const Yo=O("$ZodUnion",(e,t)=>{de.init(e,t),ae(e._zod,"optin",()=>t.options.some(s=>s._zod.optin==="optional")?"optional":void 0),ae(e._zod,"optout",()=>t.options.some(s=>s._zod.optout==="optional")?"optional":void 0),ae(e._zod,"values",()=>{if(t.options.every(s=>s._zod.values))return new Set(t.options.flatMap(s=>Array.from(s._zod.values)))}),ae(e._zod,"pattern",()=>{if(t.options.every(s=>s._zod.pattern)){const s=t.options.map(o=>o._zod.pattern);return new RegExp(`^(${s.map(o=>dn(o.source)).join("|")})$`)}});const r=t.options.length===1,n=t.options[0]._zod.run;e._zod.parse=(s,o)=>{if(r)return n(s,o);let a=!1;const i=[];for(const c of t.options){const l=c._zod.run({value:s.value,issues:[]},o);if(l instanceof Promise)i.push(l),a=!0;else{if(l.issues.length===0)return l;i.push(l)}}return a?Promise.all(i).then(c=>Gn(c,s,e,o)):Gn(i,s,e,o)}}),Mc=O("$ZodDiscriminatedUnion",(e,t)=>{t.inclusive=!1,Yo.init(e,t);const r=e._zod.parse;ae(e._zod,"propValues",()=>{const s={};for(const o of t.options){const a=o._zod.propValues;if(!a||Object.keys(a).length===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(o)}"`);for(const[i,c]of Object.entries(a)){s[i]||(s[i]=new Set);for(const l of c)s[i].add(l)}}return s});const n=Rr(()=>{const s=t.options,o=new Map;for(const a of s){const i=a._zod.propValues?.[t.discriminator];if(!i||i.size===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(a)}"`);for(const c of i){if(o.has(c))throw new Error(`Duplicate discriminator value "${String(c)}"`);o.set(c,a)}}return o});e._zod.parse=(s,o)=>{const a=s.value;if(!St(a))return s.issues.push({code:"invalid_type",expected:"object",input:a,inst:e}),s;const i=n.value.get(a?.[t.discriminator]);return i?i._zod.run(s,o):t.unionFallback?r(s,o):(s.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:t.discriminator,input:a,path:[t.discriminator],inst:e}),s)}}),Dc=O("$ZodIntersection",(e,t)=>{de.init(e,t),e._zod.parse=(r,n)=>{const s=r.value,o=t.left._zod.run({value:s,issues:[]},n),a=t.right._zod.run({value:s,issues:[]},n);return o instanceof Promise||a instanceof Promise?Promise.all([o,a]).then(([c,l])=>Bn(r,c,l)):Bn(r,o,a)}});function on(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(ft(e)&&ft(t)){const r=Object.keys(t),n=Object.keys(e).filter(o=>r.indexOf(o)!==-1),s={...e,...t};for(const o of n){const a=on(e[o],t[o]);if(!a.valid)return{valid:!1,mergeErrorPath:[o,...a.mergeErrorPath]};s[o]=a.data}return{valid:!0,data:s}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let n=0;n<e.length;n++){const s=e[n],o=t[n],a=on(s,o);if(!a.valid)return{valid:!1,mergeErrorPath:[n,...a.mergeErrorPath]};r.push(a.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function Bn(e,t,r){const n=new Map;let s;for(const i of t.issues)if(i.code==="unrecognized_keys"){s??(s=i);for(const c of i.keys)n.has(c)||n.set(c,{}),n.get(c).l=!0}else e.issues.push(i);for(const i of r.issues)if(i.code==="unrecognized_keys")for(const c of i.keys)n.has(c)||n.set(c,{}),n.get(c).r=!0;else e.issues.push(i);const o=[...n].filter(([,i])=>i.l&&i.r).map(([i])=>i);if(o.length&&s&&e.issues.push({...s,keys:o}),ut(e))return e;const a=on(t.value,r.value);if(!a.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(a.mergeErrorPath)}`);return e.value=a.data,e}const Zc=O("$ZodRecord",(e,t)=>{de.init(e,t),e._zod.parse=(r,n)=>{const s=r.value;if(!ft(s))return r.issues.push({expected:"record",code:"invalid_type",input:s,inst:e}),r;const o=[],a=t.keyType._zod.values;if(a){r.value={};const i=new Set;for(const l of a)if(typeof l=="string"||typeof l=="number"||typeof l=="symbol"){i.add(typeof l=="number"?l.toString():l);const d=t.valueType._zod.run({value:s[l],issues:[]},n);d instanceof Promise?o.push(d.then(v=>{v.issues.length&&r.issues.push(...lt(l,v.issues)),r.value[l]=v.value})):(d.issues.length&&r.issues.push(...lt(l,d.issues)),r.value[l]=d.value)}let c;for(const l in s)i.has(l)||(c=c??[],c.push(l));c&&c.length>0&&r.issues.push({code:"unrecognized_keys",input:s,inst:e,keys:c})}else{r.value={};for(const i of Reflect.ownKeys(s)){if(i==="__proto__")continue;let c=t.keyType._zod.run({value:i,issues:[]},n);if(c instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(typeof i=="string"&&xo.test(i)&&c.issues.length){const v=t.keyType._zod.run({value:Number(i),issues:[]},n);if(v instanceof Promise)throw new Error("Async schemas not supported in object keys currently");v.issues.length===0&&(c=v)}if(c.issues.length){t.mode==="loose"?r.value[i]=s[i]:r.issues.push({code:"invalid_key",origin:"record",issues:c.issues.map(v=>We(v,n,Be())),input:i,path:[i],inst:e});continue}const d=t.valueType._zod.run({value:s[i],issues:[]},n);d instanceof Promise?o.push(d.then(v=>{v.issues.length&&r.issues.push(...lt(i,v.issues)),r.value[c.value]=v.value})):(d.issues.length&&r.issues.push(...lt(i,d.issues)),r.value[c.value]=d.value)}}return o.length?Promise.all(o).then(()=>r):r}}),Vc=O("$ZodEnum",(e,t)=>{de.init(e,t);const r=qo(t.entries),n=new Set(r);e._zod.values=n,e._zod.pattern=new RegExp(`^(${r.filter(s=>Qa.has(typeof s)).map(s=>typeof s=="string"?ht(s):s.toString()).join("|")})$`),e._zod.parse=(s,o)=>{const a=s.value;return n.has(a)||s.issues.push({code:"invalid_value",values:r,input:a,inst:e}),s}}),Uc=O("$ZodLiteral",(e,t)=>{if(de.init(e,t),t.values.length===0)throw new Error("Cannot create literal schema with no valid values");const r=new Set(t.values);e._zod.values=r,e._zod.pattern=new RegExp(`^(${t.values.map(n=>typeof n=="string"?ht(n):n?ht(n.toString()):String(n)).join("|")})$`),e._zod.parse=(n,s)=>{const o=n.value;return r.has(o)||n.issues.push({code:"invalid_value",values:t.values,input:o,inst:e}),n}}),Fc=O("$ZodTransform",(e,t)=>{de.init(e,t),e._zod.parse=(r,n)=>{if(n.direction==="backward")throw new Oo(e.constructor.name);const s=t.transform(r.value,r);if(n.async)return(s instanceof Promise?s:Promise.resolve(s)).then(a=>(r.value=a,r));if(s instanceof Promise)throw new dt;return r.value=s,r}});function Wn(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const Xo=O("$ZodOptional",(e,t)=>{de.init(e,t),e._zod.optin="optional",e._zod.optout="optional",ae(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),ae(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${dn(r.source)})?$`):void 0}),e._zod.parse=(r,n)=>{if(t.innerType._zod.optin==="optional"){const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(o=>Wn(o,r.value)):Wn(s,r.value)}return r.value===void 0?r:t.innerType._zod.run(r,n)}}),Lc=O("$ZodExactOptional",(e,t)=>{Xo.init(e,t),ae(e._zod,"values",()=>t.innerType._zod.values),ae(e._zod,"pattern",()=>t.innerType._zod.pattern),e._zod.parse=(r,n)=>t.innerType._zod.run(r,n)}),xc=O("$ZodNullable",(e,t)=>{de.init(e,t),ae(e._zod,"optin",()=>t.innerType._zod.optin),ae(e._zod,"optout",()=>t.innerType._zod.optout),ae(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${dn(r.source)}|null)$`):void 0}),ae(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,n)=>r.value===null?r:t.innerType._zod.run(r,n)}),Hc=O("$ZodDefault",(e,t)=>{de.init(e,t),e._zod.optin="optional",ae(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);if(r.value===void 0)return r.value=t.defaultValue,r;const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(o=>Qn(o,t)):Qn(s,t)}});function Qn(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const Kc=O("$ZodPrefault",(e,t)=>{de.init(e,t),e._zod.optin="optional",ae(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>(n.direction==="backward"||r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,n))}),Jc=O("$ZodNonOptional",(e,t)=>{de.init(e,t),ae(e._zod,"values",()=>{const r=t.innerType._zod.values;return r?new Set([...r].filter(n=>n!==void 0)):void 0}),e._zod.parse=(r,n)=>{const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(o=>Yn(o,e)):Yn(s,e)}});function Yn(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const Gc=O("$ZodCatch",(e,t)=>{de.init(e,t),ae(e._zod,"optin",()=>t.innerType._zod.optin),ae(e._zod,"optout",()=>t.innerType._zod.optout),ae(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(o=>(r.value=o.value,o.issues.length&&(r.value=t.catchValue({...r,error:{issues:o.issues.map(a=>We(a,n,Be()))},input:r.value}),r.issues=[]),r)):(r.value=s.value,s.issues.length&&(r.value=t.catchValue({...r,error:{issues:s.issues.map(o=>We(o,n,Be()))},input:r.value}),r.issues=[]),r)}}),Bc=O("$ZodPipe",(e,t)=>{de.init(e,t),ae(e._zod,"values",()=>t.in._zod.values),ae(e._zod,"optin",()=>t.in._zod.optin),ae(e._zod,"optout",()=>t.out._zod.optout),ae(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(r,n)=>{if(n.direction==="backward"){const o=t.out._zod.run(r,n);return o instanceof Promise?o.then(a=>Ot(a,t.in,n)):Ot(o,t.in,n)}const s=t.in._zod.run(r,n);return s instanceof Promise?s.then(o=>Ot(o,t.out,n)):Ot(s,t.out,n)}});function Ot(e,t,r){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},r)}const Wc=O("$ZodReadonly",(e,t)=>{de.init(e,t),ae(e._zod,"propValues",()=>t.innerType._zod.propValues),ae(e._zod,"values",()=>t.innerType._zod.values),ae(e._zod,"optin",()=>t.innerType?._zod?.optin),ae(e._zod,"optout",()=>t.innerType?._zod?.optout),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(Xn):Xn(s)}});function Xn(e){return e.value=Object.freeze(e.value),e}const Qc=O("$ZodCustom",(e,t)=>{je.init(e,t),de.init(e,t),e._zod.parse=(r,n)=>r,e._zod.check=r=>{const n=r.value,s=t.fn(n);if(s instanceof Promise)return s.then(o=>es(o,r,n,e));es(s,r,n,e)}});function es(e,t,r,n){if(!e){const s={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(s.params=n._zod.def.params),t.issues.push(kt(s))}}var ts;class Yc{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...r){const n=r[0];return this._map.set(t,n),n&&typeof n=="object"&&"id"in n&&this._idmap.set(n.id,t),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){const r=t._zod.parent;if(r){const n={...this.get(r)??{}};delete n.id;const s={...n,...this._map.get(t)};return Object.keys(s).length?s:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function Xc(){return new Yc}(ts=globalThis).__zod_globalRegistry??(ts.__zod_globalRegistry=Xc());const $t=globalThis.__zod_globalRegistry;function eu(e,t){return new e({type:"string",...K(t)})}function tu(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...K(t)})}function rs(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...K(t)})}function ru(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...K(t)})}function nu(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...K(t)})}function su(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...K(t)})}function ou(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...K(t)})}function au(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...K(t)})}function iu(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...K(t)})}function cu(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...K(t)})}function uu(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...K(t)})}function lu(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...K(t)})}function du(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...K(t)})}function fu(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...K(t)})}function hu(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...K(t)})}function pu(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...K(t)})}function mu(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...K(t)})}function _u(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...K(t)})}function gu(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...K(t)})}function yu(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...K(t)})}function vu(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...K(t)})}function wu(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...K(t)})}function $u(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...K(t)})}function bu(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...K(t)})}function Su(e,t){return new e({type:"string",format:"date",check:"string_format",...K(t)})}function ku(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...K(t)})}function Eu(e,t){return new e({type:"string",format:"duration",check:"string_format",...K(t)})}function Pu(e,t){return new e({type:"number",checks:[],...K(t)})}function Tu(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...K(t)})}function Ru(e,t){return new e({type:"boolean",...K(t)})}function Iu(e,t){return new e({type:"null",...K(t)})}function zu(e){return new e({type:"unknown"})}function Nu(e,t){return new e({type:"never",...K(t)})}function ns(e,t){return new Ko({check:"less_than",...K(t),value:e,inclusive:!1})}function xr(e,t){return new Ko({check:"less_than",...K(t),value:e,inclusive:!0})}function ss(e,t){return new Jo({check:"greater_than",...K(t),value:e,inclusive:!1})}function Hr(e,t){return new Jo({check:"greater_than",...K(t),value:e,inclusive:!0})}function os(e,t){return new xi({check:"multiple_of",...K(t),value:e})}function ea(e,t){return new Ki({check:"max_length",...K(t),maximum:e})}function $r(e,t){return new Ji({check:"min_length",...K(t),minimum:e})}function ta(e,t){return new Gi({check:"length_equals",...K(t),length:e})}function Ou(e,t){return new Bi({check:"string_format",format:"regex",...K(t),pattern:e})}function ju(e){return new Wi({check:"string_format",format:"lowercase",...K(e)})}function qu(e){return new Qi({check:"string_format",format:"uppercase",...K(e)})}function Cu(e,t){return new Yi({check:"string_format",format:"includes",...K(t),includes:e})}function Au(e,t){return new Xi({check:"string_format",format:"starts_with",...K(t),prefix:e})}function Mu(e,t){return new ec({check:"string_format",format:"ends_with",...K(t),suffix:e})}function mt(e){return new tc({check:"overwrite",tx:e})}function Du(e){return mt(t=>t.normalize(e))}function Zu(){return mt(e=>e.trim())}function Vu(){return mt(e=>e.toLowerCase())}function Uu(){return mt(e=>e.toUpperCase())}function Fu(){return mt(e=>Ba(e))}function Lu(e,t,r){return new e({type:"array",element:t,...K(r)})}function xu(e,t,r){const n=K(r);return n.abort??(n.abort=!0),new e({type:"custom",check:"custom",fn:t,...n})}function Hu(e,t,r){return new e({type:"custom",check:"custom",fn:t,...K(r)})}function Ku(e){const t=Ju(r=>(r.addIssue=n=>{if(typeof n=="string")r.issues.push(kt(n,r.value,t._zod.def));else{const s=n;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=r.value),s.inst??(s.inst=t),s.continue??(s.continue=!t._zod.def.abort),r.issues.push(kt(s))}},e(r.value,r)));return t}function Ju(e,t){const r=new je({check:"custom",...K(t)});return r._zod.check=e,r}function ra(e){let t=e?.target??"draft-2020-12";return t==="draft-4"&&(t="draft-04"),t==="draft-7"&&(t="draft-07"),{processors:e.processors??{},metadataRegistry:e?.metadata??$t,target:t,unrepresentable:e?.unrepresentable??"throw",override:e?.override??(()=>{}),io:e?.io??"output",counter:0,seen:new Map,cycles:e?.cycles??"ref",reused:e?.reused??"inline",external:e?.external??void 0}}function ye(e,t,r={path:[],schemaPath:[]}){var n;const s=e._zod.def,o=t.seen.get(e);if(o)return o.count++,r.schemaPath.includes(e)&&(o.cycle=r.path),o.schema;const a={schema:{},count:1,cycle:void 0,path:r.path};t.seen.set(e,a);const i=e._zod.toJSONSchema?.();if(i)a.schema=i;else{const d={...r,schemaPath:[...r.schemaPath,e],path:r.path};if(e._zod.processJSONSchema)e._zod.processJSONSchema(t,a.schema,d);else{const m=a.schema,_=t.processors[s.type];if(!_)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${s.type}`);_(e,t,m,d)}const v=e._zod.parent;v&&(a.ref||(a.ref=v),ye(v,t,d),t.seen.get(v).isParent=!0)}const c=t.metadataRegistry.get(e);return c&&Object.assign(a.schema,c),t.io==="input"&&Ie(e)&&(delete a.schema.examples,delete a.schema.default),t.io==="input"&&a.schema._prefault&&((n=a.schema).default??(n.default=a.schema._prefault)),delete a.schema._prefault,t.seen.get(e).schema}function na(e,t){const r=e.seen.get(t);if(!r)throw new Error("Unprocessed schema. This is a bug in Zod.");const n=new Map;for(const a of e.seen.entries()){const i=e.metadataRegistry.get(a[0])?.id;if(i){const c=n.get(i);if(c&&c!==a[0])throw new Error(`Duplicate schema id "${i}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);n.set(i,a[0])}}const s=a=>{const i=e.target==="draft-2020-12"?"$defs":"definitions";if(e.external){const v=e.external.registry.get(a[0])?.id,m=e.external.uri??($=>$);if(v)return{ref:m(v)};const _=a[1].defId??a[1].schema.id??`schema${e.counter++}`;return a[1].defId=_,{defId:_,ref:`${m("__shared")}#/${i}/${_}`}}if(a[1]===r)return{ref:"#"};const l=`#/${i}/`,d=a[1].schema.id??`__schema${e.counter++}`;return{defId:d,ref:l+d}},o=a=>{if(a[1].schema.$ref)return;const i=a[1],{ref:c,defId:l}=s(a);i.def={...i.schema},l&&(i.defId=l);const d=i.schema;for(const v in d)delete d[v];d.$ref=c};if(e.cycles==="throw")for(const a of e.seen.entries()){const i=a[1];if(i.cycle)throw new Error(`Cycle detected: #/${i.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const a of e.seen.entries()){const i=a[1];if(t===a[0]){o(a);continue}if(e.external){const l=e.external.registry.get(a[0])?.id;if(t!==a[0]&&l){o(a);continue}}if(e.metadataRegistry.get(a[0])?.id){o(a);continue}if(i.cycle){o(a);continue}if(i.count>1&&e.reused==="ref"){o(a);continue}}}function sa(e,t){const r=e.seen.get(t);if(!r)throw new Error("Unprocessed schema. This is a bug in Zod.");const n=a=>{const i=e.seen.get(a);if(i.ref===null)return;const c=i.def??i.schema,l={...c},d=i.ref;if(i.ref=null,d){n(d);const m=e.seen.get(d),_=m.schema;if(_.$ref&&(e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0")?(c.allOf=c.allOf??[],c.allOf.push(_)):Object.assign(c,_),Object.assign(c,l),a._zod.parent===d)for(const S in c)S==="$ref"||S==="allOf"||S in l||delete c[S];if(_.$ref&&m.def)for(const S in c)S==="$ref"||S==="allOf"||S in m.def&&JSON.stringify(c[S])===JSON.stringify(m.def[S])&&delete c[S]}const v=a._zod.parent;if(v&&v!==d){n(v);const m=e.seen.get(v);if(m?.schema.$ref&&(c.$ref=m.schema.$ref,m.def))for(const _ in c)_==="$ref"||_==="allOf"||_ in m.def&&JSON.stringify(c[_])===JSON.stringify(m.def[_])&&delete c[_]}e.override({zodSchema:a,jsonSchema:c,path:i.path??[]})};for(const a of[...e.seen.entries()].reverse())n(a[0]);const s={};if(e.target==="draft-2020-12"?s.$schema="https://json-schema.org/draft/2020-12/schema":e.target==="draft-07"?s.$schema="http://json-schema.org/draft-07/schema#":e.target==="draft-04"?s.$schema="http://json-schema.org/draft-04/schema#":e.target,e.external?.uri){const a=e.external.registry.get(t)?.id;if(!a)throw new Error("Schema is missing an `id` property");s.$id=e.external.uri(a)}Object.assign(s,r.def??r.schema);const o=e.external?.defs??{};for(const a of e.seen.entries()){const i=a[1];i.def&&i.defId&&(o[i.defId]=i.def)}e.external||Object.keys(o).length>0&&(e.target==="draft-2020-12"?s.$defs=o:s.definitions=o);try{const a=JSON.parse(JSON.stringify(s));return Object.defineProperty(a,"~standard",{value:{...t["~standard"],jsonSchema:{input:br(t,"input",e.processors),output:br(t,"output",e.processors)}},enumerable:!1,writable:!1}),a}catch{throw new Error("Error converting schema to JSON.")}}function Ie(e,t){const r=t??{seen:new Set};if(r.seen.has(e))return!1;r.seen.add(e);const n=e._zod.def;if(n.type==="transform")return!0;if(n.type==="array")return Ie(n.element,r);if(n.type==="set")return Ie(n.valueType,r);if(n.type==="lazy")return Ie(n.getter(),r);if(n.type==="promise"||n.type==="optional"||n.type==="nonoptional"||n.type==="nullable"||n.type==="readonly"||n.type==="default"||n.type==="prefault")return Ie(n.innerType,r);if(n.type==="intersection")return Ie(n.left,r)||Ie(n.right,r);if(n.type==="record"||n.type==="map")return Ie(n.keyType,r)||Ie(n.valueType,r);if(n.type==="pipe")return Ie(n.in,r)||Ie(n.out,r);if(n.type==="object"){for(const s in n.shape)if(Ie(n.shape[s],r))return!0;return!1}if(n.type==="union"){for(const s of n.options)if(Ie(s,r))return!0;return!1}if(n.type==="tuple"){for(const s of n.items)if(Ie(s,r))return!0;return!!(n.rest&&Ie(n.rest,r))}return!1}const Gu=(e,t={})=>r=>{const n=ra({...r,processors:t});return ye(e,n),na(n,e),sa(n,e)},br=(e,t,r={})=>n=>{const{libraryOptions:s,target:o}=n??{},a=ra({...s??{},target:o,io:t,processors:r});return ye(e,a),na(a,e),sa(a,e)},Bu={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},Wu=(e,t,r,n)=>{const s=r;s.type="string";const{minimum:o,maximum:a,format:i,patterns:c,contentEncoding:l}=e._zod.bag;if(typeof o=="number"&&(s.minLength=o),typeof a=="number"&&(s.maxLength=a),i&&(s.format=Bu[i]??i,s.format===""&&delete s.format,i==="time"&&delete s.format),l&&(s.contentEncoding=l),c&&c.size>0){const d=[...c];d.length===1?s.pattern=d[0].source:d.length>1&&(s.allOf=[...d.map(v=>({...t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0"?{type:"string"}:{},pattern:v.source}))])}},Qu=(e,t,r,n)=>{const s=r,{minimum:o,maximum:a,format:i,multipleOf:c,exclusiveMaximum:l,exclusiveMinimum:d}=e._zod.bag;typeof i=="string"&&i.includes("int")?s.type="integer":s.type="number",typeof d=="number"&&(t.target==="draft-04"||t.target==="openapi-3.0"?(s.minimum=d,s.exclusiveMinimum=!0):s.exclusiveMinimum=d),typeof o=="number"&&(s.minimum=o,typeof d=="number"&&t.target!=="draft-04"&&(d>=o?delete s.minimum:delete s.exclusiveMinimum)),typeof l=="number"&&(t.target==="draft-04"||t.target==="openapi-3.0"?(s.maximum=l,s.exclusiveMaximum=!0):s.exclusiveMaximum=l),typeof a=="number"&&(s.maximum=a,typeof l=="number"&&t.target!=="draft-04"&&(l<=a?delete s.maximum:delete s.exclusiveMaximum)),typeof c=="number"&&(s.multipleOf=c)},Yu=(e,t,r,n)=>{r.type="boolean"},Xu=(e,t,r,n)=>{t.target==="openapi-3.0"?(r.type="string",r.nullable=!0,r.enum=[null]):r.type="null"},el=(e,t,r,n)=>{r.not={}},tl=(e,t,r,n)=>{},rl=(e,t,r,n)=>{const s=e._zod.def,o=qo(s.entries);o.every(a=>typeof a=="number")&&(r.type="number"),o.every(a=>typeof a=="string")&&(r.type="string"),r.enum=o},nl=(e,t,r,n)=>{const s=e._zod.def,o=[];for(const a of s.values)if(a===void 0){if(t.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof a=="bigint"){if(t.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");o.push(Number(a))}else o.push(a);if(o.length!==0)if(o.length===1){const a=o[0];r.type=a===null?"null":typeof a,t.target==="draft-04"||t.target==="openapi-3.0"?r.enum=[a]:r.const=a}else o.every(a=>typeof a=="number")&&(r.type="number"),o.every(a=>typeof a=="string")&&(r.type="string"),o.every(a=>typeof a=="boolean")&&(r.type="boolean"),o.every(a=>a===null)&&(r.type="null"),r.enum=o},sl=(e,t,r,n)=>{if(t.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},ol=(e,t,r,n)=>{if(t.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},al=(e,t,r,n)=>{const s=r,o=e._zod.def,{minimum:a,maximum:i}=e._zod.bag;typeof a=="number"&&(s.minItems=a),typeof i=="number"&&(s.maxItems=i),s.type="array",s.items=ye(o.element,t,{...n,path:[...n.path,"items"]})},il=(e,t,r,n)=>{const s=r,o=e._zod.def;s.type="object",s.properties={};const a=o.shape;for(const l in a)s.properties[l]=ye(a[l],t,{...n,path:[...n.path,"properties",l]});const i=new Set(Object.keys(a)),c=new Set([...i].filter(l=>{const d=o.shape[l]._zod;return t.io==="input"?d.optin===void 0:d.optout===void 0}));c.size>0&&(s.required=Array.from(c)),o.catchall?._zod.def.type==="never"?s.additionalProperties=!1:o.catchall?o.catchall&&(s.additionalProperties=ye(o.catchall,t,{...n,path:[...n.path,"additionalProperties"]})):t.io==="output"&&(s.additionalProperties=!1)},cl=(e,t,r,n)=>{const s=e._zod.def,o=s.inclusive===!1,a=s.options.map((i,c)=>ye(i,t,{...n,path:[...n.path,o?"oneOf":"anyOf",c]}));o?r.oneOf=a:r.anyOf=a},ul=(e,t,r,n)=>{const s=e._zod.def,o=ye(s.left,t,{...n,path:[...n.path,"allOf",0]}),a=ye(s.right,t,{...n,path:[...n.path,"allOf",1]}),i=l=>"allOf"in l&&Object.keys(l).length===1,c=[...i(o)?o.allOf:[o],...i(a)?a.allOf:[a]];r.allOf=c},ll=(e,t,r,n)=>{const s=r,o=e._zod.def;s.type="object";const a=o.keyType,c=a._zod.bag?.patterns;if(o.mode==="loose"&&c&&c.size>0){const d=ye(o.valueType,t,{...n,path:[...n.path,"patternProperties","*"]});s.patternProperties={};for(const v of c)s.patternProperties[v.source]=d}else(t.target==="draft-07"||t.target==="draft-2020-12")&&(s.propertyNames=ye(o.keyType,t,{...n,path:[...n.path,"propertyNames"]})),s.additionalProperties=ye(o.valueType,t,{...n,path:[...n.path,"additionalProperties"]});const l=a._zod.values;if(l){const d=[...l].filter(v=>typeof v=="string"||typeof v=="number");d.length>0&&(s.required=d)}},dl=(e,t,r,n)=>{const s=e._zod.def,o=ye(s.innerType,t,n),a=t.seen.get(e);t.target==="openapi-3.0"?(a.ref=s.innerType,r.nullable=!0):r.anyOf=[o,{type:"null"}]},fl=(e,t,r,n)=>{const s=e._zod.def;ye(s.innerType,t,n);const o=t.seen.get(e);o.ref=s.innerType},hl=(e,t,r,n)=>{const s=e._zod.def;ye(s.innerType,t,n);const o=t.seen.get(e);o.ref=s.innerType,r.default=JSON.parse(JSON.stringify(s.defaultValue))},pl=(e,t,r,n)=>{const s=e._zod.def;ye(s.innerType,t,n);const o=t.seen.get(e);o.ref=s.innerType,t.io==="input"&&(r._prefault=JSON.parse(JSON.stringify(s.defaultValue)))},ml=(e,t,r,n)=>{const s=e._zod.def;ye(s.innerType,t,n);const o=t.seen.get(e);o.ref=s.innerType;let a;try{a=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}r.default=a},_l=(e,t,r,n)=>{const s=e._zod.def,o=t.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;ye(o,t,n);const a=t.seen.get(e);a.ref=o},gl=(e,t,r,n)=>{const s=e._zod.def;ye(s.innerType,t,n);const o=t.seen.get(e);o.ref=s.innerType,r.readOnly=!0},oa=(e,t,r,n)=>{const s=e._zod.def;ye(s.innerType,t,n);const o=t.seen.get(e);o.ref=s.innerType};function Or(e){return!!e._zod}function bt(e,t){return Or(e)?Vo(e,t):e.safeParse(t)}function aa(e){if(!e)return;let t;if(Or(e)?t=e._zod?.def?.shape:t=e.shape,!!t){if(typeof t=="function")try{return t()}catch{return}return t}}function yl(e){if(Or(e)){const o=e._zod?.def;if(o){if(o.value!==void 0)return o.value;if(Array.isArray(o.values)&&o.values.length>0)return o.values[0]}}const r=e._def;if(r){if(r.value!==void 0)return r.value;if(Array.isArray(r.values)&&r.values.length>0)return r.values[0]}const n=e.value;if(n!==void 0)return n}const vl=O("ZodISODateTime",(e,t)=>{mc.init(e,t),_e.init(e,t)});function ia(e){return bu(vl,e)}const wl=O("ZodISODate",(e,t)=>{_c.init(e,t),_e.init(e,t)});function $l(e){return Su(wl,e)}const bl=O("ZodISOTime",(e,t)=>{gc.init(e,t),_e.init(e,t)});function Sl(e){return ku(bl,e)}const kl=O("ZodISODuration",(e,t)=>{yc.init(e,t),_e.init(e,t)});function El(e){return Eu(kl,e)}const Pl=(e,t)=>{Do.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>ci(e,r)},flatten:{value:r=>ii(e,r)},addIssue:{value:r=>{e.issues.push(r),e.message=JSON.stringify(e.issues,sn,2)}},addIssues:{value:r=>{e.issues.push(...r),e.message=JSON.stringify(e.issues,sn,2)}},isEmpty:{get(){return e.issues.length===0}}})},De=O("ZodError",Pl,{Parent:Error}),Tl=hn(De),Rl=pn(De),Il=Ir(De),zl=zr(De),Nl=li(De),Ol=di(De),jl=fi(De),ql=hi(De),Cl=pi(De),Al=mi(De),Ml=_i(De),Dl=gi(De),he=O("ZodType",(e,t)=>(de.init(e,t),Object.assign(e["~standard"],{jsonSchema:{input:br(e,"input"),output:br(e,"output")}}),e.toJSONSchema=Gu(e,{}),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone(Qe(t,{checks:[...t.checks??[],...r.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]}),{parent:!0}),e.with=e.check,e.clone=(r,n)=>Ye(e,r,n),e.brand=()=>e,e.register=((r,n)=>(r.add(e,n),e)),e.parse=(r,n)=>Tl(e,r,n,{callee:e.parse}),e.safeParse=(r,n)=>Il(e,r,n),e.parseAsync=async(r,n)=>Rl(e,r,n,{callee:e.parseAsync}),e.safeParseAsync=async(r,n)=>zl(e,r,n),e.spa=e.safeParseAsync,e.encode=(r,n)=>Nl(e,r,n),e.decode=(r,n)=>Ol(e,r,n),e.encodeAsync=async(r,n)=>jl(e,r,n),e.decodeAsync=async(r,n)=>ql(e,r,n),e.safeEncode=(r,n)=>Cl(e,r,n),e.safeDecode=(r,n)=>Al(e,r,n),e.safeEncodeAsync=async(r,n)=>Ml(e,r,n),e.safeDecodeAsync=async(r,n)=>Dl(e,r,n),e.refine=(r,n)=>e.check(Id(r,n)),e.superRefine=r=>e.check(zd(r)),e.overwrite=r=>e.check(mt(r)),e.optional=()=>ge(e),e.exactOptional=()=>_d(e),e.nullable=()=>cs(e),e.nullish=()=>ge(cs(e)),e.nonoptional=r=>bd(e,r),e.array=()=>te(e),e.or=r=>le([e,r]),e.and=r=>_n(e,r),e.transform=r=>cn(e,pa(r)),e.default=r=>vd(e,r),e.prefault=r=>$d(e,r),e.catch=r=>kd(e,r),e.pipe=r=>cn(e,r),e.readonly=()=>Td(e),e.describe=r=>{const n=e.clone();return $t.add(n,{description:r}),n},Object.defineProperty(e,"description",{get(){return $t.get(e)?.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return $t.get(e);const n=e.clone();return $t.add(n,r[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e.apply=r=>r(e),e)),ca=O("_ZodString",(e,t)=>{mn.init(e,t),he.init(e,t),e._zod.processJSONSchema=(n,s,o)=>Wu(e,n,s);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...n)=>e.check(Ou(...n)),e.includes=(...n)=>e.check(Cu(...n)),e.startsWith=(...n)=>e.check(Au(...n)),e.endsWith=(...n)=>e.check(Mu(...n)),e.min=(...n)=>e.check($r(...n)),e.max=(...n)=>e.check(ea(...n)),e.length=(...n)=>e.check(ta(...n)),e.nonempty=(...n)=>e.check($r(1,...n)),e.lowercase=n=>e.check(ju(n)),e.uppercase=n=>e.check(qu(n)),e.trim=()=>e.check(Zu()),e.normalize=(...n)=>e.check(Du(...n)),e.toLowerCase=()=>e.check(Vu()),e.toUpperCase=()=>e.check(Uu()),e.slugify=()=>e.check(Fu())}),Zl=O("ZodString",(e,t)=>{mn.init(e,t),ca.init(e,t),e.email=r=>e.check(tu(Vl,r)),e.url=r=>e.check(au(Ul,r)),e.jwt=r=>e.check($u(rd,r)),e.emoji=r=>e.check(iu(Fl,r)),e.guid=r=>e.check(rs(as,r)),e.uuid=r=>e.check(ru(jt,r)),e.uuidv4=r=>e.check(nu(jt,r)),e.uuidv6=r=>e.check(su(jt,r)),e.uuidv7=r=>e.check(ou(jt,r)),e.nanoid=r=>e.check(cu(Ll,r)),e.guid=r=>e.check(rs(as,r)),e.cuid=r=>e.check(uu(xl,r)),e.cuid2=r=>e.check(lu(Hl,r)),e.ulid=r=>e.check(du(Kl,r)),e.base64=r=>e.check(yu(Xl,r)),e.base64url=r=>e.check(vu(ed,r)),e.xid=r=>e.check(fu(Jl,r)),e.ksuid=r=>e.check(hu(Gl,r)),e.ipv4=r=>e.check(pu(Bl,r)),e.ipv6=r=>e.check(mu(Wl,r)),e.cidrv4=r=>e.check(_u(Ql,r)),e.cidrv6=r=>e.check(gu(Yl,r)),e.e164=r=>e.check(wu(td,r)),e.datetime=r=>e.check(ia(r)),e.date=r=>e.check($l(r)),e.time=r=>e.check(Sl(r)),e.duration=r=>e.check(El(r))});function z(e){return eu(Zl,e)}const _e=O("ZodStringFormat",(e,t)=>{fe.init(e,t),ca.init(e,t)}),Vl=O("ZodEmail",(e,t)=>{ac.init(e,t),_e.init(e,t)}),as=O("ZodGUID",(e,t)=>{sc.init(e,t),_e.init(e,t)}),jt=O("ZodUUID",(e,t)=>{oc.init(e,t),_e.init(e,t)}),Ul=O("ZodURL",(e,t)=>{ic.init(e,t),_e.init(e,t)}),Fl=O("ZodEmoji",(e,t)=>{cc.init(e,t),_e.init(e,t)}),Ll=O("ZodNanoID",(e,t)=>{uc.init(e,t),_e.init(e,t)}),xl=O("ZodCUID",(e,t)=>{lc.init(e,t),_e.init(e,t)}),Hl=O("ZodCUID2",(e,t)=>{dc.init(e,t),_e.init(e,t)}),Kl=O("ZodULID",(e,t)=>{fc.init(e,t),_e.init(e,t)}),Jl=O("ZodXID",(e,t)=>{hc.init(e,t),_e.init(e,t)}),Gl=O("ZodKSUID",(e,t)=>{pc.init(e,t),_e.init(e,t)}),Bl=O("ZodIPv4",(e,t)=>{vc.init(e,t),_e.init(e,t)}),Wl=O("ZodIPv6",(e,t)=>{wc.init(e,t),_e.init(e,t)}),Ql=O("ZodCIDRv4",(e,t)=>{$c.init(e,t),_e.init(e,t)}),Yl=O("ZodCIDRv6",(e,t)=>{bc.init(e,t),_e.init(e,t)}),Xl=O("ZodBase64",(e,t)=>{Sc.init(e,t),_e.init(e,t)}),ed=O("ZodBase64URL",(e,t)=>{Ec.init(e,t),_e.init(e,t)}),td=O("ZodE164",(e,t)=>{Pc.init(e,t),_e.init(e,t)}),rd=O("ZodJWT",(e,t)=>{Rc.init(e,t),_e.init(e,t)}),ua=O("ZodNumber",(e,t)=>{Bo.init(e,t),he.init(e,t),e._zod.processJSONSchema=(n,s,o)=>Qu(e,n,s),e.gt=(n,s)=>e.check(ss(n,s)),e.gte=(n,s)=>e.check(Hr(n,s)),e.min=(n,s)=>e.check(Hr(n,s)),e.lt=(n,s)=>e.check(ns(n,s)),e.lte=(n,s)=>e.check(xr(n,s)),e.max=(n,s)=>e.check(xr(n,s)),e.int=n=>e.check(is(n)),e.safe=n=>e.check(is(n)),e.positive=n=>e.check(ss(0,n)),e.nonnegative=n=>e.check(Hr(0,n)),e.negative=n=>e.check(ns(0,n)),e.nonpositive=n=>e.check(xr(0,n)),e.multipleOf=(n,s)=>e.check(os(n,s)),e.step=(n,s)=>e.check(os(n,s)),e.finite=()=>e;const r=e._zod.bag;e.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function ue(e){return Pu(ua,e)}const nd=O("ZodNumberFormat",(e,t)=>{Ic.init(e,t),ua.init(e,t)});function is(e){return Tu(nd,e)}const sd=O("ZodBoolean",(e,t)=>{zc.init(e,t),he.init(e,t),e._zod.processJSONSchema=(r,n,s)=>Yu(e,r,n)});function be(e){return Ru(sd,e)}const od=O("ZodNull",(e,t)=>{Nc.init(e,t),he.init(e,t),e._zod.processJSONSchema=(r,n,s)=>Xu(e,r,n)});function la(e){return Iu(od,e)}const ad=O("ZodUnknown",(e,t)=>{Oc.init(e,t),he.init(e,t),e._zod.processJSONSchema=(r,n,s)=>tl()});function pe(){return zu(ad)}const id=O("ZodNever",(e,t)=>{jc.init(e,t),he.init(e,t),e._zod.processJSONSchema=(r,n,s)=>el(e,r,n)});function cd(e){return Nu(id,e)}const ud=O("ZodArray",(e,t)=>{qc.init(e,t),he.init(e,t),e._zod.processJSONSchema=(r,n,s)=>al(e,r,n,s),e.element=t.element,e.min=(r,n)=>e.check($r(r,n)),e.nonempty=r=>e.check($r(1,r)),e.max=(r,n)=>e.check(ea(r,n)),e.length=(r,n)=>e.check(ta(r,n)),e.unwrap=()=>e.element});function te(e,t){return Lu(ud,e,t)}const da=O("ZodObject",(e,t)=>{Ac.init(e,t),he.init(e,t),e._zod.processJSONSchema=(r,n,s)=>il(e,r,n,s),ae(e,"shape",()=>t.shape),e.keyof=()=>Ce(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:pe()}),e.loose=()=>e.clone({...e._zod.def,catchall:pe()}),e.strict=()=>e.clone({...e._zod.def,catchall:cd()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>ri(e,r),e.safeExtend=r=>ni(e,r),e.merge=r=>si(e,r),e.pick=r=>ei(e,r),e.omit=r=>ti(e,r),e.partial=(...r)=>oi(ma,e,r[0]),e.required=(...r)=>ai(_a,e,r[0])});function F(e,t){const r={type:"object",shape:e??{},...K(t)};return new da(r)}function Oe(e,t){return new da({type:"object",shape:e,catchall:pe(),...K(t)})}const fa=O("ZodUnion",(e,t)=>{Yo.init(e,t),he.init(e,t),e._zod.processJSONSchema=(r,n,s)=>cl(e,r,n,s),e.options=t.options});function le(e,t){return new fa({type:"union",options:e,...K(t)})}const ld=O("ZodDiscriminatedUnion",(e,t)=>{fa.init(e,t),Mc.init(e,t)});function ha(e,t,r){return new ld({type:"union",options:t,discriminator:e,...K(r)})}const dd=O("ZodIntersection",(e,t)=>{Dc.init(e,t),he.init(e,t),e._zod.processJSONSchema=(r,n,s)=>ul(e,r,n,s)});function _n(e,t){return new dd({type:"intersection",left:e,right:t})}const fd=O("ZodRecord",(e,t)=>{Zc.init(e,t),he.init(e,t),e._zod.processJSONSchema=(r,n,s)=>ll(e,r,n,s),e.keyType=t.keyType,e.valueType=t.valueType});function me(e,t,r){return new fd({type:"record",keyType:e,valueType:t,...K(r)})}const an=O("ZodEnum",(e,t)=>{Vc.init(e,t),he.init(e,t),e._zod.processJSONSchema=(n,s,o)=>rl(e,n,s),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(n,s)=>{const o={};for(const a of n)if(r.has(a))o[a]=t.entries[a];else throw new Error(`Key ${a} not found in enum`);return new an({...t,checks:[],...K(s),entries:o})},e.exclude=(n,s)=>{const o={...t.entries};for(const a of n)if(r.has(a))delete o[a];else throw new Error(`Key ${a} not found in enum`);return new an({...t,checks:[],...K(s),entries:o})}});function Ce(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(n=>[n,n])):e;return new an({type:"enum",entries:r,...K(t)})}const hd=O("ZodLiteral",(e,t)=>{Uc.init(e,t),he.init(e,t),e._zod.processJSONSchema=(r,n,s)=>nl(e,r,n),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function G(e,t){return new hd({type:"literal",values:Array.isArray(e)?e:[e],...K(t)})}const pd=O("ZodTransform",(e,t)=>{Fc.init(e,t),he.init(e,t),e._zod.processJSONSchema=(r,n,s)=>ol(e,r),e._zod.parse=(r,n)=>{if(n.direction==="backward")throw new Oo(e.constructor.name);r.addIssue=o=>{if(typeof o=="string")r.issues.push(kt(o,r.value,t));else{const a=o;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=r.value),a.inst??(a.inst=e),r.issues.push(kt(a))}};const s=t.transform(r.value,r);return s instanceof Promise?s.then(o=>(r.value=o,r)):(r.value=s,r)}});function pa(e){return new pd({type:"transform",transform:e})}const ma=O("ZodOptional",(e,t)=>{Xo.init(e,t),he.init(e,t),e._zod.processJSONSchema=(r,n,s)=>oa(e,r,n,s),e.unwrap=()=>e._zod.def.innerType});function ge(e){return new ma({type:"optional",innerType:e})}const md=O("ZodExactOptional",(e,t)=>{Lc.init(e,t),he.init(e,t),e._zod.processJSONSchema=(r,n,s)=>oa(e,r,n,s),e.unwrap=()=>e._zod.def.innerType});function _d(e){return new md({type:"optional",innerType:e})}const gd=O("ZodNullable",(e,t)=>{xc.init(e,t),he.init(e,t),e._zod.processJSONSchema=(r,n,s)=>dl(e,r,n,s),e.unwrap=()=>e._zod.def.innerType});function cs(e){return new gd({type:"nullable",innerType:e})}const yd=O("ZodDefault",(e,t)=>{Hc.init(e,t),he.init(e,t),e._zod.processJSONSchema=(r,n,s)=>hl(e,r,n,s),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function vd(e,t){return new yd({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():Ao(t)}})}const wd=O("ZodPrefault",(e,t)=>{Kc.init(e,t),he.init(e,t),e._zod.processJSONSchema=(r,n,s)=>pl(e,r,n,s),e.unwrap=()=>e._zod.def.innerType});function $d(e,t){return new wd({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():Ao(t)}})}const _a=O("ZodNonOptional",(e,t)=>{Jc.init(e,t),he.init(e,t),e._zod.processJSONSchema=(r,n,s)=>fl(e,r,n,s),e.unwrap=()=>e._zod.def.innerType});function bd(e,t){return new _a({type:"nonoptional",innerType:e,...K(t)})}const Sd=O("ZodCatch",(e,t)=>{Gc.init(e,t),he.init(e,t),e._zod.processJSONSchema=(r,n,s)=>ml(e,r,n,s),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function kd(e,t){return new Sd({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const Ed=O("ZodPipe",(e,t)=>{Bc.init(e,t),he.init(e,t),e._zod.processJSONSchema=(r,n,s)=>_l(e,r,n,s),e.in=t.in,e.out=t.out});function cn(e,t){return new Ed({type:"pipe",in:e,out:t})}const Pd=O("ZodReadonly",(e,t)=>{Wc.init(e,t),he.init(e,t),e._zod.processJSONSchema=(r,n,s)=>gl(e,r,n,s),e.unwrap=()=>e._zod.def.innerType});function Td(e){return new Pd({type:"readonly",innerType:e})}const ga=O("ZodCustom",(e,t)=>{Qc.init(e,t),he.init(e,t),e._zod.processJSONSchema=(r,n,s)=>sl(e,r)});function Rd(e,t){return xu(ga,e??(()=>!0),t)}function Id(e,t={}){return Hu(ga,e,t)}function zd(e){return Ku(e)}function ya(e,t){return cn(pa(e),t)}const va="2025-11-25",Nd=[va,"2025-06-18","2025-03-26","2024-11-05","2024-10-07"],st="io.modelcontextprotocol/related-task",jr="2.0",Se=Rd(e=>e!==null&&(typeof e=="object"||typeof e=="function")),wa=le([z(),ue().int()]),$a=z();Oe({ttl:le([ue(),la()]).optional(),pollInterval:ue().optional()});const Od=F({ttl:ue().optional()}),jd=F({taskId:z()}),gn=Oe({progressToken:wa.optional(),[st]:jd.optional()}),Ae=F({_meta:gn.optional()}),Et=Ae.extend({task:Od.optional()}),qd=e=>Et.safeParse(e).success,ke=F({method:z(),params:Ae.loose().optional()}),Ze=F({_meta:gn.optional()}),Ve=F({method:z(),params:Ze.loose().optional()}),Ee=Oe({_meta:gn.optional()}),qr=le([z(),ue().int()]),ba=F({jsonrpc:G(jr),id:qr,...ke.shape}).strict(),us=e=>ba.safeParse(e).success,Sa=F({jsonrpc:G(jr),...Ve.shape}).strict(),Cd=e=>Sa.safeParse(e).success,yn=F({jsonrpc:G(jr),id:qr,result:Ee}).strict(),qt=e=>yn.safeParse(e).success;var re;(function(e){e[e.ConnectionClosed=-32e3]="ConnectionClosed",e[e.RequestTimeout=-32001]="RequestTimeout",e[e.ParseError=-32700]="ParseError",e[e.InvalidRequest=-32600]="InvalidRequest",e[e.MethodNotFound=-32601]="MethodNotFound",e[e.InvalidParams=-32602]="InvalidParams",e[e.InternalError=-32603]="InternalError",e[e.UrlElicitationRequired=-32042]="UrlElicitationRequired"})(re||(re={}));const vn=F({jsonrpc:G(jr),id:qr.optional(),error:F({code:ue().int(),message:z(),data:pe().optional()})}).strict(),Ad=e=>vn.safeParse(e).success,Md=le([ba,Sa,yn,vn]);le([yn,vn]);const wn=Ee.strict(),Dd=Ze.extend({requestId:qr.optional(),reason:z().optional()}),$n=Ve.extend({method:G("notifications/cancelled"),params:Dd}),Zd=F({src:z(),mimeType:z().optional(),sizes:te(z()).optional(),theme:Ce(["light","dark"]).optional()}),Pt=F({icons:te(Zd).optional()}),pt=F({name:z(),title:z().optional()}),ka=pt.extend({...pt.shape,...Pt.shape,version:z(),websiteUrl:z().optional(),description:z().optional()}),Vd=_n(F({applyDefaults:be().optional()}),me(z(),pe())),Ud=ya(e=>e&&typeof e=="object"&&!Array.isArray(e)&&Object.keys(e).length===0?{form:{}}:e,_n(F({form:Vd.optional(),url:Se.optional()}),me(z(),pe()).optional())),Fd=Oe({list:Se.optional(),cancel:Se.optional(),requests:Oe({sampling:Oe({createMessage:Se.optional()}).optional(),elicitation:Oe({create:Se.optional()}).optional()}).optional()}),Ld=Oe({list:Se.optional(),cancel:Se.optional(),requests:Oe({tools:Oe({call:Se.optional()}).optional()}).optional()}),xd=F({experimental:me(z(),Se).optional(),sampling:F({context:Se.optional(),tools:Se.optional()}).optional(),elicitation:Ud.optional(),roots:F({listChanged:be().optional()}).optional(),tasks:Fd.optional()}),Hd=Ae.extend({protocolVersion:z(),capabilities:xd,clientInfo:ka}),Ea=ke.extend({method:G("initialize"),params:Hd}),Kd=F({experimental:me(z(),Se).optional(),logging:Se.optional(),completions:Se.optional(),prompts:F({listChanged:be().optional()}).optional(),resources:F({subscribe:be().optional(),listChanged:be().optional()}).optional(),tools:F({listChanged:be().optional()}).optional(),tasks:Ld.optional()}),Jd=Ee.extend({protocolVersion:z(),capabilities:Kd,serverInfo:ka,instructions:z().optional()}),Pa=Ve.extend({method:G("notifications/initialized"),params:Ze.optional()}),bn=ke.extend({method:G("ping"),params:Ae.optional()}),Gd=F({progress:ue(),total:ge(ue()),message:ge(z())}),Bd=F({...Ze.shape,...Gd.shape,progressToken:wa}),Sn=Ve.extend({method:G("notifications/progress"),params:Bd}),Wd=Ae.extend({cursor:$a.optional()}),Tt=ke.extend({params:Wd.optional()}),Rt=Ee.extend({nextCursor:$a.optional()}),Qd=Ce(["working","input_required","completed","failed","cancelled"]),It=F({taskId:z(),status:Qd,ttl:le([ue(),la()]),createdAt:z(),lastUpdatedAt:z(),pollInterval:ge(ue()),statusMessage:ge(z())}),Cr=Ee.extend({task:It}),Yd=Ze.merge(It),Sr=Ve.extend({method:G("notifications/tasks/status"),params:Yd}),kn=ke.extend({method:G("tasks/get"),params:Ae.extend({taskId:z()})}),En=Ee.merge(It),Pn=ke.extend({method:G("tasks/result"),params:Ae.extend({taskId:z()})});Ee.loose();const Tn=Tt.extend({method:G("tasks/list")}),Rn=Rt.extend({tasks:te(It)}),In=ke.extend({method:G("tasks/cancel"),params:Ae.extend({taskId:z()})}),Xd=Ee.merge(It),Ta=F({uri:z(),mimeType:ge(z()),_meta:me(z(),pe()).optional()}),Ra=Ta.extend({text:z()}),zn=z().refine(e=>{try{return atob(e),!0}catch{return!1}},{message:"Invalid Base64 string"}),Ia=Ta.extend({blob:zn}),zt=Ce(["user","assistant"]),_t=F({audience:te(zt).optional(),priority:ue().min(0).max(1).optional(),lastModified:ia({offset:!0}).optional()}),za=F({...pt.shape,...Pt.shape,uri:z(),description:ge(z()),mimeType:ge(z()),annotations:_t.optional(),_meta:ge(Oe({}))}),ef=F({...pt.shape,...Pt.shape,uriTemplate:z(),description:ge(z()),mimeType:ge(z()),annotations:_t.optional(),_meta:ge(Oe({}))}),tf=Tt.extend({method:G("resources/list")}),rf=Rt.extend({resources:te(za)}),nf=Tt.extend({method:G("resources/templates/list")}),sf=Rt.extend({resourceTemplates:te(ef)}),Nn=Ae.extend({uri:z()}),of=Nn,af=ke.extend({method:G("resources/read"),params:of}),cf=Ee.extend({contents:te(le([Ra,Ia]))}),uf=Ve.extend({method:G("notifications/resources/list_changed"),params:Ze.optional()}),lf=Nn,df=ke.extend({method:G("resources/subscribe"),params:lf}),ff=Nn,hf=ke.extend({method:G("resources/unsubscribe"),params:ff}),pf=Ze.extend({uri:z()}),mf=Ve.extend({method:G("notifications/resources/updated"),params:pf}),_f=F({name:z(),description:ge(z()),required:ge(be())}),gf=F({...pt.shape,...Pt.shape,description:ge(z()),arguments:ge(te(_f)),_meta:ge(Oe({}))}),yf=Tt.extend({method:G("prompts/list")}),vf=Rt.extend({prompts:te(gf)}),wf=Ae.extend({name:z(),arguments:me(z(),z()).optional()}),$f=ke.extend({method:G("prompts/get"),params:wf}),On=F({type:G("text"),text:z(),annotations:_t.optional(),_meta:me(z(),pe()).optional()}),jn=F({type:G("image"),data:zn,mimeType:z(),annotations:_t.optional(),_meta:me(z(),pe()).optional()}),qn=F({type:G("audio"),data:zn,mimeType:z(),annotations:_t.optional(),_meta:me(z(),pe()).optional()}),bf=F({type:G("tool_use"),name:z(),id:z(),input:me(z(),pe()),_meta:me(z(),pe()).optional()}),Sf=F({type:G("resource"),resource:le([Ra,Ia]),annotations:_t.optional(),_meta:me(z(),pe()).optional()}),kf=za.extend({type:G("resource_link")}),Cn=le([On,jn,qn,kf,Sf]),Ef=F({role:zt,content:Cn}),Pf=Ee.extend({description:z().optional(),messages:te(Ef)}),Tf=Ve.extend({method:G("notifications/prompts/list_changed"),params:Ze.optional()}),Rf=F({title:z().optional(),readOnlyHint:be().optional(),destructiveHint:be().optional(),idempotentHint:be().optional(),openWorldHint:be().optional()}),If=F({taskSupport:Ce(["required","optional","forbidden"]).optional()}),Na=F({...pt.shape,...Pt.shape,description:z().optional(),inputSchema:F({type:G("object"),properties:me(z(),Se).optional(),required:te(z()).optional()}).catchall(pe()),outputSchema:F({type:G("object"),properties:me(z(),Se).optional(),required:te(z()).optional()}).catchall(pe()).optional(),annotations:Rf.optional(),execution:If.optional(),_meta:me(z(),pe()).optional()}),Oa=Tt.extend({method:G("tools/list")}),zf=Rt.extend({tools:te(Na)}),An=Ee.extend({content:te(Cn).default([]),structuredContent:me(z(),pe()).optional(),isError:be().optional()});An.or(Ee.extend({toolResult:pe()}));const Nf=Et.extend({name:z(),arguments:me(z(),pe()).optional()}),Mn=ke.extend({method:G("tools/call"),params:Nf}),Of=Ve.extend({method:G("notifications/tools/list_changed"),params:Ze.optional()});F({autoRefresh:be().default(!0),debounceMs:ue().int().nonnegative().default(300)});const kr=Ce(["debug","info","notice","warning","error","critical","alert","emergency"]),jf=Ae.extend({level:kr}),ja=ke.extend({method:G("logging/setLevel"),params:jf}),qf=Ze.extend({level:kr,logger:z().optional(),data:pe()}),Cf=Ve.extend({method:G("notifications/message"),params:qf}),Af=F({name:z().optional()}),Mf=F({hints:te(Af).optional(),costPriority:ue().min(0).max(1).optional(),speedPriority:ue().min(0).max(1).optional(),intelligencePriority:ue().min(0).max(1).optional()}),Df=F({mode:Ce(["auto","required","none"]).optional()}),Zf=F({type:G("tool_result"),toolUseId:z().describe("The unique identifier for the corresponding tool call."),content:te(Cn).default([]),structuredContent:F({}).loose().optional(),isError:be().optional(),_meta:me(z(),pe()).optional()}),Vf=ha("type",[On,jn,qn]),Er=ha("type",[On,jn,qn,bf,Zf]),Uf=F({role:zt,content:le([Er,te(Er)]),_meta:me(z(),pe()).optional()}),Ff=Et.extend({messages:te(Uf),modelPreferences:Mf.optional(),systemPrompt:z().optional(),includeContext:Ce(["none","thisServer","allServers"]).optional(),temperature:ue().optional(),maxTokens:ue().int(),stopSequences:te(z()).optional(),metadata:Se.optional(),tools:te(Na).optional(),toolChoice:Df.optional()}),Lf=ke.extend({method:G("sampling/createMessage"),params:Ff}),qa=Ee.extend({model:z(),stopReason:ge(Ce(["endTurn","stopSequence","maxTokens"]).or(z())),role:zt,content:Vf}),Ca=Ee.extend({model:z(),stopReason:ge(Ce(["endTurn","stopSequence","maxTokens","toolUse"]).or(z())),role:zt,content:le([Er,te(Er)])}),xf=F({type:G("boolean"),title:z().optional(),description:z().optional(),default:be().optional()}),Hf=F({type:G("string"),title:z().optional(),description:z().optional(),minLength:ue().optional(),maxLength:ue().optional(),format:Ce(["email","uri","date","date-time"]).optional(),default:z().optional()}),Kf=F({type:Ce(["number","integer"]),title:z().optional(),description:z().optional(),minimum:ue().optional(),maximum:ue().optional(),default:ue().optional()}),Jf=F({type:G("string"),title:z().optional(),description:z().optional(),enum:te(z()),default:z().optional()}),Gf=F({type:G("string"),title:z().optional(),description:z().optional(),oneOf:te(F({const:z(),title:z()})),default:z().optional()}),Bf=F({type:G("string"),title:z().optional(),description:z().optional(),enum:te(z()),enumNames:te(z()).optional(),default:z().optional()}),Wf=le([Jf,Gf]),Qf=F({type:G("array"),title:z().optional(),description:z().optional(),minItems:ue().optional(),maxItems:ue().optional(),items:F({type:G("string"),enum:te(z())}),default:te(z()).optional()}),Yf=F({type:G("array"),title:z().optional(),description:z().optional(),minItems:ue().optional(),maxItems:ue().optional(),items:F({anyOf:te(F({const:z(),title:z()}))}),default:te(z()).optional()}),Xf=le([Qf,Yf]),eh=le([Bf,Wf,Xf]),th=le([eh,xf,Hf,Kf]),rh=Et.extend({mode:G("form").optional(),message:z(),requestedSchema:F({type:G("object"),properties:me(z(),th),required:te(z()).optional()})}),nh=Et.extend({mode:G("url"),message:z(),elicitationId:z(),url:z().url()}),sh=le([rh,nh]),oh=ke.extend({method:G("elicitation/create"),params:sh}),ah=Ze.extend({elicitationId:z()}),ih=Ve.extend({method:G("notifications/elicitation/complete"),params:ah}),un=Ee.extend({action:Ce(["accept","decline","cancel"]),content:ya(e=>e===null?void 0:e,me(z(),le([z(),ue(),be(),te(z())])).optional())}),ch=F({type:G("ref/resource"),uri:z()}),uh=F({type:G("ref/prompt"),name:z()}),lh=Ae.extend({ref:le([uh,ch]),argument:F({name:z(),value:z()}),context:F({arguments:me(z(),z()).optional()}).optional()}),dh=ke.extend({method:G("completion/complete"),params:lh}),fh=Ee.extend({completion:Oe({values:te(z()).max(100),total:ge(ue().int()),hasMore:ge(be())})}),hh=F({uri:z().startsWith("file://"),name:z().optional(),_meta:me(z(),pe()).optional()}),ph=ke.extend({method:G("roots/list"),params:Ae.optional()}),Aa=Ee.extend({roots:te(hh)}),mh=Ve.extend({method:G("notifications/roots/list_changed"),params:Ze.optional()});le([bn,Ea,dh,ja,$f,yf,tf,nf,af,df,hf,Mn,Oa,kn,Pn,Tn,In]);le([$n,Sn,Pa,mh,Sr]);le([wn,qa,Ca,un,Aa,En,Rn,Cr]);le([bn,Lf,oh,ph,kn,Pn,Tn,In]);le([$n,Sn,Cf,mf,uf,Of,Tf,Sr,ih]);le([wn,Jd,fh,Pf,vf,rf,sf,cf,An,zf,En,Rn,Cr]);class X extends Error{constructor(t,r,n){super(`MCP error ${t}: ${r}`),this.code=t,this.data=n,this.name="McpError"}static fromError(t,r,n){if(t===re.UrlElicitationRequired&&n){const s=n;if(s.elicitations)return new _h(s.elicitations,r)}return new X(t,r,n)}}class _h extends X{constructor(t,r=`URL elicitation${t.length>1?"s":""} required`){super(re.UrlElicitationRequired,r,{elicitations:t})}get elicitations(){return this.data?.elicitations??[]}}function et(e){return e==="completed"||e==="failed"||e==="cancelled"}new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function ls(e){const r=aa(e)?.method;if(!r)throw new Error("Schema is missing a method literal");const n=yl(r);if(typeof n!="string")throw new Error("Schema method literal must be a string");return n}function ds(e,t){const r=bt(e,t);if(!r.success)throw r.error;return r.data}const gh=6e4;class yh{constructor(t){this._options=t,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this._taskProgressTokens=new Map,this._requestResolvers=new Map,this.setNotificationHandler($n,r=>{this._oncancel(r)}),this.setNotificationHandler(Sn,r=>{this._onprogress(r)}),this.setRequestHandler(bn,r=>({})),this._taskStore=t?.taskStore,this._taskMessageQueue=t?.taskMessageQueue,this._taskStore&&(this.setRequestHandler(kn,async(r,n)=>{const s=await this._taskStore.getTask(r.params.taskId,n.sessionId);if(!s)throw new X(re.InvalidParams,"Failed to retrieve task: Task not found");return{...s}}),this.setRequestHandler(Pn,async(r,n)=>{const s=async()=>{const o=r.params.taskId;if(this._taskMessageQueue){let i;for(;i=await this._taskMessageQueue.dequeue(o,n.sessionId);){if(i.type==="response"||i.type==="error"){const c=i.message,l=c.id,d=this._requestResolvers.get(l);if(d)if(this._requestResolvers.delete(l),i.type==="response")d(c);else{const v=c,m=new X(v.error.code,v.error.message,v.error.data);d(m)}else{const v=i.type==="response"?"Response":"Error";this._onerror(new Error(`${v} handler missing for request ${l}`))}continue}await this._transport?.send(i.message,{relatedRequestId:n.requestId})}}const a=await this._taskStore.getTask(o,n.sessionId);if(!a)throw new X(re.InvalidParams,`Task not found: ${o}`);if(!et(a.status))return await this._waitForTaskUpdate(o,n.signal),await s();if(et(a.status)){const i=await this._taskStore.getTaskResult(o,n.sessionId);return this._clearTaskQueue(o),{...i,_meta:{...i._meta,[st]:{taskId:o}}}}return await s()};return await s()}),this.setRequestHandler(Tn,async(r,n)=>{try{const{tasks:s,nextCursor:o}=await this._taskStore.listTasks(r.params?.cursor,n.sessionId);return{tasks:s,nextCursor:o,_meta:{}}}catch(s){throw new X(re.InvalidParams,`Failed to list tasks: ${s instanceof Error?s.message:String(s)}`)}}),this.setRequestHandler(In,async(r,n)=>{try{const s=await this._taskStore.getTask(r.params.taskId,n.sessionId);if(!s)throw new X(re.InvalidParams,`Task not found: ${r.params.taskId}`);if(et(s.status))throw new X(re.InvalidParams,`Cannot cancel task in terminal status: ${s.status}`);await this._taskStore.updateTaskStatus(r.params.taskId,"cancelled","Client cancelled task execution.",n.sessionId),this._clearTaskQueue(r.params.taskId);const o=await this._taskStore.getTask(r.params.taskId,n.sessionId);if(!o)throw new X(re.InvalidParams,`Task not found after cancellation: ${r.params.taskId}`);return{_meta:{},...o}}catch(s){throw s instanceof X?s:new X(re.InvalidRequest,`Failed to cancel task: ${s instanceof Error?s.message:String(s)}`)}}))}async _oncancel(t){if(!t.params.requestId)return;this._requestHandlerAbortControllers.get(t.params.requestId)?.abort(t.params.reason)}_setupTimeout(t,r,n,s,o=!1){this._timeoutInfo.set(t,{timeoutId:setTimeout(s,r),startTime:Date.now(),timeout:r,maxTotalTimeout:n,resetTimeoutOnProgress:o,onTimeout:s})}_resetTimeout(t){const r=this._timeoutInfo.get(t);if(!r)return!1;const n=Date.now()-r.startTime;if(r.maxTotalTimeout&&n>=r.maxTotalTimeout)throw this._timeoutInfo.delete(t),X.fromError(re.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:r.maxTotalTimeout,totalElapsed:n});return clearTimeout(r.timeoutId),r.timeoutId=setTimeout(r.onTimeout,r.timeout),!0}_cleanupTimeout(t){const r=this._timeoutInfo.get(t);r&&(clearTimeout(r.timeoutId),this._timeoutInfo.delete(t))}async connect(t){this._transport=t;const r=this.transport?.onclose;this._transport.onclose=()=>{r?.(),this._onclose()};const n=this.transport?.onerror;this._transport.onerror=o=>{n?.(o),this._onerror(o)};const s=this._transport?.onmessage;this._transport.onmessage=(o,a)=>{s?.(o,a),qt(o)||Ad(o)?this._onresponse(o):us(o)?this._onrequest(o,a):Cd(o)?this._onnotification(o):this._onerror(new Error(`Unknown message type: ${JSON.stringify(o)}`))},await this._transport.start()}_onclose(){const t=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._taskProgressTokens.clear(),this._pendingDebouncedNotifications.clear();const r=X.fromError(re.ConnectionClosed,"Connection closed");this._transport=void 0,this.onclose?.();for(const n of t.values())n(r)}_onerror(t){this.onerror?.(t)}_onnotification(t){const r=this._notificationHandlers.get(t.method)??this.fallbackNotificationHandler;r!==void 0&&Promise.resolve().then(()=>r(t)).catch(n=>this._onerror(new Error(`Uncaught error in notification handler: ${n}`)))}_onrequest(t,r){const n=this._requestHandlers.get(t.method)??this.fallbackRequestHandler,s=this._transport,o=t.params?._meta?.[st]?.taskId;if(n===void 0){const d={jsonrpc:"2.0",id:t.id,error:{code:re.MethodNotFound,message:"Method not found"}};o&&this._taskMessageQueue?this._enqueueTaskMessage(o,{type:"error",message:d,timestamp:Date.now()},s?.sessionId).catch(v=>this._onerror(new Error(`Failed to enqueue error response: ${v}`))):s?.send(d).catch(v=>this._onerror(new Error(`Failed to send an error response: ${v}`)));return}const a=new AbortController;this._requestHandlerAbortControllers.set(t.id,a);const i=qd(t.params)?t.params.task:void 0,c=this._taskStore?this.requestTaskStore(t,s?.sessionId):void 0,l={signal:a.signal,sessionId:s?.sessionId,_meta:t.params?._meta,sendNotification:async d=>{const v={relatedRequestId:t.id};o&&(v.relatedTask={taskId:o}),await this.notification(d,v)},sendRequest:async(d,v,m)=>{const _={...m,relatedRequestId:t.id};o&&!_.relatedTask&&(_.relatedTask={taskId:o});const $=_.relatedTask?.taskId??o;return $&&c&&await c.updateTaskStatus($,"input_required"),await this.request(d,v,_)},authInfo:r?.authInfo,requestId:t.id,requestInfo:r?.requestInfo,taskId:o,taskStore:c,taskRequestedTtl:i?.ttl,closeSSEStream:r?.closeSSEStream,closeStandaloneSSEStream:r?.closeStandaloneSSEStream};Promise.resolve().then(()=>{i&&this.assertTaskHandlerCapability(t.method)}).then(()=>n(t,l)).then(async d=>{if(a.signal.aborted)return;const v={result:d,jsonrpc:"2.0",id:t.id};o&&this._taskMessageQueue?await this._enqueueTaskMessage(o,{type:"response",message:v,timestamp:Date.now()},s?.sessionId):await s?.send(v)},async d=>{if(a.signal.aborted)return;const v={jsonrpc:"2.0",id:t.id,error:{code:Number.isSafeInteger(d.code)?d.code:re.InternalError,message:d.message??"Internal error",...d.data!==void 0&&{data:d.data}}};o&&this._taskMessageQueue?await this._enqueueTaskMessage(o,{type:"error",message:v,timestamp:Date.now()},s?.sessionId):await s?.send(v)}).catch(d=>this._onerror(new Error(`Failed to send response: ${d}`))).finally(()=>{this._requestHandlerAbortControllers.delete(t.id)})}_onprogress(t){const{progressToken:r,...n}=t.params,s=Number(r),o=this._progressHandlers.get(s);if(!o){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(t)}`));return}const a=this._responseHandlers.get(s),i=this._timeoutInfo.get(s);if(i&&a&&i.resetTimeoutOnProgress)try{this._resetTimeout(s)}catch(c){this._responseHandlers.delete(s),this._progressHandlers.delete(s),this._cleanupTimeout(s),a(c);return}o(n)}_onresponse(t){const r=Number(t.id),n=this._requestResolvers.get(r);if(n){if(this._requestResolvers.delete(r),qt(t))n(t);else{const a=new X(t.error.code,t.error.message,t.error.data);n(a)}return}const s=this._responseHandlers.get(r);if(s===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(t)}`));return}this._responseHandlers.delete(r),this._cleanupTimeout(r);let o=!1;if(qt(t)&&t.result&&typeof t.result=="object"){const a=t.result;if(a.task&&typeof a.task=="object"){const i=a.task;typeof i.taskId=="string"&&(o=!0,this._taskProgressTokens.set(i.taskId,r))}}if(o||this._progressHandlers.delete(r),qt(t))s(t);else{const a=X.fromError(t.error.code,t.error.message,t.error.data);s(a)}}get transport(){return this._transport}async close(){await this._transport?.close()}async*requestStream(t,r,n){const{task:s}=n??{};if(!s){try{yield{type:"result",result:await this.request(t,r,n)}}catch(a){yield{type:"error",error:a instanceof X?a:new X(re.InternalError,String(a))}}return}let o;try{const a=await this.request(t,Cr,n);if(a.task)o=a.task.taskId,yield{type:"taskCreated",task:a.task};else throw new X(re.InternalError,"Task creation did not return a task");for(;;){const i=await this.getTask({taskId:o},n);if(yield{type:"taskStatus",task:i},et(i.status)){i.status==="completed"?yield{type:"result",result:await this.getTaskResult({taskId:o},r,n)}:i.status==="failed"?yield{type:"error",error:new X(re.InternalError,`Task ${o} failed`)}:i.status==="cancelled"&&(yield{type:"error",error:new X(re.InternalError,`Task ${o} was cancelled`)});return}if(i.status==="input_required"){yield{type:"result",result:await this.getTaskResult({taskId:o},r,n)};return}const c=i.pollInterval??this._options?.defaultTaskPollInterval??1e3;await new Promise(l=>setTimeout(l,c)),n?.signal?.throwIfAborted()}}catch(a){yield{type:"error",error:a instanceof X?a:new X(re.InternalError,String(a))}}}request(t,r,n){const{relatedRequestId:s,resumptionToken:o,onresumptiontoken:a,task:i,relatedTask:c}=n??{};return new Promise((l,d)=>{const v=u=>{d(u)};if(!this._transport){v(new Error("Not connected"));return}if(this._options?.enforceStrictCapabilities===!0)try{this.assertCapabilityForMethod(t.method),i&&this.assertTaskCapability(t.method)}catch(u){v(u);return}n?.signal?.throwIfAborted();const m=this._requestMessageId++,_={...t,jsonrpc:"2.0",id:m};n?.onprogress&&(this._progressHandlers.set(m,n.onprogress),_.params={...t.params,_meta:{...t.params?._meta||{},progressToken:m}}),i&&(_.params={..._.params,task:i}),c&&(_.params={..._.params,_meta:{..._.params?._meta||{},[st]:c}});const $=u=>{this._responseHandlers.delete(m),this._progressHandlers.delete(m),this._cleanupTimeout(m),this._transport?.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:m,reason:String(u)}},{relatedRequestId:s,resumptionToken:o,onresumptiontoken:a}).catch(w=>this._onerror(new Error(`Failed to send cancellation: ${w}`)));const h=u instanceof X?u:new X(re.RequestTimeout,String(u));d(h)};this._responseHandlers.set(m,u=>{if(!n?.signal?.aborted){if(u instanceof Error)return d(u);try{const h=bt(r,u.result);h.success?l(h.data):d(h.error)}catch(h){d(h)}}}),n?.signal?.addEventListener("abort",()=>{$(n?.signal?.reason)});const S=n?.timeout??gh,p=()=>$(X.fromError(re.RequestTimeout,"Request timed out",{timeout:S}));this._setupTimeout(m,S,n?.maxTotalTimeout,p,n?.resetTimeoutOnProgress??!1);const g=c?.taskId;if(g){const u=h=>{const w=this._responseHandlers.get(m);w?w(h):this._onerror(new Error(`Response handler missing for side-channeled request ${m}`))};this._requestResolvers.set(m,u),this._enqueueTaskMessage(g,{type:"request",message:_,timestamp:Date.now()}).catch(h=>{this._cleanupTimeout(m),d(h)})}else this._transport.send(_,{relatedRequestId:s,resumptionToken:o,onresumptiontoken:a}).catch(u=>{this._cleanupTimeout(m),d(u)})})}async getTask(t,r){return this.request({method:"tasks/get",params:t},En,r)}async getTaskResult(t,r,n){return this.request({method:"tasks/result",params:t},r,n)}async listTasks(t,r){return this.request({method:"tasks/list",params:t},Rn,r)}async cancelTask(t,r){return this.request({method:"tasks/cancel",params:t},Xd,r)}async notification(t,r){if(!this._transport)throw new Error("Not connected");this.assertNotificationCapability(t.method);const n=r?.relatedTask?.taskId;if(n){const i={...t,jsonrpc:"2.0",params:{...t.params,_meta:{...t.params?._meta||{},[st]:r.relatedTask}}};await this._enqueueTaskMessage(n,{type:"notification",message:i,timestamp:Date.now()});return}if((this._options?.debouncedNotificationMethods??[]).includes(t.method)&&!t.params&&!r?.relatedRequestId&&!r?.relatedTask){if(this._pendingDebouncedNotifications.has(t.method))return;this._pendingDebouncedNotifications.add(t.method),Promise.resolve().then(()=>{if(this._pendingDebouncedNotifications.delete(t.method),!this._transport)return;let i={...t,jsonrpc:"2.0"};r?.relatedTask&&(i={...i,params:{...i.params,_meta:{...i.params?._meta||{},[st]:r.relatedTask}}}),this._transport?.send(i,r).catch(c=>this._onerror(c))});return}let a={...t,jsonrpc:"2.0"};r?.relatedTask&&(a={...a,params:{...a.params,_meta:{...a.params?._meta||{},[st]:r.relatedTask}}}),await this._transport.send(a,r)}setRequestHandler(t,r){const n=ls(t);this.assertRequestHandlerCapability(n),this._requestHandlers.set(n,(s,o)=>{const a=ds(t,s);return Promise.resolve(r(a,o))})}removeRequestHandler(t){this._requestHandlers.delete(t)}assertCanSetRequestHandler(t){if(this._requestHandlers.has(t))throw new Error(`A request handler for ${t} already exists, which would be overridden`)}setNotificationHandler(t,r){const n=ls(t);this._notificationHandlers.set(n,s=>{const o=ds(t,s);return Promise.resolve(r(o))})}removeNotificationHandler(t){this._notificationHandlers.delete(t)}_cleanupTaskProgressHandler(t){const r=this._taskProgressTokens.get(t);r!==void 0&&(this._progressHandlers.delete(r),this._taskProgressTokens.delete(t))}async _enqueueTaskMessage(t,r,n){if(!this._taskStore||!this._taskMessageQueue)throw new Error("Cannot enqueue task message: taskStore and taskMessageQueue are not configured");const s=this._options?.maxTaskQueueSize;await this._taskMessageQueue.enqueue(t,r,n,s)}async _clearTaskQueue(t,r){if(this._taskMessageQueue){const n=await this._taskMessageQueue.dequeueAll(t,r);for(const s of n)if(s.type==="request"&&us(s.message)){const o=s.message.id,a=this._requestResolvers.get(o);a?(a(new X(re.InternalError,"Task cancelled or completed")),this._requestResolvers.delete(o)):this._onerror(new Error(`Resolver missing for request ${o} during task ${t} cleanup`))}}}async _waitForTaskUpdate(t,r){let n=this._options?.defaultTaskPollInterval??1e3;try{const s=await this._taskStore?.getTask(t);s?.pollInterval&&(n=s.pollInterval)}catch{}return new Promise((s,o)=>{if(r.aborted){o(new X(re.InvalidRequest,"Request cancelled"));return}const a=setTimeout(s,n);r.addEventListener("abort",()=>{clearTimeout(a),o(new X(re.InvalidRequest,"Request cancelled"))},{once:!0})})}requestTaskStore(t,r){const n=this._taskStore;if(!n)throw new Error("No task store configured");return{createTask:async s=>{if(!t)throw new Error("No request provided");return await n.createTask(s,t.id,{method:t.method,params:t.params},r)},getTask:async s=>{const o=await n.getTask(s,r);if(!o)throw new X(re.InvalidParams,"Failed to retrieve task: Task not found");return o},storeTaskResult:async(s,o,a)=>{await n.storeTaskResult(s,o,a,r);const i=await n.getTask(s,r);if(i){const c=Sr.parse({method:"notifications/tasks/status",params:i});await this.notification(c),et(i.status)&&this._cleanupTaskProgressHandler(s)}},getTaskResult:s=>n.getTaskResult(s,r),updateTaskStatus:async(s,o,a)=>{const i=await n.getTask(s,r);if(!i)throw new X(re.InvalidParams,`Task "${s}" not found - it may have been cleaned up`);if(et(i.status))throw new X(re.InvalidParams,`Cannot update task "${s}" from terminal status "${i.status}" to "${o}". Terminal states (completed, failed, cancelled) cannot transition to other states.`);await n.updateTaskStatus(s,o,a,r);const c=await n.getTask(s,r);if(c){const l=Sr.parse({method:"notifications/tasks/status",params:c});await this.notification(l),et(c.status)&&this._cleanupTaskProgressHandler(s)}},listTasks:s=>n.listTasks(s,r)}}}function fs(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function vh(e,t){const r={...e};for(const n in t){const s=n,o=t[s];if(o===void 0)continue;const a=r[s];fs(a)&&fs(o)?r[s]={...a,...o}:r[s]=o}return r}function Ma(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ct={exports:{}},Kr={},He={},tt={},Jr={},Gr={},Br={},hs;function Pr(){return hs||(hs=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends t{constructor(u){if(super(),!e.IDENTIFIER.test(u))throw new Error("CodeGen: name must be a valid identifier");this.str=u}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=r;class n extends t{constructor(u){super(),this._items=typeof u=="string"?[u]:u}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const u=this._items[0];return u===""||u==='""'}get str(){var u;return(u=this._str)!==null&&u!==void 0?u:this._str=this._items.reduce((h,w)=>`${h}${w}`,"")}get names(){var u;return(u=this._names)!==null&&u!==void 0?u:this._names=this._items.reduce((h,w)=>(w instanceof r&&(h[w.str]=(h[w.str]||0)+1),h),{})}}e._Code=n,e.nil=new n("");function s(g,...u){const h=[g[0]];let w=0;for(;w<u.length;)i(h,u[w]),h.push(g[++w]);return new n(h)}e._=s;const o=new n("+");function a(g,...u){const h=[_(g[0])];let w=0;for(;w<u.length;)h.push(o),i(h,u[w]),h.push(o,_(g[++w]));return c(h),new n(h)}e.str=a;function i(g,u){u instanceof n?g.push(...u._items):u instanceof r?g.push(u):g.push(v(u))}e.addCodeArg=i;function c(g){let u=1;for(;u<g.length-1;){if(g[u]===o){const h=l(g[u-1],g[u+1]);if(h!==void 0){g.splice(u-1,3,h);continue}g[u++]="+"}u++}}function l(g,u){if(u==='""')return g;if(g==='""')return u;if(typeof g=="string")return u instanceof r||g[g.length-1]!=='"'?void 0:typeof u!="string"?`${g.slice(0,-1)}${u}"`:u[0]==='"'?g.slice(0,-1)+u.slice(1):void 0;if(typeof u=="string"&&u[0]==='"'&&!(g instanceof r))return`"${g}${u.slice(1)}`}function d(g,u){return u.emptyStr()?g:g.emptyStr()?u:a`${g}${u}`}e.strConcat=d;function v(g){return typeof g=="number"||typeof g=="boolean"||g===null?g:_(Array.isArray(g)?g.join(","):g)}function m(g){return new n(_(g))}e.stringify=m;function _(g){return JSON.stringify(g).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=_;function $(g){return typeof g=="string"&&e.IDENTIFIER.test(g)?new n(`.${g}`):s`[${g}]`}e.getProperty=$;function S(g){if(typeof g=="string"&&e.IDENTIFIER.test(g))return new n(`${g}`);throw new Error(`CodeGen: invalid export name: ${g}, use explicit $id name mapping`)}e.getEsmExportName=S;function p(g){return new n(g.toString())}e.regexpCode=p})(Br)),Br}var Wr={},ps;function ms(){return ps||(ps=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=Pr();class r extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var n;(function(c){c[c.Started=0]="Started",c[c.Completed=1]="Completed"})(n||(e.UsedValueState=n={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class s{constructor({prefixes:l,parent:d}={}){this._names={},this._prefixes=l,this._parent=d}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const d=this._names[l]||this._nameGroup(l);return`${l}${d.index++}`}_nameGroup(l){var d,v;if(!((v=(d=this._parent)===null||d===void 0?void 0:d._prefixes)===null||v===void 0)&&v.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=s;class o extends t.Name{constructor(l,d){super(d),this.prefix=l}setValue(l,{property:d,itemIndex:v}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(d)}[${v}]`}}e.ValueScopeName=o;const a=(0,t._)`\n`;class i extends s{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?a:t.nil}}get(){return this._scope}name(l){return new o(l,this._newName(l))}value(l,d){var v;if(d.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const m=this.toName(l),{prefix:_}=m,$=(v=d.key)!==null&&v!==void 0?v:d.ref;let S=this._values[_];if(S){const u=S.get($);if(u)return u}else S=this._values[_]=new Map;S.set($,m);const p=this._scope[_]||(this._scope[_]=[]),g=p.length;return p[g]=d.ref,m.setValue(d,{property:_,itemIndex:g}),m}getValue(l,d){const v=this._values[l];if(v)return v.get(d)}scopeRefs(l,d=this._values){return this._reduceValues(d,v=>{if(v.scopePath===void 0)throw new Error(`CodeGen: name "${v}" has no value`);return(0,t._)`${l}${v.scopePath}`})}scopeCode(l=this._values,d,v){return this._reduceValues(l,m=>{if(m.value===void 0)throw new Error(`CodeGen: name "${m}" has no value`);return m.value.code},d,v)}_reduceValues(l,d,v={},m){let _=t.nil;for(const $ in l){const S=l[$];if(!S)continue;const p=v[$]=v[$]||new Map;S.forEach(g=>{if(p.has(g))return;p.set(g,n.Started);let u=d(g);if(u){const h=this.opts.es5?e.varKinds.var:e.varKinds.const;_=(0,t._)`${_}${h} ${g} = ${u};${this.opts._n}`}else if(u=m?.(g))_=(0,t._)`${_}${u}${this.opts._n}`;else throw new r(g);p.set(g,n.Completed)})}return _}}e.ValueScope=i})(Wr)),Wr}var _s;function Q(){return _s||(_s=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=Pr(),r=ms();var n=Pr();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}});var s=ms();Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class o{optimizeNodes(){return this}optimizeNames(y,E){return this}}class a extends o{constructor(y,E,j){super(),this.varKind=y,this.name=E,this.rhs=j}render({es5:y,_n:E}){const j=y?r.varKinds.var:this.varKind,H=this.rhs===void 0?"":` = ${this.rhs}`;return`${j} ${this.name}${H};`+E}optimizeNames(y,E){if(y[this.name.str])return this.rhs&&(this.rhs=x(this.rhs,y,E)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class i extends o{constructor(y,E,j){super(),this.lhs=y,this.rhs=E,this.sideEffects=j}render({_n:y}){return`${this.lhs} = ${this.rhs};`+y}optimizeNames(y,E){if(!(this.lhs instanceof t.Name&&!y[this.lhs.str]&&!this.sideEffects))return this.rhs=x(this.rhs,y,E),this}get names(){const y=this.lhs instanceof t.Name?{}:{...this.lhs.names};return L(y,this.rhs)}}class c extends i{constructor(y,E,j,H){super(y,j,H),this.op=E}render({_n:y}){return`${this.lhs} ${this.op}= ${this.rhs};`+y}}class l extends o{constructor(y){super(),this.label=y,this.names={}}render({_n:y}){return`${this.label}:`+y}}class d extends o{constructor(y){super(),this.label=y,this.names={}}render({_n:y}){return`break${this.label?` ${this.label}`:""};`+y}}class v extends o{constructor(y){super(),this.error=y}render({_n:y}){return`throw ${this.error};`+y}get names(){return this.error.names}}class m extends o{constructor(y){super(),this.code=y}render({_n:y}){return`${this.code};`+y}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(y,E){return this.code=x(this.code,y,E),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class _ extends o{constructor(y=[]){super(),this.nodes=y}render(y){return this.nodes.reduce((E,j)=>E+j.render(y),"")}optimizeNodes(){const{nodes:y}=this;let E=y.length;for(;E--;){const j=y[E].optimizeNodes();Array.isArray(j)?y.splice(E,1,...j):j?y[E]=j:y.splice(E,1)}return y.length>0?this:void 0}optimizeNames(y,E){const{nodes:j}=this;let H=j.length;for(;H--;){const B=j[H];B.optimizeNames(y,E)||(oe(y,B.names),j.splice(H,1))}return j.length>0?this:void 0}get names(){return this.nodes.reduce((y,E)=>V(y,E.names),{})}}class $ extends _{render(y){return"{"+y._n+super.render(y)+"}"+y._n}}class S extends _{}class p extends ${}p.kind="else";class g extends ${constructor(y,E){super(E),this.condition=y}render(y){let E=`if(${this.condition})`+super.render(y);return this.else&&(E+="else "+this.else.render(y)),E}optimizeNodes(){super.optimizeNodes();const y=this.condition;if(y===!0)return this.nodes;let E=this.else;if(E){const j=E.optimizeNodes();E=this.else=Array.isArray(j)?new p(j):j}if(E)return y===!1?E instanceof g?E:E.nodes:this.nodes.length?this:new g(Pe(y),E instanceof g?[E]:E.nodes);if(!(y===!1||!this.nodes.length))return this}optimizeNames(y,E){var j;if(this.else=(j=this.else)===null||j===void 0?void 0:j.optimizeNames(y,E),!!(super.optimizeNames(y,E)||this.else))return this.condition=x(this.condition,y,E),this}get names(){const y=super.names;return L(y,this.condition),this.else&&V(y,this.else.names),y}}g.kind="if";class u extends ${}u.kind="for";class h extends u{constructor(y){super(),this.iteration=y}render(y){return`for(${this.iteration})`+super.render(y)}optimizeNames(y,E){if(super.optimizeNames(y,E))return this.iteration=x(this.iteration,y,E),this}get names(){return V(super.names,this.iteration.names)}}class w extends u{constructor(y,E,j,H){super(),this.varKind=y,this.name=E,this.from=j,this.to=H}render(y){const E=y.es5?r.varKinds.var:this.varKind,{name:j,from:H,to:B}=this;return`for(${E} ${j}=${H}; ${j}<${B}; ${j}++)`+super.render(y)}get names(){const y=L(super.names,this.from);return L(y,this.to)}}class f extends u{constructor(y,E,j,H){super(),this.loop=y,this.varKind=E,this.name=j,this.iterable=H}render(y){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(y)}optimizeNames(y,E){if(super.optimizeNames(y,E))return this.iterable=x(this.iterable,y,E),this}get names(){return V(super.names,this.iterable.names)}}class b extends ${constructor(y,E,j){super(),this.name=y,this.args=E,this.async=j}render(y){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(y)}}b.kind="func";class k extends _{render(y){return"return "+super.render(y)}}k.kind="return";class N extends ${render(y){let E="try"+super.render(y);return this.catch&&(E+=this.catch.render(y)),this.finally&&(E+=this.finally.render(y)),E}optimizeNodes(){var y,E;return super.optimizeNodes(),(y=this.catch)===null||y===void 0||y.optimizeNodes(),(E=this.finally)===null||E===void 0||E.optimizeNodes(),this}optimizeNames(y,E){var j,H;return super.optimizeNames(y,E),(j=this.catch)===null||j===void 0||j.optimizeNames(y,E),(H=this.finally)===null||H===void 0||H.optimizeNames(y,E),this}get names(){const y=super.names;return this.catch&&V(y,this.catch.names),this.finally&&V(y,this.finally.names),y}}class M extends ${constructor(y){super(),this.error=y}render(y){return`catch(${this.error})`+super.render(y)}}M.kind="catch";class U extends ${render(y){return"finally"+super.render(y)}}U.kind="finally";class q{constructor(y,E={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...E,_n:E.lines?`
`:""},this._extScope=y,this._scope=new r.Scope({parent:y}),this._nodes=[new S]}toString(){return this._root.render(this.opts)}name(y){return this._scope.name(y)}scopeName(y){return this._extScope.name(y)}scopeValue(y,E){const j=this._extScope.value(y,E);return(this._values[j.prefix]||(this._values[j.prefix]=new Set)).add(j),j}getScopeValue(y,E){return this._extScope.getValue(y,E)}scopeRefs(y){return this._extScope.scopeRefs(y,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(y,E,j,H){const B=this._scope.toName(E);return j!==void 0&&H&&(this._constants[B.str]=j),this._leafNode(new a(y,B,j)),B}const(y,E,j){return this._def(r.varKinds.const,y,E,j)}let(y,E,j){return this._def(r.varKinds.let,y,E,j)}var(y,E,j){return this._def(r.varKinds.var,y,E,j)}assign(y,E,j){return this._leafNode(new i(y,E,j))}add(y,E){return this._leafNode(new c(y,e.operators.ADD,E))}code(y){return typeof y=="function"?y():y!==t.nil&&this._leafNode(new m(y)),this}object(...y){const E=["{"];for(const[j,H]of y)E.length>1&&E.push(","),E.push(j),(j!==H||this.opts.es5)&&(E.push(":"),(0,t.addCodeArg)(E,H));return E.push("}"),new t._Code(E)}if(y,E,j){if(this._blockNode(new g(y)),E&&j)this.code(E).else().code(j).endIf();else if(E)this.code(E).endIf();else if(j)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(y){return this._elseNode(new g(y))}else(){return this._elseNode(new p)}endIf(){return this._endBlockNode(g,p)}_for(y,E){return this._blockNode(y),E&&this.code(E).endFor(),this}for(y,E){return this._for(new h(y),E)}forRange(y,E,j,H,B=this.opts.es5?r.varKinds.var:r.varKinds.let){const se=this._scope.toName(y);return this._for(new w(B,se,E,j),()=>H(se))}forOf(y,E,j,H=r.varKinds.const){const B=this._scope.toName(y);if(this.opts.es5){const se=E instanceof t.Name?E:this.var("_arr",E);return this.forRange("_i",0,(0,t._)`${se}.length`,ee=>{this.var(B,(0,t._)`${se}[${ee}]`),j(B)})}return this._for(new f("of",H,B,E),()=>j(B))}forIn(y,E,j,H=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(y,(0,t._)`Object.keys(${E})`,j);const B=this._scope.toName(y);return this._for(new f("in",H,B,E),()=>j(B))}endFor(){return this._endBlockNode(u)}label(y){return this._leafNode(new l(y))}break(y){return this._leafNode(new d(y))}return(y){const E=new k;if(this._blockNode(E),this.code(y),E.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(k)}try(y,E,j){if(!E&&!j)throw new Error('CodeGen: "try" without "catch" and "finally"');const H=new N;if(this._blockNode(H),this.code(y),E){const B=this.name("e");this._currNode=H.catch=new M(B),E(B)}return j&&(this._currNode=H.finally=new U,this.code(j)),this._endBlockNode(M,U)}throw(y){return this._leafNode(new v(y))}block(y,E){return this._blockStarts.push(this._nodes.length),y&&this.code(y).endBlock(E),this}endBlock(y){const E=this._blockStarts.pop();if(E===void 0)throw new Error("CodeGen: not in self-balancing block");const j=this._nodes.length-E;if(j<0||y!==void 0&&j!==y)throw new Error(`CodeGen: wrong number of nodes: ${j} vs ${y} expected`);return this._nodes.length=E,this}func(y,E=t.nil,j,H){return this._blockNode(new b(y,E,j)),H&&this.code(H).endFunc(),this}endFunc(){return this._endBlockNode(b)}optimize(y=1){for(;y-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(y){return this._currNode.nodes.push(y),this}_blockNode(y){this._currNode.nodes.push(y),this._nodes.push(y)}_endBlockNode(y,E){const j=this._currNode;if(j instanceof y||E&&j instanceof E)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${E?`${y.kind}/${E.kind}`:y.kind}"`)}_elseNode(y){const E=this._currNode;if(!(E instanceof g))throw new Error('CodeGen: "else" without "if"');return this._currNode=E.else=y,this}get _root(){return this._nodes[0]}get _currNode(){const y=this._nodes;return y[y.length-1]}set _currNode(y){const E=this._nodes;E[E.length-1]=y}}e.CodeGen=q;function V(I,y){for(const E in y)I[E]=(I[E]||0)+(y[E]||0);return I}function L(I,y){return y instanceof t._CodeOrName?V(I,y.names):I}function x(I,y,E){if(I instanceof t.Name)return j(I);if(!H(I))return I;return new t._Code(I._items.reduce((B,se)=>(se instanceof t.Name&&(se=j(se)),se instanceof t._Code?B.push(...se._items):B.push(se),B),[]));function j(B){const se=E[B.str];return se===void 0||y[B.str]!==1?B:(delete y[B.str],se)}function H(B){return B instanceof t._Code&&B._items.some(se=>se instanceof t.Name&&y[se.str]===1&&E[se.str]!==void 0)}}function oe(I,y){for(const E in y)I[E]=(I[E]||0)-(y[E]||0)}function Pe(I){return typeof I=="boolean"||typeof I=="number"||I===null?!I:(0,t._)`!${A(I)}`}e.not=Pe;const Te=T(e.operators.AND);function ce(...I){return I.reduce(Te)}e.and=ce;const Ue=T(e.operators.OR);function D(...I){return I.reduce(Ue)}e.or=D;function T(I){return(y,E)=>y===t.nil?E:E===t.nil?y:(0,t._)`${A(y)} ${I} ${A(E)}`}function A(I){return I instanceof t.Name?I:(0,t._)`(${I})`}})(Gr)),Gr}var W={},gs;function ne(){if(gs)return W;gs=1,Object.defineProperty(W,"__esModule",{value:!0}),W.checkStrictMode=W.getErrorPath=W.Type=W.useFunc=W.setEvaluated=W.evaluatedPropsToName=W.mergeEvaluated=W.eachItem=W.unescapeJsonPointer=W.escapeJsonPointer=W.escapeFragment=W.unescapeFragment=W.schemaRefOrVal=W.schemaHasRulesButRef=W.schemaHasRules=W.checkUnknownRules=W.alwaysValidSchema=W.toHash=void 0;const e=Q(),t=Pr();function r(f){const b={};for(const k of f)b[k]=!0;return b}W.toHash=r;function n(f,b){return typeof b=="boolean"?b:Object.keys(b).length===0?!0:(s(f,b),!o(b,f.self.RULES.all))}W.alwaysValidSchema=n;function s(f,b=f.schema){const{opts:k,self:N}=f;if(!k.strictSchema||typeof b=="boolean")return;const M=N.RULES.keywords;for(const U in b)M[U]||w(f,`unknown keyword: "${U}"`)}W.checkUnknownRules=s;function o(f,b){if(typeof f=="boolean")return!f;for(const k in f)if(b[k])return!0;return!1}W.schemaHasRules=o;function a(f,b){if(typeof f=="boolean")return!f;for(const k in f)if(k!=="$ref"&&b.all[k])return!0;return!1}W.schemaHasRulesButRef=a;function i({topSchemaRef:f,schemaPath:b},k,N,M){if(!M){if(typeof k=="number"||typeof k=="boolean")return k;if(typeof k=="string")return(0,e._)`${k}`}return(0,e._)`${f}${b}${(0,e.getProperty)(N)}`}W.schemaRefOrVal=i;function c(f){return v(decodeURIComponent(f))}W.unescapeFragment=c;function l(f){return encodeURIComponent(d(f))}W.escapeFragment=l;function d(f){return typeof f=="number"?`${f}`:f.replace(/~/g,"~0").replace(/\//g,"~1")}W.escapeJsonPointer=d;function v(f){return f.replace(/~1/g,"/").replace(/~0/g,"~")}W.unescapeJsonPointer=v;function m(f,b){if(Array.isArray(f))for(const k of f)b(k);else b(f)}W.eachItem=m;function _({mergeNames:f,mergeToName:b,mergeValues:k,resultToName:N}){return(M,U,q,V)=>{const L=q===void 0?U:q instanceof e.Name?(U instanceof e.Name?f(M,U,q):b(M,U,q),q):U instanceof e.Name?(b(M,q,U),U):k(U,q);return V===e.Name&&!(L instanceof e.Name)?N(M,L):L}}W.mergeEvaluated={props:_({mergeNames:(f,b,k)=>f.if((0,e._)`${k} !== true && ${b} !== undefined`,()=>{f.if((0,e._)`${b} === true`,()=>f.assign(k,!0),()=>f.assign(k,(0,e._)`${k} || {}`).code((0,e._)`Object.assign(${k}, ${b})`))}),mergeToName:(f,b,k)=>f.if((0,e._)`${k} !== true`,()=>{b===!0?f.assign(k,!0):(f.assign(k,(0,e._)`${k} || {}`),S(f,k,b))}),mergeValues:(f,b)=>f===!0?!0:{...f,...b},resultToName:$}),items:_({mergeNames:(f,b,k)=>f.if((0,e._)`${k} !== true && ${b} !== undefined`,()=>f.assign(k,(0,e._)`${b} === true ? true : ${k} > ${b} ? ${k} : ${b}`)),mergeToName:(f,b,k)=>f.if((0,e._)`${k} !== true`,()=>f.assign(k,b===!0?!0:(0,e._)`${k} > ${b} ? ${k} : ${b}`)),mergeValues:(f,b)=>f===!0?!0:Math.max(f,b),resultToName:(f,b)=>f.var("items",b)})};function $(f,b){if(b===!0)return f.var("props",!0);const k=f.var("props",(0,e._)`{}`);return b!==void 0&&S(f,k,b),k}W.evaluatedPropsToName=$;function S(f,b,k){Object.keys(k).forEach(N=>f.assign((0,e._)`${b}${(0,e.getProperty)(N)}`,!0))}W.setEvaluated=S;const p={};function g(f,b){return f.scopeValue("func",{ref:b,code:p[b.code]||(p[b.code]=new t._Code(b.code))})}W.useFunc=g;var u;(function(f){f[f.Num=0]="Num",f[f.Str=1]="Str"})(u||(W.Type=u={}));function h(f,b,k){if(f instanceof e.Name){const N=b===u.Num;return k?N?(0,e._)`"[" + ${f} + "]"`:(0,e._)`"['" + ${f} + "']"`:N?(0,e._)`"/" + ${f}`:(0,e._)`"/" + ${f}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return k?(0,e.getProperty)(f).toString():"/"+d(f)}W.getErrorPath=h;function w(f,b,k=f.opts.strictSchema){if(k){if(b=`strict mode: ${b}`,k===!0)throw new Error(b);f.self.logger.warn(b)}}return W.checkStrictMode=w,W}var At={},ys;function Xe(){if(ys)return At;ys=1,Object.defineProperty(At,"__esModule",{value:!0});const e=Q(),t={data:new e.Name("data"),valCxt:new e.Name("valCxt"),instancePath:new e.Name("instancePath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")};return At.default=t,At}var vs;function Ar(){return vs||(vs=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Q(),r=ne(),n=Xe();e.keywordError={message:({keyword:p})=>(0,t.str)`must pass "${p}" keyword validation`},e.keyword$DataError={message:({keyword:p,schemaType:g})=>g?(0,t.str)`"${p}" keyword must be ${g} ($data)`:(0,t.str)`"${p}" keyword is invalid ($data)`};function s(p,g=e.keywordError,u,h){const{it:w}=p,{gen:f,compositeRule:b,allErrors:k}=w,N=v(p,g,u);h??(b||k)?c(f,N):l(w,(0,t._)`[${N}]`)}e.reportError=s;function o(p,g=e.keywordError,u){const{it:h}=p,{gen:w,compositeRule:f,allErrors:b}=h,k=v(p,g,u);c(w,k),f||b||l(h,n.default.vErrors)}e.reportExtraError=o;function a(p,g){p.assign(n.default.errors,g),p.if((0,t._)`${n.default.vErrors} !== null`,()=>p.if(g,()=>p.assign((0,t._)`${n.default.vErrors}.length`,g),()=>p.assign(n.default.vErrors,null)))}e.resetErrorsCount=a;function i({gen:p,keyword:g,schemaValue:u,data:h,errsCount:w,it:f}){if(w===void 0)throw new Error("ajv implementation error");const b=p.name("err");p.forRange("i",w,n.default.errors,k=>{p.const(b,(0,t._)`${n.default.vErrors}[${k}]`),p.if((0,t._)`${b}.instancePath === undefined`,()=>p.assign((0,t._)`${b}.instancePath`,(0,t.strConcat)(n.default.instancePath,f.errorPath))),p.assign((0,t._)`${b}.schemaPath`,(0,t.str)`${f.errSchemaPath}/${g}`),f.opts.verbose&&(p.assign((0,t._)`${b}.schema`,u),p.assign((0,t._)`${b}.data`,h))})}e.extendErrors=i;function c(p,g){const u=p.const("err",g);p.if((0,t._)`${n.default.vErrors} === null`,()=>p.assign(n.default.vErrors,(0,t._)`[${u}]`),(0,t._)`${n.default.vErrors}.push(${u})`),p.code((0,t._)`${n.default.errors}++`)}function l(p,g){const{gen:u,validateName:h,schemaEnv:w}=p;w.$async?u.throw((0,t._)`new ${p.ValidationError}(${g})`):(u.assign((0,t._)`${h}.errors`,g),u.return(!1))}const d={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function v(p,g,u){const{createErrors:h}=p.it;return h===!1?(0,t._)`{}`:m(p,g,u)}function m(p,g,u={}){const{gen:h,it:w}=p,f=[_(w,u),$(p,u)];return S(p,g,f),h.object(...f)}function _({errorPath:p},{instancePath:g}){const u=g?(0,t.str)`${p}${(0,r.getErrorPath)(g,r.Type.Str)}`:p;return[n.default.instancePath,(0,t.strConcat)(n.default.instancePath,u)]}function $({keyword:p,it:{errSchemaPath:g}},{schemaPath:u,parentSchema:h}){let w=h?g:(0,t.str)`${g}/${p}`;return u&&(w=(0,t.str)`${w}${(0,r.getErrorPath)(u,r.Type.Str)}`),[d.schemaPath,w]}function S(p,{params:g,message:u},h){const{keyword:w,data:f,schemaValue:b,it:k}=p,{opts:N,propertyName:M,topSchemaRef:U,schemaPath:q}=k;h.push([d.keyword,w],[d.params,typeof g=="function"?g(p):g||(0,t._)`{}`]),N.messages&&h.push([d.message,typeof u=="function"?u(p):u]),N.verbose&&h.push([d.schema,b],[d.parentSchema,(0,t._)`${U}${q}`],[n.default.data,f]),M&&h.push([d.propertyName,M])}})(Jr)),Jr}var ws;function wh(){if(ws)return tt;ws=1,Object.defineProperty(tt,"__esModule",{value:!0}),tt.boolOrEmptySchema=tt.topBoolOrEmptySchema=void 0;const e=Ar(),t=Q(),r=Xe(),n={message:"boolean schema is false"};function s(i){const{gen:c,schema:l,validateName:d}=i;l===!1?a(i,!1):typeof l=="object"&&l.$async===!0?c.return(r.default.data):(c.assign((0,t._)`${d}.errors`,null),c.return(!0))}tt.topBoolOrEmptySchema=s;function o(i,c){const{gen:l,schema:d}=i;d===!1?(l.var(c,!1),a(i)):l.var(c,!0)}tt.boolOrEmptySchema=o;function a(i,c){const{gen:l,data:d}=i,v={gen:l,keyword:"false schema",data:d,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:i};(0,e.reportError)(v,n,void 0,c)}return tt}var $e={},rt={},$s;function Da(){if($s)return rt;$s=1,Object.defineProperty(rt,"__esModule",{value:!0}),rt.getRules=rt.isJSONType=void 0;const e=["string","number","integer","boolean","null","object","array"],t=new Set(e);function r(s){return typeof s=="string"&&t.has(s)}rt.isJSONType=r;function n(){const s={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...s,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},s.number,s.string,s.array,s.object],post:{rules:[]},all:{},keywords:{}}}return rt.getRules=n,rt}var Ke={},bs;function Za(){if(bs)return Ke;bs=1,Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.shouldUseRule=Ke.shouldUseGroup=Ke.schemaHasRulesForType=void 0;function e({schema:n,self:s},o){const a=s.RULES.types[o];return a&&a!==!0&&t(n,a)}Ke.schemaHasRulesForType=e;function t(n,s){return s.rules.some(o=>r(n,o))}Ke.shouldUseGroup=t;function r(n,s){var o;return n[s.keyword]!==void 0||((o=s.definition.implements)===null||o===void 0?void 0:o.some(a=>n[a]!==void 0))}return Ke.shouldUseRule=r,Ke}var Ss;function Tr(){if(Ss)return $e;Ss=1,Object.defineProperty($e,"__esModule",{value:!0}),$e.reportTypeError=$e.checkDataTypes=$e.checkDataType=$e.coerceAndCheckDataType=$e.getJSONTypes=$e.getSchemaTypes=$e.DataType=void 0;const e=Da(),t=Za(),r=Ar(),n=Q(),s=ne();var o;(function(u){u[u.Correct=0]="Correct",u[u.Wrong=1]="Wrong"})(o||($e.DataType=o={}));function a(u){const h=i(u.type);if(h.includes("null")){if(u.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!h.length&&u.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');u.nullable===!0&&h.push("null")}return h}$e.getSchemaTypes=a;function i(u){const h=Array.isArray(u)?u:u?[u]:[];if(h.every(e.isJSONType))return h;throw new Error("type must be JSONType or JSONType[]: "+h.join(","))}$e.getJSONTypes=i;function c(u,h){const{gen:w,data:f,opts:b}=u,k=d(h,b.coerceTypes),N=h.length>0&&!(k.length===0&&h.length===1&&(0,t.schemaHasRulesForType)(u,h[0]));if(N){const M=$(h,f,b.strictNumbers,o.Wrong);w.if(M,()=>{k.length?v(u,h,k):p(u)})}return N}$e.coerceAndCheckDataType=c;const l=new Set(["string","number","integer","boolean","null"]);function d(u,h){return h?u.filter(w=>l.has(w)||h==="array"&&w==="array"):[]}function v(u,h,w){const{gen:f,data:b,opts:k}=u,N=f.let("dataType",(0,n._)`typeof ${b}`),M=f.let("coerced",(0,n._)`undefined`);k.coerceTypes==="array"&&f.if((0,n._)`${N} == 'object' && Array.isArray(${b}) && ${b}.length == 1`,()=>f.assign(b,(0,n._)`${b}[0]`).assign(N,(0,n._)`typeof ${b}`).if($(h,b,k.strictNumbers),()=>f.assign(M,b))),f.if((0,n._)`${M} !== undefined`);for(const q of w)(l.has(q)||q==="array"&&k.coerceTypes==="array")&&U(q);f.else(),p(u),f.endIf(),f.if((0,n._)`${M} !== undefined`,()=>{f.assign(b,M),m(u,M)});function U(q){switch(q){case"string":f.elseIf((0,n._)`${N} == "number" || ${N} == "boolean"`).assign(M,(0,n._)`"" + ${b}`).elseIf((0,n._)`${b} === null`).assign(M,(0,n._)`""`);return;case"number":f.elseIf((0,n._)`${N} == "boolean" || ${b} === null
              || (${N} == "string" && ${b} && ${b} == +${b})`).assign(M,(0,n._)`+${b}`);return;case"integer":f.elseIf((0,n._)`${N} === "boolean" || ${b} === null
              || (${N} === "string" && ${b} && ${b} == +${b} && !(${b} % 1))`).assign(M,(0,n._)`+${b}`);return;case"boolean":f.elseIf((0,n._)`${b} === "false" || ${b} === 0 || ${b} === null`).assign(M,!1).elseIf((0,n._)`${b} === "true" || ${b} === 1`).assign(M,!0);return;case"null":f.elseIf((0,n._)`${b} === "" || ${b} === 0 || ${b} === false`),f.assign(M,null);return;case"array":f.elseIf((0,n._)`${N} === "string" || ${N} === "number"
              || ${N} === "boolean" || ${b} === null`).assign(M,(0,n._)`[${b}]`)}}}function m({gen:u,parentData:h,parentDataProperty:w},f){u.if((0,n._)`${h} !== undefined`,()=>u.assign((0,n._)`${h}[${w}]`,f))}function _(u,h,w,f=o.Correct){const b=f===o.Correct?n.operators.EQ:n.operators.NEQ;let k;switch(u){case"null":return(0,n._)`${h} ${b} null`;case"array":k=(0,n._)`Array.isArray(${h})`;break;case"object":k=(0,n._)`${h} && typeof ${h} == "object" && !Array.isArray(${h})`;break;case"integer":k=N((0,n._)`!(${h} % 1) && !isNaN(${h})`);break;case"number":k=N();break;default:return(0,n._)`typeof ${h} ${b} ${u}`}return f===o.Correct?k:(0,n.not)(k);function N(M=n.nil){return(0,n.and)((0,n._)`typeof ${h} == "number"`,M,w?(0,n._)`isFinite(${h})`:n.nil)}}$e.checkDataType=_;function $(u,h,w,f){if(u.length===1)return _(u[0],h,w,f);let b;const k=(0,s.toHash)(u);if(k.array&&k.object){const N=(0,n._)`typeof ${h} != "object"`;b=k.null?N:(0,n._)`!${h} || ${N}`,delete k.null,delete k.array,delete k.object}else b=n.nil;k.number&&delete k.integer;for(const N in k)b=(0,n.and)(b,_(N,h,w,f));return b}$e.checkDataTypes=$;const S={message:({schema:u})=>`must be ${u}`,params:({schema:u,schemaValue:h})=>typeof u=="string"?(0,n._)`{type: ${u}}`:(0,n._)`{type: ${h}}`};function p(u){const h=g(u);(0,r.reportError)(h,S)}$e.reportTypeError=p;function g(u){const{gen:h,data:w,schema:f}=u,b=(0,s.schemaRefOrVal)(u,f,"type");return{gen:h,keyword:"type",data:w,schema:f.type,schemaCode:b,schemaValue:b,parentSchema:f,params:{},it:u}}return $e}var yt={},ks;function $h(){if(ks)return yt;ks=1,Object.defineProperty(yt,"__esModule",{value:!0}),yt.assignDefaults=void 0;const e=Q(),t=ne();function r(s,o){const{properties:a,items:i}=s.schema;if(o==="object"&&a)for(const c in a)n(s,c,a[c].default);else o==="array"&&Array.isArray(i)&&i.forEach((c,l)=>n(s,l,c.default))}yt.assignDefaults=r;function n(s,o,a){const{gen:i,compositeRule:c,data:l,opts:d}=s;if(a===void 0)return;const v=(0,e._)`${l}${(0,e.getProperty)(o)}`;if(c){(0,t.checkStrictMode)(s,`default is ignored for: ${v}`);return}let m=(0,e._)`${v} === undefined`;d.useDefaults==="empty"&&(m=(0,e._)`${m} || ${v} === null || ${v} === ""`),i.if(m,(0,e._)`${v} = ${(0,e.stringify)(a)}`)}return yt}var Le={},ie={},Es;function xe(){if(Es)return ie;Es=1,Object.defineProperty(ie,"__esModule",{value:!0}),ie.validateUnion=ie.validateArray=ie.usePattern=ie.callValidateCode=ie.schemaProperties=ie.allSchemaProperties=ie.noPropertyInData=ie.propertyInData=ie.isOwnProperty=ie.hasPropFunc=ie.reportMissingProp=ie.checkMissingProp=ie.checkReportMissingProp=void 0;const e=Q(),t=ne(),r=Xe(),n=ne();function s(u,h){const{gen:w,data:f,it:b}=u;w.if(d(w,f,h,b.opts.ownProperties),()=>{u.setParams({missingProperty:(0,e._)`${h}`},!0),u.error()})}ie.checkReportMissingProp=s;function o({gen:u,data:h,it:{opts:w}},f,b){return(0,e.or)(...f.map(k=>(0,e.and)(d(u,h,k,w.ownProperties),(0,e._)`${b} = ${k}`)))}ie.checkMissingProp=o;function a(u,h){u.setParams({missingProperty:h},!0),u.error()}ie.reportMissingProp=a;function i(u){return u.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,e._)`Object.prototype.hasOwnProperty`})}ie.hasPropFunc=i;function c(u,h,w){return(0,e._)`${i(u)}.call(${h}, ${w})`}ie.isOwnProperty=c;function l(u,h,w,f){const b=(0,e._)`${h}${(0,e.getProperty)(w)} !== undefined`;return f?(0,e._)`${b} && ${c(u,h,w)}`:b}ie.propertyInData=l;function d(u,h,w,f){const b=(0,e._)`${h}${(0,e.getProperty)(w)} === undefined`;return f?(0,e.or)(b,(0,e.not)(c(u,h,w))):b}ie.noPropertyInData=d;function v(u){return u?Object.keys(u).filter(h=>h!=="__proto__"):[]}ie.allSchemaProperties=v;function m(u,h){return v(h).filter(w=>!(0,t.alwaysValidSchema)(u,h[w]))}ie.schemaProperties=m;function _({schemaCode:u,data:h,it:{gen:w,topSchemaRef:f,schemaPath:b,errorPath:k},it:N},M,U,q){const V=q?(0,e._)`${u}, ${h}, ${f}${b}`:h,L=[[r.default.instancePath,(0,e.strConcat)(r.default.instancePath,k)],[r.default.parentData,N.parentData],[r.default.parentDataProperty,N.parentDataProperty],[r.default.rootData,r.default.rootData]];N.opts.dynamicRef&&L.push([r.default.dynamicAnchors,r.default.dynamicAnchors]);const x=(0,e._)`${V}, ${w.object(...L)}`;return U!==e.nil?(0,e._)`${M}.call(${U}, ${x})`:(0,e._)`${M}(${x})`}ie.callValidateCode=_;const $=(0,e._)`new RegExp`;function S({gen:u,it:{opts:h}},w){const f=h.unicodeRegExp?"u":"",{regExp:b}=h.code,k=b(w,f);return u.scopeValue("pattern",{key:k.toString(),ref:k,code:(0,e._)`${b.code==="new RegExp"?$:(0,n.useFunc)(u,b)}(${w}, ${f})`})}ie.usePattern=S;function p(u){const{gen:h,data:w,keyword:f,it:b}=u,k=h.name("valid");if(b.allErrors){const M=h.let("valid",!0);return N(()=>h.assign(M,!1)),M}return h.var(k,!0),N(()=>h.break()),k;function N(M){const U=h.const("len",(0,e._)`${w}.length`);h.forRange("i",0,U,q=>{u.subschema({keyword:f,dataProp:q,dataPropType:t.Type.Num},k),h.if((0,e.not)(k),M)})}}ie.validateArray=p;function g(u){const{gen:h,schema:w,keyword:f,it:b}=u;if(!Array.isArray(w))throw new Error("ajv implementation error");if(w.some(U=>(0,t.alwaysValidSchema)(b,U))&&!b.opts.unevaluated)return;const N=h.let("valid",!1),M=h.name("_valid");h.block(()=>w.forEach((U,q)=>{const V=u.subschema({keyword:f,schemaProp:q,compositeRule:!0},M);h.assign(N,(0,e._)`${N} || ${M}`),u.mergeValidEvaluated(V,M)||h.if((0,e.not)(N))})),u.result(N,()=>u.reset(),()=>u.error(!0))}return ie.validateUnion=g,ie}var Ps;function bh(){if(Ps)return Le;Ps=1,Object.defineProperty(Le,"__esModule",{value:!0}),Le.validateKeywordUsage=Le.validSchemaType=Le.funcKeywordCode=Le.macroKeywordCode=void 0;const e=Q(),t=Xe(),r=xe(),n=Ar();function s(m,_){const{gen:$,keyword:S,schema:p,parentSchema:g,it:u}=m,h=_.macro.call(u.self,p,g,u),w=l($,S,h);u.opts.validateSchema!==!1&&u.self.validateSchema(h,!0);const f=$.name("valid");m.subschema({schema:h,schemaPath:e.nil,errSchemaPath:`${u.errSchemaPath}/${S}`,topSchemaRef:w,compositeRule:!0},f),m.pass(f,()=>m.error(!0))}Le.macroKeywordCode=s;function o(m,_){var $;const{gen:S,keyword:p,schema:g,parentSchema:u,$data:h,it:w}=m;c(w,_);const f=!h&&_.compile?_.compile.call(w.self,g,u,w):_.validate,b=l(S,p,f),k=S.let("valid");m.block$data(k,N),m.ok(($=_.valid)!==null&&$!==void 0?$:k);function N(){if(_.errors===!1)q(),_.modifying&&a(m),V(()=>m.error());else{const L=_.async?M():U();_.modifying&&a(m),V(()=>i(m,L))}}function M(){const L=S.let("ruleErrs",null);return S.try(()=>q((0,e._)`await `),x=>S.assign(k,!1).if((0,e._)`${x} instanceof ${w.ValidationError}`,()=>S.assign(L,(0,e._)`${x}.errors`),()=>S.throw(x))),L}function U(){const L=(0,e._)`${b}.errors`;return S.assign(L,null),q(e.nil),L}function q(L=_.async?(0,e._)`await `:e.nil){const x=w.opts.passContext?t.default.this:t.default.self,oe=!("compile"in _&&!h||_.schema===!1);S.assign(k,(0,e._)`${L}${(0,r.callValidateCode)(m,b,x,oe)}`,_.modifying)}function V(L){var x;S.if((0,e.not)((x=_.valid)!==null&&x!==void 0?x:k),L)}}Le.funcKeywordCode=o;function a(m){const{gen:_,data:$,it:S}=m;_.if(S.parentData,()=>_.assign($,(0,e._)`${S.parentData}[${S.parentDataProperty}]`))}function i(m,_){const{gen:$}=m;$.if((0,e._)`Array.isArray(${_})`,()=>{$.assign(t.default.vErrors,(0,e._)`${t.default.vErrors} === null ? ${_} : ${t.default.vErrors}.concat(${_})`).assign(t.default.errors,(0,e._)`${t.default.vErrors}.length`),(0,n.extendErrors)(m)},()=>m.error())}function c({schemaEnv:m},_){if(_.async&&!m.$async)throw new Error("async keyword in sync schema")}function l(m,_,$){if($===void 0)throw new Error(`keyword "${_}" failed to compile`);return m.scopeValue("keyword",typeof $=="function"?{ref:$}:{ref:$,code:(0,e.stringify)($)})}function d(m,_,$=!1){return!_.length||_.some(S=>S==="array"?Array.isArray(m):S==="object"?m&&typeof m=="object"&&!Array.isArray(m):typeof m==S||$&&typeof m>"u")}Le.validSchemaType=d;function v({schema:m,opts:_,self:$,errSchemaPath:S},p,g){if(Array.isArray(p.keyword)?!p.keyword.includes(g):p.keyword!==g)throw new Error("ajv implementation error");const u=p.dependencies;if(u?.some(h=>!Object.prototype.hasOwnProperty.call(m,h)))throw new Error(`parent schema must have dependencies of ${g}: ${u.join(",")}`);if(p.validateSchema&&!p.validateSchema(m[g])){const w=`keyword "${g}" value is invalid at path "${S}": `+$.errorsText(p.validateSchema.errors);if(_.validateSchema==="log")$.logger.error(w);else throw new Error(w)}}return Le.validateKeywordUsage=v,Le}var Je={},Ts;function Sh(){if(Ts)return Je;Ts=1,Object.defineProperty(Je,"__esModule",{value:!0}),Je.extendSubschemaMode=Je.extendSubschemaData=Je.getSubschema=void 0;const e=Q(),t=ne();function r(o,{keyword:a,schemaProp:i,schema:c,schemaPath:l,errSchemaPath:d,topSchemaRef:v}){if(a!==void 0&&c!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(a!==void 0){const m=o.schema[a];return i===void 0?{schema:m,schemaPath:(0,e._)`${o.schemaPath}${(0,e.getProperty)(a)}`,errSchemaPath:`${o.errSchemaPath}/${a}`}:{schema:m[i],schemaPath:(0,e._)`${o.schemaPath}${(0,e.getProperty)(a)}${(0,e.getProperty)(i)}`,errSchemaPath:`${o.errSchemaPath}/${a}/${(0,t.escapeFragment)(i)}`}}if(c!==void 0){if(l===void 0||d===void 0||v===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:c,schemaPath:l,topSchemaRef:v,errSchemaPath:d}}throw new Error('either "keyword" or "schema" must be passed')}Je.getSubschema=r;function n(o,a,{dataProp:i,dataPropType:c,data:l,dataTypes:d,propertyName:v}){if(l!==void 0&&i!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:m}=a;if(i!==void 0){const{errorPath:$,dataPathArr:S,opts:p}=a,g=m.let("data",(0,e._)`${a.data}${(0,e.getProperty)(i)}`,!0);_(g),o.errorPath=(0,e.str)`${$}${(0,t.getErrorPath)(i,c,p.jsPropertySyntax)}`,o.parentDataProperty=(0,e._)`${i}`,o.dataPathArr=[...S,o.parentDataProperty]}if(l!==void 0){const $=l instanceof e.Name?l:m.let("data",l,!0);_($),v!==void 0&&(o.propertyName=v)}d&&(o.dataTypes=d);function _($){o.data=$,o.dataLevel=a.dataLevel+1,o.dataTypes=[],a.definedProperties=new Set,o.parentData=a.data,o.dataNames=[...a.dataNames,$]}}Je.extendSubschemaData=n;function s(o,{jtdDiscriminator:a,jtdMetadata:i,compositeRule:c,createErrors:l,allErrors:d}){c!==void 0&&(o.compositeRule=c),l!==void 0&&(o.createErrors=l),d!==void 0&&(o.allErrors=d),o.jtdDiscriminator=a,o.jtdMetadata=i}return Je.extendSubschemaMode=s,Je}var Re={},Qr,Rs;function Va(){return Rs||(Rs=1,Qr=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,s,o;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!e(t[s],r[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(o=Object.keys(t),n=o.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[s]))return!1;for(s=n;s--!==0;){var a=o[s];if(!e(t[a],r[a]))return!1}return!0}return t!==t&&r!==r}),Qr}var Yr={exports:{}},Is;function kh(){if(Is)return Yr.exports;Is=1;var e=Yr.exports=function(n,s,o){typeof s=="function"&&(o=s,s={}),o=s.cb||o;var a=typeof o=="function"?o:o.pre||function(){},i=o.post||function(){};t(s,a,i,n,"",n)};e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function t(n,s,o,a,i,c,l,d,v,m){if(a&&typeof a=="object"&&!Array.isArray(a)){s(a,i,c,l,d,v,m);for(var _ in a){var $=a[_];if(Array.isArray($)){if(_ in e.arrayKeywords)for(var S=0;S<$.length;S++)t(n,s,o,$[S],i+"/"+_+"/"+S,c,i,_,a,S)}else if(_ in e.propsKeywords){if($&&typeof $=="object")for(var p in $)t(n,s,o,$[p],i+"/"+_+"/"+r(p),c,i,_,a,p)}else(_ in e.keywords||n.allKeys&&!(_ in e.skipKeywords))&&t(n,s,o,$,i+"/"+_,c,i,_,a)}o(a,i,c,l,d,v,m)}}function r(n){return n.replace(/~/g,"~0").replace(/\//g,"~1")}return Yr.exports}var zs;function Mr(){if(zs)return Re;zs=1,Object.defineProperty(Re,"__esModule",{value:!0}),Re.getSchemaRefs=Re.resolveUrl=Re.normalizeId=Re._getFullPath=Re.getFullPath=Re.inlineRef=void 0;const e=ne(),t=Va(),r=kh(),n=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function s(S,p=!0){return typeof S=="boolean"?!0:p===!0?!a(S):p?i(S)<=p:!1}Re.inlineRef=s;const o=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function a(S){for(const p in S){if(o.has(p))return!0;const g=S[p];if(Array.isArray(g)&&g.some(a)||typeof g=="object"&&a(g))return!0}return!1}function i(S){let p=0;for(const g in S){if(g==="$ref")return 1/0;if(p++,!n.has(g)&&(typeof S[g]=="object"&&(0,e.eachItem)(S[g],u=>p+=i(u)),p===1/0))return 1/0}return p}function c(S,p="",g){g!==!1&&(p=v(p));const u=S.parse(p);return l(S,u)}Re.getFullPath=c;function l(S,p){return S.serialize(p).split("#")[0]+"#"}Re._getFullPath=l;const d=/#\/?$/;function v(S){return S?S.replace(d,""):""}Re.normalizeId=v;function m(S,p,g){return g=v(g),S.resolve(p,g)}Re.resolveUrl=m;const _=/^[a-z_][-a-z0-9._]*$/i;function $(S,p){if(typeof S=="boolean")return{};const{schemaId:g,uriResolver:u}=this.opts,h=v(S[g]||p),w={"":h},f=c(u,h,!1),b={},k=new Set;return r(S,{allKeys:!0},(U,q,V,L)=>{if(L===void 0)return;const x=f+q;let oe=w[L];typeof U[g]=="string"&&(oe=Pe.call(this,U[g])),Te.call(this,U.$anchor),Te.call(this,U.$dynamicAnchor),w[q]=oe;function Pe(ce){const Ue=this.opts.uriResolver.resolve;if(ce=v(oe?Ue(oe,ce):ce),k.has(ce))throw M(ce);k.add(ce);let D=this.refs[ce];return typeof D=="string"&&(D=this.refs[D]),typeof D=="object"?N(U,D.schema,ce):ce!==v(x)&&(ce[0]==="#"?(N(U,b[ce],ce),b[ce]=U):this.refs[ce]=x),ce}function Te(ce){if(typeof ce=="string"){if(!_.test(ce))throw new Error(`invalid anchor "${ce}"`);Pe.call(this,`#${ce}`)}}}),b;function N(U,q,V){if(q!==void 0&&!t(U,q))throw M(V)}function M(U){return new Error(`reference "${U}" resolves to more than one schema`)}}return Re.getSchemaRefs=$,Re}var Ns;function Dr(){if(Ns)return He;Ns=1,Object.defineProperty(He,"__esModule",{value:!0}),He.getData=He.KeywordCxt=He.validateFunctionCode=void 0;const e=wh(),t=Tr(),r=Za(),n=Tr(),s=$h(),o=bh(),a=Sh(),i=Q(),c=Xe(),l=Mr(),d=ne(),v=Ar();function m(P){if(f(P)&&(k(P),w(P))){p(P);return}_(P,()=>(0,e.topBoolOrEmptySchema)(P))}He.validateFunctionCode=m;function _({gen:P,validateName:R,schema:C,schemaEnv:Z,opts:J},Y){J.code.es5?P.func(R,(0,i._)`${c.default.data}, ${c.default.valCxt}`,Z.$async,()=>{P.code((0,i._)`"use strict"; ${u(C,J)}`),S(P,J),P.code(Y)}):P.func(R,(0,i._)`${c.default.data}, ${$(J)}`,Z.$async,()=>P.code(u(C,J)).code(Y))}function $(P){return(0,i._)`{${c.default.instancePath}="", ${c.default.parentData}, ${c.default.parentDataProperty}, ${c.default.rootData}=${c.default.data}${P.dynamicRef?(0,i._)`, ${c.default.dynamicAnchors}={}`:i.nil}}={}`}function S(P,R){P.if(c.default.valCxt,()=>{P.var(c.default.instancePath,(0,i._)`${c.default.valCxt}.${c.default.instancePath}`),P.var(c.default.parentData,(0,i._)`${c.default.valCxt}.${c.default.parentData}`),P.var(c.default.parentDataProperty,(0,i._)`${c.default.valCxt}.${c.default.parentDataProperty}`),P.var(c.default.rootData,(0,i._)`${c.default.valCxt}.${c.default.rootData}`),R.dynamicRef&&P.var(c.default.dynamicAnchors,(0,i._)`${c.default.valCxt}.${c.default.dynamicAnchors}`)},()=>{P.var(c.default.instancePath,(0,i._)`""`),P.var(c.default.parentData,(0,i._)`undefined`),P.var(c.default.parentDataProperty,(0,i._)`undefined`),P.var(c.default.rootData,c.default.data),R.dynamicRef&&P.var(c.default.dynamicAnchors,(0,i._)`{}`)})}function p(P){const{schema:R,opts:C,gen:Z}=P;_(P,()=>{C.$comment&&R.$comment&&L(P),U(P),Z.let(c.default.vErrors,null),Z.let(c.default.errors,0),C.unevaluated&&g(P),N(P),x(P)})}function g(P){const{gen:R,validateName:C}=P;P.evaluated=R.const("evaluated",(0,i._)`${C}.evaluated`),R.if((0,i._)`${P.evaluated}.dynamicProps`,()=>R.assign((0,i._)`${P.evaluated}.props`,(0,i._)`undefined`)),R.if((0,i._)`${P.evaluated}.dynamicItems`,()=>R.assign((0,i._)`${P.evaluated}.items`,(0,i._)`undefined`))}function u(P,R){const C=typeof P=="object"&&P[R.schemaId];return C&&(R.code.source||R.code.process)?(0,i._)`/*# sourceURL=${C} */`:i.nil}function h(P,R){if(f(P)&&(k(P),w(P))){b(P,R);return}(0,e.boolOrEmptySchema)(P,R)}function w({schema:P,self:R}){if(typeof P=="boolean")return!P;for(const C in P)if(R.RULES.all[C])return!0;return!1}function f(P){return typeof P.schema!="boolean"}function b(P,R){const{schema:C,gen:Z,opts:J}=P;J.$comment&&C.$comment&&L(P),q(P),V(P);const Y=Z.const("_errs",c.default.errors);N(P,Y),Z.var(R,(0,i._)`${Y} === ${c.default.errors}`)}function k(P){(0,d.checkUnknownRules)(P),M(P)}function N(P,R){if(P.opts.jtd)return Pe(P,[],!1,R);const C=(0,t.getSchemaTypes)(P.schema),Z=(0,t.coerceAndCheckDataType)(P,C);Pe(P,C,!Z,R)}function M(P){const{schema:R,errSchemaPath:C,opts:Z,self:J}=P;R.$ref&&Z.ignoreKeywordsWithRef&&(0,d.schemaHasRulesButRef)(R,J.RULES)&&J.logger.warn(`$ref: keywords ignored in schema at path "${C}"`)}function U(P){const{schema:R,opts:C}=P;R.default!==void 0&&C.useDefaults&&C.strictSchema&&(0,d.checkStrictMode)(P,"default is ignored in the schema root")}function q(P){const R=P.schema[P.opts.schemaId];R&&(P.baseId=(0,l.resolveUrl)(P.opts.uriResolver,P.baseId,R))}function V(P){if(P.schema.$async&&!P.schemaEnv.$async)throw new Error("async schema in sync schema")}function L({gen:P,schemaEnv:R,schema:C,errSchemaPath:Z,opts:J}){const Y=C.$comment;if(J.$comment===!0)P.code((0,i._)`${c.default.self}.logger.log(${Y})`);else if(typeof J.$comment=="function"){const ve=(0,i.str)`${Z}/$comment`,Fe=P.scopeValue("root",{ref:R.root});P.code((0,i._)`${c.default.self}.opts.$comment(${Y}, ${ve}, ${Fe}.schema)`)}}function x(P){const{gen:R,schemaEnv:C,validateName:Z,ValidationError:J,opts:Y}=P;C.$async?R.if((0,i._)`${c.default.errors} === 0`,()=>R.return(c.default.data),()=>R.throw((0,i._)`new ${J}(${c.default.vErrors})`)):(R.assign((0,i._)`${Z}.errors`,c.default.vErrors),Y.unevaluated&&oe(P),R.return((0,i._)`${c.default.errors} === 0`))}function oe({gen:P,evaluated:R,props:C,items:Z}){C instanceof i.Name&&P.assign((0,i._)`${R}.props`,C),Z instanceof i.Name&&P.assign((0,i._)`${R}.items`,Z)}function Pe(P,R,C,Z){const{gen:J,schema:Y,data:ve,allErrors:Fe,opts:ze,self:Ne}=P,{RULES:we}=Ne;if(Y.$ref&&(ze.ignoreKeywordsWithRef||!(0,d.schemaHasRulesButRef)(Y,we))){J.block(()=>H(P,"$ref",we.all.$ref.definition));return}ze.jtd||ce(P,R),J.block(()=>{for(const Me of we.rules)at(Me);at(we.post)});function at(Me){(0,r.shouldUseGroup)(Y,Me)&&(Me.type?(J.if((0,n.checkDataType)(Me.type,ve,ze.strictNumbers)),Te(P,Me),R.length===1&&R[0]===Me.type&&C&&(J.else(),(0,n.reportTypeError)(P)),J.endIf()):Te(P,Me),Fe||J.if((0,i._)`${c.default.errors} === ${Z||0}`))}}function Te(P,R){const{gen:C,schema:Z,opts:{useDefaults:J}}=P;J&&(0,s.assignDefaults)(P,R.type),C.block(()=>{for(const Y of R.rules)(0,r.shouldUseRule)(Z,Y)&&H(P,Y.keyword,Y.definition,R.type)})}function ce(P,R){P.schemaEnv.meta||!P.opts.strictTypes||(Ue(P,R),P.opts.allowUnionTypes||D(P,R),T(P,P.dataTypes))}function Ue(P,R){if(R.length){if(!P.dataTypes.length){P.dataTypes=R;return}R.forEach(C=>{I(P.dataTypes,C)||E(P,`type "${C}" not allowed by context "${P.dataTypes.join(",")}"`)}),y(P,R)}}function D(P,R){R.length>1&&!(R.length===2&&R.includes("null"))&&E(P,"use allowUnionTypes to allow union type keyword")}function T(P,R){const C=P.self.RULES.all;for(const Z in C){const J=C[Z];if(typeof J=="object"&&(0,r.shouldUseRule)(P.schema,J)){const{type:Y}=J.definition;Y.length&&!Y.some(ve=>A(R,ve))&&E(P,`missing type "${Y.join(",")}" for keyword "${Z}"`)}}}function A(P,R){return P.includes(R)||R==="number"&&P.includes("integer")}function I(P,R){return P.includes(R)||R==="integer"&&P.includes("number")}function y(P,R){const C=[];for(const Z of P.dataTypes)I(R,Z)?C.push(Z):R.includes("integer")&&Z==="number"&&C.push("integer");P.dataTypes=C}function E(P,R){const C=P.schemaEnv.baseId+P.errSchemaPath;R+=` at "${C}" (strictTypes)`,(0,d.checkStrictMode)(P,R,P.opts.strictTypes)}class j{constructor(R,C,Z){if((0,o.validateKeywordUsage)(R,C,Z),this.gen=R.gen,this.allErrors=R.allErrors,this.keyword=Z,this.data=R.data,this.schema=R.schema[Z],this.$data=C.$data&&R.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,d.schemaRefOrVal)(R,this.schema,Z,this.$data),this.schemaType=C.schemaType,this.parentSchema=R.schema,this.params={},this.it=R,this.def=C,this.$data)this.schemaCode=R.gen.const("vSchema",ee(this.$data,R));else if(this.schemaCode=this.schemaValue,!(0,o.validSchemaType)(this.schema,C.schemaType,C.allowUndefined))throw new Error(`${Z} value must be ${JSON.stringify(C.schemaType)}`);("code"in C?C.trackErrors:C.errors!==!1)&&(this.errsCount=R.gen.const("_errs",c.default.errors))}result(R,C,Z){this.failResult((0,i.not)(R),C,Z)}failResult(R,C,Z){this.gen.if(R),Z?Z():this.error(),C?(this.gen.else(),C(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(R,C){this.failResult((0,i.not)(R),void 0,C)}fail(R){if(R===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(R),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(R){if(!this.$data)return this.fail(R);const{schemaCode:C}=this;this.fail((0,i._)`${C} !== undefined && (${(0,i.or)(this.invalid$data(),R)})`)}error(R,C,Z){if(C){this.setParams(C),this._error(R,Z),this.setParams({});return}this._error(R,Z)}_error(R,C){(R?v.reportExtraError:v.reportError)(this,this.def.error,C)}$dataError(){(0,v.reportError)(this,this.def.$dataError||v.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,v.resetErrorsCount)(this.gen,this.errsCount)}ok(R){this.allErrors||this.gen.if(R)}setParams(R,C){C?Object.assign(this.params,R):this.params=R}block$data(R,C,Z=i.nil){this.gen.block(()=>{this.check$data(R,Z),C()})}check$data(R=i.nil,C=i.nil){if(!this.$data)return;const{gen:Z,schemaCode:J,schemaType:Y,def:ve}=this;Z.if((0,i.or)((0,i._)`${J} === undefined`,C)),R!==i.nil&&Z.assign(R,!0),(Y.length||ve.validateSchema)&&(Z.elseIf(this.invalid$data()),this.$dataError(),R!==i.nil&&Z.assign(R,!1)),Z.else()}invalid$data(){const{gen:R,schemaCode:C,schemaType:Z,def:J,it:Y}=this;return(0,i.or)(ve(),Fe());function ve(){if(Z.length){if(!(C instanceof i.Name))throw new Error("ajv implementation error");const ze=Array.isArray(Z)?Z:[Z];return(0,i._)`${(0,n.checkDataTypes)(ze,C,Y.opts.strictNumbers,n.DataType.Wrong)}`}return i.nil}function Fe(){if(J.validateSchema){const ze=R.scopeValue("validate$data",{ref:J.validateSchema});return(0,i._)`!${ze}(${C})`}return i.nil}}subschema(R,C){const Z=(0,a.getSubschema)(this.it,R);(0,a.extendSubschemaData)(Z,this.it,R),(0,a.extendSubschemaMode)(Z,R);const J={...this.it,...Z,items:void 0,props:void 0};return h(J,C),J}mergeEvaluated(R,C){const{it:Z,gen:J}=this;Z.opts.unevaluated&&(Z.props!==!0&&R.props!==void 0&&(Z.props=d.mergeEvaluated.props(J,R.props,Z.props,C)),Z.items!==!0&&R.items!==void 0&&(Z.items=d.mergeEvaluated.items(J,R.items,Z.items,C)))}mergeValidEvaluated(R,C){const{it:Z,gen:J}=this;if(Z.opts.unevaluated&&(Z.props!==!0||Z.items!==!0))return J.if(C,()=>this.mergeEvaluated(R,i.Name)),!0}}He.KeywordCxt=j;function H(P,R,C,Z){const J=new j(P,C,R);"code"in C?C.code(J,Z):J.$data&&C.validate?(0,o.funcKeywordCode)(J,C):"macro"in C?(0,o.macroKeywordCode)(J,C):(C.compile||C.validate)&&(0,o.funcKeywordCode)(J,C)}const B=/^\/(?:[^~]|~0|~1)*$/,se=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function ee(P,{dataLevel:R,dataNames:C,dataPathArr:Z}){let J,Y;if(P==="")return c.default.rootData;if(P[0]==="/"){if(!B.test(P))throw new Error(`Invalid JSON-pointer: ${P}`);J=P,Y=c.default.rootData}else{const Ne=se.exec(P);if(!Ne)throw new Error(`Invalid JSON-pointer: ${P}`);const we=+Ne[1];if(J=Ne[2],J==="#"){if(we>=R)throw new Error(ze("property/index",we));return Z[R-we]}if(we>R)throw new Error(ze("data",we));if(Y=C[R-we],!J)return Y}let ve=Y;const Fe=J.split("/");for(const Ne of Fe)Ne&&(Y=(0,i._)`${Y}${(0,i.getProperty)((0,d.unescapeJsonPointer)(Ne))}`,ve=(0,i._)`${ve} && ${Y}`);return ve;function ze(Ne,we){return`Cannot access ${Ne} ${we} levels up, current level is ${R}`}}return He.getData=ee,He}var Mt={},Os;function Dn(){if(Os)return Mt;Os=1,Object.defineProperty(Mt,"__esModule",{value:!0});class e extends Error{constructor(r){super("validation failed"),this.errors=r,this.ajv=this.validation=!0}}return Mt.default=e,Mt}var Dt={},js;function Zr(){if(js)return Dt;js=1,Object.defineProperty(Dt,"__esModule",{value:!0});const e=Mr();class t extends Error{constructor(n,s,o,a){super(a||`can't resolve reference ${o} from id ${s}`),this.missingRef=(0,e.resolveUrl)(n,s,o),this.missingSchema=(0,e.normalizeId)((0,e.getFullPath)(n,this.missingRef))}}return Dt.default=t,Dt}var qe={},qs;function Zn(){if(qs)return qe;qs=1,Object.defineProperty(qe,"__esModule",{value:!0}),qe.resolveSchema=qe.getCompilingSchema=qe.resolveRef=qe.compileSchema=qe.SchemaEnv=void 0;const e=Q(),t=Dn(),r=Xe(),n=Mr(),s=ne(),o=Dr();class a{constructor(g){var u;this.refs={},this.dynamicAnchors={};let h;typeof g.schema=="object"&&(h=g.schema),this.schema=g.schema,this.schemaId=g.schemaId,this.root=g.root||this,this.baseId=(u=g.baseId)!==null&&u!==void 0?u:(0,n.normalizeId)(h?.[g.schemaId||"$id"]),this.schemaPath=g.schemaPath,this.localRefs=g.localRefs,this.meta=g.meta,this.$async=h?.$async,this.refs={}}}qe.SchemaEnv=a;function i(p){const g=d.call(this,p);if(g)return g;const u=(0,n.getFullPath)(this.opts.uriResolver,p.root.baseId),{es5:h,lines:w}=this.opts.code,{ownProperties:f}=this.opts,b=new e.CodeGen(this.scope,{es5:h,lines:w,ownProperties:f});let k;p.$async&&(k=b.scopeValue("Error",{ref:t.default,code:(0,e._)`require("ajv/dist/runtime/validation_error").default`}));const N=b.scopeName("validate");p.validateName=N;const M={gen:b,allErrors:this.opts.allErrors,data:r.default.data,parentData:r.default.parentData,parentDataProperty:r.default.parentDataProperty,dataNames:[r.default.data],dataPathArr:[e.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:b.scopeValue("schema",this.opts.code.source===!0?{ref:p.schema,code:(0,e.stringify)(p.schema)}:{ref:p.schema}),validateName:N,ValidationError:k,schema:p.schema,schemaEnv:p,rootId:u,baseId:p.baseId||u,schemaPath:e.nil,errSchemaPath:p.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,e._)`""`,opts:this.opts,self:this};let U;try{this._compilations.add(p),(0,o.validateFunctionCode)(M),b.optimize(this.opts.code.optimize);const q=b.toString();U=`${b.scopeRefs(r.default.scope)}return ${q}`,this.opts.code.process&&(U=this.opts.code.process(U,p));const L=new Function(`${r.default.self}`,`${r.default.scope}`,U)(this,this.scope.get());if(this.scope.value(N,{ref:L}),L.errors=null,L.schema=p.schema,L.schemaEnv=p,p.$async&&(L.$async=!0),this.opts.code.source===!0&&(L.source={validateName:N,validateCode:q,scopeValues:b._values}),this.opts.unevaluated){const{props:x,items:oe}=M;L.evaluated={props:x instanceof e.Name?void 0:x,items:oe instanceof e.Name?void 0:oe,dynamicProps:x instanceof e.Name,dynamicItems:oe instanceof e.Name},L.source&&(L.source.evaluated=(0,e.stringify)(L.evaluated))}return p.validate=L,p}catch(q){throw delete p.validate,delete p.validateName,U&&this.logger.error("Error compiling schema, function code:",U),q}finally{this._compilations.delete(p)}}qe.compileSchema=i;function c(p,g,u){var h;u=(0,n.resolveUrl)(this.opts.uriResolver,g,u);const w=p.refs[u];if(w)return w;let f=m.call(this,p,u);if(f===void 0){const b=(h=p.localRefs)===null||h===void 0?void 0:h[u],{schemaId:k}=this.opts;b&&(f=new a({schema:b,schemaId:k,root:p,baseId:g}))}if(f!==void 0)return p.refs[u]=l.call(this,f)}qe.resolveRef=c;function l(p){return(0,n.inlineRef)(p.schema,this.opts.inlineRefs)?p.schema:p.validate?p:i.call(this,p)}function d(p){for(const g of this._compilations)if(v(g,p))return g}qe.getCompilingSchema=d;function v(p,g){return p.schema===g.schema&&p.root===g.root&&p.baseId===g.baseId}function m(p,g){let u;for(;typeof(u=this.refs[g])=="string";)g=u;return u||this.schemas[g]||_.call(this,p,g)}function _(p,g){const u=this.opts.uriResolver.parse(g),h=(0,n._getFullPath)(this.opts.uriResolver,u);let w=(0,n.getFullPath)(this.opts.uriResolver,p.baseId,void 0);if(Object.keys(p.schema).length>0&&h===w)return S.call(this,u,p);const f=(0,n.normalizeId)(h),b=this.refs[f]||this.schemas[f];if(typeof b=="string"){const k=_.call(this,p,b);return typeof k?.schema!="object"?void 0:S.call(this,u,k)}if(typeof b?.schema=="object"){if(b.validate||i.call(this,b),f===(0,n.normalizeId)(g)){const{schema:k}=b,{schemaId:N}=this.opts,M=k[N];return M&&(w=(0,n.resolveUrl)(this.opts.uriResolver,w,M)),new a({schema:k,schemaId:N,root:p,baseId:w})}return S.call(this,u,b)}}qe.resolveSchema=_;const $=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function S(p,{baseId:g,schema:u,root:h}){var w;if(((w=p.fragment)===null||w===void 0?void 0:w[0])!=="/")return;for(const k of p.fragment.slice(1).split("/")){if(typeof u=="boolean")return;const N=u[(0,s.unescapeFragment)(k)];if(N===void 0)return;u=N;const M=typeof u=="object"&&u[this.opts.schemaId];!$.has(k)&&M&&(g=(0,n.resolveUrl)(this.opts.uriResolver,g,M))}let f;if(typeof u!="boolean"&&u.$ref&&!(0,s.schemaHasRulesButRef)(u,this.RULES)){const k=(0,n.resolveUrl)(this.opts.uriResolver,g,u.$ref);f=_.call(this,h,k)}const{schemaId:b}=this.opts;if(f=f||new a({schema:u,schemaId:b,root:h,baseId:g}),f.schema!==f.root.schema)return f}return qe}const Eh="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Ph="Meta-schema for $data reference (JSON AnySchema extension proposal)",Th="object",Rh=["$data"],Ih={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},zh=!1,Nh={$id:Eh,description:Ph,type:Th,required:Rh,properties:Ih,additionalProperties:zh};var Zt={},vt={exports:{}},Xr,Cs;function Ua(){if(Cs)return Xr;Cs=1;const e=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),t=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function r(m){let _="",$=0,S=0;for(S=0;S<m.length;S++)if($=m[S].charCodeAt(0),$!==48){if(!($>=48&&$<=57||$>=65&&$<=70||$>=97&&$<=102))return"";_+=m[S];break}for(S+=1;S<m.length;S++){if($=m[S].charCodeAt(0),!($>=48&&$<=57||$>=65&&$<=70||$>=97&&$<=102))return"";_+=m[S]}return _}const n=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function s(m){return m.length=0,!0}function o(m,_,$){if(m.length){const S=r(m);if(S!=="")_.push(S);else return $.error=!0,!1;m.length=0}return!0}function a(m){let _=0;const $={error:!1,address:"",zone:""},S=[],p=[];let g=!1,u=!1,h=o;for(let w=0;w<m.length;w++){const f=m[w];if(!(f==="["||f==="]"))if(f===":"){if(g===!0&&(u=!0),!h(p,S,$))break;if(++_>7){$.error=!0;break}w>0&&m[w-1]===":"&&(g=!0),S.push(":");continue}else if(f==="%"){if(!h(p,S,$))break;h=s}else{p.push(f);continue}}return p.length&&(h===s?$.zone=p.join(""):u?S.push(p.join("")):S.push(r(p))),$.address=S.join(""),$}function i(m){if(c(m,":")<2)return{host:m,isIPV6:!1};const _=a(m);if(_.error)return{host:m,isIPV6:!1};{let $=_.address,S=_.address;return _.zone&&($+="%"+_.zone,S+="%25"+_.zone),{host:$,isIPV6:!0,escapedHost:S}}}function c(m,_){let $=0;for(let S=0;S<m.length;S++)m[S]===_&&$++;return $}function l(m){let _=m;const $=[];let S=-1,p=0;for(;p=_.length;){if(p===1){if(_===".")break;if(_==="/"){$.push("/");break}else{$.push(_);break}}else if(p===2){if(_[0]==="."){if(_[1]===".")break;if(_[1]==="/"){_=_.slice(2);continue}}else if(_[0]==="/"&&(_[1]==="."||_[1]==="/")){$.push("/");break}}else if(p===3&&_==="/.."){$.length!==0&&$.pop(),$.push("/");break}if(_[0]==="."){if(_[1]==="."){if(_[2]==="/"){_=_.slice(3);continue}}else if(_[1]==="/"){_=_.slice(2);continue}}else if(_[0]==="/"&&_[1]==="."){if(_[2]==="/"){_=_.slice(2);continue}else if(_[2]==="."&&_[3]==="/"){_=_.slice(3),$.length!==0&&$.pop();continue}}if((S=_.indexOf("/",1))===-1){$.push(_);break}else $.push(_.slice(0,S)),_=_.slice(S)}return $.join("")}function d(m,_){const $=_!==!0?escape:unescape;return m.scheme!==void 0&&(m.scheme=$(m.scheme)),m.userinfo!==void 0&&(m.userinfo=$(m.userinfo)),m.host!==void 0&&(m.host=$(m.host)),m.path!==void 0&&(m.path=$(m.path)),m.query!==void 0&&(m.query=$(m.query)),m.fragment!==void 0&&(m.fragment=$(m.fragment)),m}function v(m){const _=[];if(m.userinfo!==void 0&&(_.push(m.userinfo),_.push("@")),m.host!==void 0){let $=unescape(m.host);if(!t($)){const S=i($);S.isIPV6===!0?$=`[${S.escapedHost}]`:$=m.host}_.push($)}return(typeof m.port=="number"||typeof m.port=="string")&&(_.push(":"),_.push(String(m.port))),_.length?_.join(""):void 0}return Xr={nonSimpleDomain:n,recomposeAuthority:v,normalizeComponentEncoding:d,removeDotSegments:l,isIPv4:t,isUUID:e,normalizeIPv6:i,stringArrayToHexStripped:r},Xr}var en,As;function Oh(){if(As)return en;As=1;const{isUUID:e}=Ua(),t=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,r=["http","https","ws","wss","urn","urn:uuid"];function n(f){return r.indexOf(f)!==-1}function s(f){return f.secure===!0?!0:f.secure===!1?!1:f.scheme?f.scheme.length===3&&(f.scheme[0]==="w"||f.scheme[0]==="W")&&(f.scheme[1]==="s"||f.scheme[1]==="S")&&(f.scheme[2]==="s"||f.scheme[2]==="S"):!1}function o(f){return f.host||(f.error=f.error||"HTTP URIs must have a host."),f}function a(f){const b=String(f.scheme).toLowerCase()==="https";return(f.port===(b?443:80)||f.port==="")&&(f.port=void 0),f.path||(f.path="/"),f}function i(f){return f.secure=s(f),f.resourceName=(f.path||"/")+(f.query?"?"+f.query:""),f.path=void 0,f.query=void 0,f}function c(f){if((f.port===(s(f)?443:80)||f.port==="")&&(f.port=void 0),typeof f.secure=="boolean"&&(f.scheme=f.secure?"wss":"ws",f.secure=void 0),f.resourceName){const[b,k]=f.resourceName.split("?");f.path=b&&b!=="/"?b:void 0,f.query=k,f.resourceName=void 0}return f.fragment=void 0,f}function l(f,b){if(!f.path)return f.error="URN can not be parsed",f;const k=f.path.match(t);if(k){const N=b.scheme||f.scheme||"urn";f.nid=k[1].toLowerCase(),f.nss=k[2];const M=`${N}:${b.nid||f.nid}`,U=w(M);f.path=void 0,U&&(f=U.parse(f,b))}else f.error=f.error||"URN can not be parsed.";return f}function d(f,b){if(f.nid===void 0)throw new Error("URN without nid cannot be serialized");const k=b.scheme||f.scheme||"urn",N=f.nid.toLowerCase(),M=`${k}:${b.nid||N}`,U=w(M);U&&(f=U.serialize(f,b));const q=f,V=f.nss;return q.path=`${N||b.nid}:${V}`,b.skipEscape=!0,q}function v(f,b){const k=f;return k.uuid=k.nss,k.nss=void 0,!b.tolerant&&(!k.uuid||!e(k.uuid))&&(k.error=k.error||"UUID is not valid."),k}function m(f){const b=f;return b.nss=(f.uuid||"").toLowerCase(),b}const _={scheme:"http",domainHost:!0,parse:o,serialize:a},$={scheme:"https",domainHost:_.domainHost,parse:o,serialize:a},S={scheme:"ws",domainHost:!0,parse:i,serialize:c},p={scheme:"wss",domainHost:S.domainHost,parse:S.parse,serialize:S.serialize},h={http:_,https:$,ws:S,wss:p,urn:{scheme:"urn",parse:l,serialize:d,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:v,serialize:m,skipNormalize:!0}};Object.setPrototypeOf(h,null);function w(f){return f&&(h[f]||h[f.toLowerCase()])||void 0}return en={wsIsSecure:s,SCHEMES:h,isValidSchemeName:n,getSchemeHandler:w},en}var Ms;function jh(){if(Ms)return vt.exports;Ms=1;const{normalizeIPv6:e,removeDotSegments:t,recomposeAuthority:r,normalizeComponentEncoding:n,isIPv4:s,nonSimpleDomain:o}=Ua(),{SCHEMES:a,getSchemeHandler:i}=Oh();function c(p,g){return typeof p=="string"?p=m($(p,g),g):typeof p=="object"&&(p=$(m(p,g),g)),p}function l(p,g,u){const h=u?Object.assign({scheme:"null"},u):{scheme:"null"},w=d($(p,h),$(g,h),h,!0);return h.skipEscape=!0,m(w,h)}function d(p,g,u,h){const w={};return h||(p=$(m(p,u),u),g=$(m(g,u),u)),u=u||{},!u.tolerant&&g.scheme?(w.scheme=g.scheme,w.userinfo=g.userinfo,w.host=g.host,w.port=g.port,w.path=t(g.path||""),w.query=g.query):(g.userinfo!==void 0||g.host!==void 0||g.port!==void 0?(w.userinfo=g.userinfo,w.host=g.host,w.port=g.port,w.path=t(g.path||""),w.query=g.query):(g.path?(g.path[0]==="/"?w.path=t(g.path):((p.userinfo!==void 0||p.host!==void 0||p.port!==void 0)&&!p.path?w.path="/"+g.path:p.path?w.path=p.path.slice(0,p.path.lastIndexOf("/")+1)+g.path:w.path=g.path,w.path=t(w.path)),w.query=g.query):(w.path=p.path,g.query!==void 0?w.query=g.query:w.query=p.query),w.userinfo=p.userinfo,w.host=p.host,w.port=p.port),w.scheme=p.scheme),w.fragment=g.fragment,w}function v(p,g,u){return typeof p=="string"?(p=unescape(p),p=m(n($(p,u),!0),{...u,skipEscape:!0})):typeof p=="object"&&(p=m(n(p,!0),{...u,skipEscape:!0})),typeof g=="string"?(g=unescape(g),g=m(n($(g,u),!0),{...u,skipEscape:!0})):typeof g=="object"&&(g=m(n(g,!0),{...u,skipEscape:!0})),p.toLowerCase()===g.toLowerCase()}function m(p,g){const u={host:p.host,scheme:p.scheme,userinfo:p.userinfo,port:p.port,path:p.path,query:p.query,nid:p.nid,nss:p.nss,uuid:p.uuid,fragment:p.fragment,reference:p.reference,resourceName:p.resourceName,secure:p.secure,error:""},h=Object.assign({},g),w=[],f=i(h.scheme||u.scheme);f&&f.serialize&&f.serialize(u,h),u.path!==void 0&&(h.skipEscape?u.path=unescape(u.path):(u.path=escape(u.path),u.scheme!==void 0&&(u.path=u.path.split("%3A").join(":")))),h.reference!=="suffix"&&u.scheme&&w.push(u.scheme,":");const b=r(u);if(b!==void 0&&(h.reference!=="suffix"&&w.push("//"),w.push(b),u.path&&u.path[0]!=="/"&&w.push("/")),u.path!==void 0){let k=u.path;!h.absolutePath&&(!f||!f.absolutePath)&&(k=t(k)),b===void 0&&k[0]==="/"&&k[1]==="/"&&(k="/%2F"+k.slice(2)),w.push(k)}return u.query!==void 0&&w.push("?",u.query),u.fragment!==void 0&&w.push("#",u.fragment),w.join("")}const _=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function $(p,g){const u=Object.assign({},g),h={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0};let w=!1;u.reference==="suffix"&&(u.scheme?p=u.scheme+":"+p:p="//"+p);const f=p.match(_);if(f){if(h.scheme=f[1],h.userinfo=f[3],h.host=f[4],h.port=parseInt(f[5],10),h.path=f[6]||"",h.query=f[7],h.fragment=f[8],isNaN(h.port)&&(h.port=f[5]),h.host)if(s(h.host)===!1){const N=e(h.host);h.host=N.host.toLowerCase(),w=N.isIPV6}else w=!0;h.scheme===void 0&&h.userinfo===void 0&&h.host===void 0&&h.port===void 0&&h.query===void 0&&!h.path?h.reference="same-document":h.scheme===void 0?h.reference="relative":h.fragment===void 0?h.reference="absolute":h.reference="uri",u.reference&&u.reference!=="suffix"&&u.reference!==h.reference&&(h.error=h.error||"URI is not a "+u.reference+" reference.");const b=i(u.scheme||h.scheme);if(!u.unicodeSupport&&(!b||!b.unicodeSupport)&&h.host&&(u.domainHost||b&&b.domainHost)&&w===!1&&o(h.host))try{h.host=URL.domainToASCII(h.host.toLowerCase())}catch(k){h.error=h.error||"Host's domain name can not be converted to ASCII: "+k}(!b||b&&!b.skipNormalize)&&(p.indexOf("%")!==-1&&(h.scheme!==void 0&&(h.scheme=unescape(h.scheme)),h.host!==void 0&&(h.host=unescape(h.host))),h.path&&(h.path=escape(unescape(h.path))),h.fragment&&(h.fragment=encodeURI(decodeURIComponent(h.fragment)))),b&&b.parse&&b.parse(h,u)}else h.error=h.error||"URI can not be parsed.";return h}const S={SCHEMES:a,normalize:c,resolve:l,resolveComponent:d,equal:v,serialize:m,parse:$};return vt.exports=S,vt.exports.default=S,vt.exports.fastUri=S,vt.exports}var Ds;function qh(){if(Ds)return Zt;Ds=1,Object.defineProperty(Zt,"__esModule",{value:!0});const e=jh();return e.code='require("ajv/dist/runtime/uri").default',Zt.default=e,Zt}var Zs;function Ch(){return Zs||(Zs=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Dr();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=Q();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=Dn(),s=Zr(),o=Da(),a=Zn(),i=Q(),c=Mr(),l=Tr(),d=ne(),v=Nh,m=qh(),_=(D,T)=>new RegExp(D,T);_.code="new RegExp";const $=["removeAdditional","useDefaults","coerceTypes"],S=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),p={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},g={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},u=200;function h(D){var T,A,I,y,E,j,H,B,se,ee,P,R,C,Z,J,Y,ve,Fe,ze,Ne,we,at,Me,Vr,Ur;const gt=D.strict,Fr=(T=D.code)===null||T===void 0?void 0:T.optimize,Un=Fr===!0||Fr===void 0?1:Fr||0,Fn=(I=(A=D.code)===null||A===void 0?void 0:A.regExp)!==null&&I!==void 0?I:_,Ka=(y=D.uriResolver)!==null&&y!==void 0?y:m.default;return{strictSchema:(j=(E=D.strictSchema)!==null&&E!==void 0?E:gt)!==null&&j!==void 0?j:!0,strictNumbers:(B=(H=D.strictNumbers)!==null&&H!==void 0?H:gt)!==null&&B!==void 0?B:!0,strictTypes:(ee=(se=D.strictTypes)!==null&&se!==void 0?se:gt)!==null&&ee!==void 0?ee:"log",strictTuples:(R=(P=D.strictTuples)!==null&&P!==void 0?P:gt)!==null&&R!==void 0?R:"log",strictRequired:(Z=(C=D.strictRequired)!==null&&C!==void 0?C:gt)!==null&&Z!==void 0?Z:!1,code:D.code?{...D.code,optimize:Un,regExp:Fn}:{optimize:Un,regExp:Fn},loopRequired:(J=D.loopRequired)!==null&&J!==void 0?J:u,loopEnum:(Y=D.loopEnum)!==null&&Y!==void 0?Y:u,meta:(ve=D.meta)!==null&&ve!==void 0?ve:!0,messages:(Fe=D.messages)!==null&&Fe!==void 0?Fe:!0,inlineRefs:(ze=D.inlineRefs)!==null&&ze!==void 0?ze:!0,schemaId:(Ne=D.schemaId)!==null&&Ne!==void 0?Ne:"$id",addUsedSchema:(we=D.addUsedSchema)!==null&&we!==void 0?we:!0,validateSchema:(at=D.validateSchema)!==null&&at!==void 0?at:!0,validateFormats:(Me=D.validateFormats)!==null&&Me!==void 0?Me:!0,unicodeRegExp:(Vr=D.unicodeRegExp)!==null&&Vr!==void 0?Vr:!0,int32range:(Ur=D.int32range)!==null&&Ur!==void 0?Ur:!0,uriResolver:Ka}}class w{constructor(T={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,T=this.opts={...T,...h(T)};const{es5:A,lines:I}=this.opts.code;this.scope=new i.ValueScope({scope:{},prefixes:S,es5:A,lines:I}),this.logger=V(T.logger);const y=T.validateFormats;T.validateFormats=!1,this.RULES=(0,o.getRules)(),f.call(this,p,T,"NOT SUPPORTED"),f.call(this,g,T,"DEPRECATED","warn"),this._metaOpts=U.call(this),T.formats&&N.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),T.keywords&&M.call(this,T.keywords),typeof T.meta=="object"&&this.addMetaSchema(T.meta),k.call(this),T.validateFormats=y}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:T,meta:A,schemaId:I}=this.opts;let y=v;I==="id"&&(y={...v},y.id=y.$id,delete y.$id),A&&T&&this.addMetaSchema(y,y[I],!1)}defaultMeta(){const{meta:T,schemaId:A}=this.opts;return this.opts.defaultMeta=typeof T=="object"?T[A]||T:void 0}validate(T,A){let I;if(typeof T=="string"){if(I=this.getSchema(T),!I)throw new Error(`no schema with key or ref "${T}"`)}else I=this.compile(T);const y=I(A);return"$async"in I||(this.errors=I.errors),y}compile(T,A){const I=this._addSchema(T,A);return I.validate||this._compileSchemaEnv(I)}compileAsync(T,A){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:I}=this.opts;return y.call(this,T,A);async function y(ee,P){await E.call(this,ee.$schema);const R=this._addSchema(ee,P);return R.validate||j.call(this,R)}async function E(ee){ee&&!this.getSchema(ee)&&await y.call(this,{$ref:ee},!0)}async function j(ee){try{return this._compileSchemaEnv(ee)}catch(P){if(!(P instanceof s.default))throw P;return H.call(this,P),await B.call(this,P.missingSchema),j.call(this,ee)}}function H({missingSchema:ee,missingRef:P}){if(this.refs[ee])throw new Error(`AnySchema ${ee} is loaded but ${P} cannot be resolved`)}async function B(ee){const P=await se.call(this,ee);this.refs[ee]||await E.call(this,P.$schema),this.refs[ee]||this.addSchema(P,ee,A)}async function se(ee){const P=this._loading[ee];if(P)return P;try{return await(this._loading[ee]=I(ee))}finally{delete this._loading[ee]}}}addSchema(T,A,I,y=this.opts.validateSchema){if(Array.isArray(T)){for(const j of T)this.addSchema(j,void 0,I,y);return this}let E;if(typeof T=="object"){const{schemaId:j}=this.opts;if(E=T[j],E!==void 0&&typeof E!="string")throw new Error(`schema ${j} must be string`)}return A=(0,c.normalizeId)(A||E),this._checkUnique(A),this.schemas[A]=this._addSchema(T,I,A,y,!0),this}addMetaSchema(T,A,I=this.opts.validateSchema){return this.addSchema(T,A,!0,I),this}validateSchema(T,A){if(typeof T=="boolean")return!0;let I;if(I=T.$schema,I!==void 0&&typeof I!="string")throw new Error("$schema must be a string");if(I=I||this.opts.defaultMeta||this.defaultMeta(),!I)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const y=this.validate(I,T);if(!y&&A){const E="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(E);else throw new Error(E)}return y}getSchema(T){let A;for(;typeof(A=b.call(this,T))=="string";)T=A;if(A===void 0){const{schemaId:I}=this.opts,y=new a.SchemaEnv({schema:{},schemaId:I});if(A=a.resolveSchema.call(this,y,T),!A)return;this.refs[T]=A}return A.validate||this._compileSchemaEnv(A)}removeSchema(T){if(T instanceof RegExp)return this._removeAllSchemas(this.schemas,T),this._removeAllSchemas(this.refs,T),this;switch(typeof T){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const A=b.call(this,T);return typeof A=="object"&&this._cache.delete(A.schema),delete this.schemas[T],delete this.refs[T],this}case"object":{const A=T;this._cache.delete(A);let I=T[this.opts.schemaId];return I&&(I=(0,c.normalizeId)(I),delete this.schemas[I],delete this.refs[I]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(T){for(const A of T)this.addKeyword(A);return this}addKeyword(T,A){let I;if(typeof T=="string")I=T,typeof A=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),A.keyword=I);else if(typeof T=="object"&&A===void 0){if(A=T,I=A.keyword,Array.isArray(I)&&!I.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(x.call(this,I,A),!A)return(0,d.eachItem)(I,E=>oe.call(this,E)),this;Te.call(this,A);const y={...A,type:(0,l.getJSONTypes)(A.type),schemaType:(0,l.getJSONTypes)(A.schemaType)};return(0,d.eachItem)(I,y.type.length===0?E=>oe.call(this,E,y):E=>y.type.forEach(j=>oe.call(this,E,y,j))),this}getKeyword(T){const A=this.RULES.all[T];return typeof A=="object"?A.definition:!!A}removeKeyword(T){const{RULES:A}=this;delete A.keywords[T],delete A.all[T];for(const I of A.rules){const y=I.rules.findIndex(E=>E.keyword===T);y>=0&&I.rules.splice(y,1)}return this}addFormat(T,A){return typeof A=="string"&&(A=new RegExp(A)),this.formats[T]=A,this}errorsText(T=this.errors,{separator:A=", ",dataVar:I="data"}={}){return!T||T.length===0?"No errors":T.map(y=>`${I}${y.instancePath} ${y.message}`).reduce((y,E)=>y+A+E)}$dataMetaSchema(T,A){const I=this.RULES.all;T=JSON.parse(JSON.stringify(T));for(const y of A){const E=y.split("/").slice(1);let j=T;for(const H of E)j=j[H];for(const H in I){const B=I[H];if(typeof B!="object")continue;const{$data:se}=B.definition,ee=j[H];se&&ee&&(j[H]=Ue(ee))}}return T}_removeAllSchemas(T,A){for(const I in T){const y=T[I];(!A||A.test(I))&&(typeof y=="string"?delete T[I]:y&&!y.meta&&(this._cache.delete(y.schema),delete T[I]))}}_addSchema(T,A,I,y=this.opts.validateSchema,E=this.opts.addUsedSchema){let j;const{schemaId:H}=this.opts;if(typeof T=="object")j=T[H];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof T!="boolean")throw new Error("schema must be object or boolean")}let B=this._cache.get(T);if(B!==void 0)return B;I=(0,c.normalizeId)(j||I);const se=c.getSchemaRefs.call(this,T,I);return B=new a.SchemaEnv({schema:T,schemaId:H,meta:A,baseId:I,localRefs:se}),this._cache.set(B.schema,B),E&&!I.startsWith("#")&&(I&&this._checkUnique(I),this.refs[I]=B),y&&this.validateSchema(T,!0),B}_checkUnique(T){if(this.schemas[T]||this.refs[T])throw new Error(`schema with key or id "${T}" already exists`)}_compileSchemaEnv(T){if(T.meta?this._compileMetaSchema(T):a.compileSchema.call(this,T),!T.validate)throw new Error("ajv implementation error");return T.validate}_compileMetaSchema(T){const A=this.opts;this.opts=this._metaOpts;try{a.compileSchema.call(this,T)}finally{this.opts=A}}}w.ValidationError=n.default,w.MissingRefError=s.default,e.default=w;function f(D,T,A,I="error"){for(const y in D){const E=y;E in T&&this.logger[I](`${A}: option ${y}. ${D[E]}`)}}function b(D){return D=(0,c.normalizeId)(D),this.schemas[D]||this.refs[D]}function k(){const D=this.opts.schemas;if(D)if(Array.isArray(D))this.addSchema(D);else for(const T in D)this.addSchema(D[T],T)}function N(){for(const D in this.opts.formats){const T=this.opts.formats[D];T&&this.addFormat(D,T)}}function M(D){if(Array.isArray(D)){this.addVocabulary(D);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const T in D){const A=D[T];A.keyword||(A.keyword=T),this.addKeyword(A)}}function U(){const D={...this.opts};for(const T of $)delete D[T];return D}const q={log(){},warn(){},error(){}};function V(D){if(D===!1)return q;if(D===void 0)return console;if(D.log&&D.warn&&D.error)return D;throw new Error("logger must implement log, warn and error methods")}const L=/^[a-z_$][a-z0-9_$:-]*$/i;function x(D,T){const{RULES:A}=this;if((0,d.eachItem)(D,I=>{if(A.keywords[I])throw new Error(`Keyword ${I} is already defined`);if(!L.test(I))throw new Error(`Keyword ${I} has invalid name`)}),!!T&&T.$data&&!("code"in T||"validate"in T))throw new Error('$data keyword must have "code" or "validate" function')}function oe(D,T,A){var I;const y=T?.post;if(A&&y)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:E}=this;let j=y?E.post:E.rules.find(({type:B})=>B===A);if(j||(j={type:A,rules:[]},E.rules.push(j)),E.keywords[D]=!0,!T)return;const H={keyword:D,definition:{...T,type:(0,l.getJSONTypes)(T.type),schemaType:(0,l.getJSONTypes)(T.schemaType)}};T.before?Pe.call(this,j,H,T.before):j.rules.push(H),E.all[D]=H,(I=T.implements)===null||I===void 0||I.forEach(B=>this.addKeyword(B))}function Pe(D,T,A){const I=D.rules.findIndex(y=>y.keyword===A);I>=0?D.rules.splice(I,0,T):(D.rules.push(T),this.logger.warn(`rule ${A} is not defined`))}function Te(D){let{metaSchema:T}=D;T!==void 0&&(D.$data&&this.opts.$data&&(T=Ue(T)),D.validateSchema=this.compile(T,!0))}const ce={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Ue(D){return{anyOf:[D,ce]}}})(Kr)),Kr}var Vt={},Ut={},Ft={},Vs;function Ah(){if(Vs)return Ft;Vs=1,Object.defineProperty(Ft,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return Ft.default=e,Ft}var Ge={},Us;function Mh(){if(Us)return Ge;Us=1,Object.defineProperty(Ge,"__esModule",{value:!0}),Ge.callRef=Ge.getValidate=void 0;const e=Zr(),t=xe(),r=Q(),n=Xe(),s=Zn(),o=ne(),a={keyword:"$ref",schemaType:"string",code(l){const{gen:d,schema:v,it:m}=l,{baseId:_,schemaEnv:$,validateName:S,opts:p,self:g}=m,{root:u}=$;if((v==="#"||v==="#/")&&_===u.baseId)return w();const h=s.resolveRef.call(g,u,_,v);if(h===void 0)throw new e.default(m.opts.uriResolver,_,v);if(h instanceof s.SchemaEnv)return f(h);return b(h);function w(){if($===u)return c(l,S,$,$.$async);const k=d.scopeValue("root",{ref:u});return c(l,(0,r._)`${k}.validate`,u,u.$async)}function f(k){const N=i(l,k);c(l,N,k,k.$async)}function b(k){const N=d.scopeValue("schema",p.code.source===!0?{ref:k,code:(0,r.stringify)(k)}:{ref:k}),M=d.name("valid"),U=l.subschema({schema:k,dataTypes:[],schemaPath:r.nil,topSchemaRef:N,errSchemaPath:v},M);l.mergeEvaluated(U),l.ok(M)}}};function i(l,d){const{gen:v}=l;return d.validate?v.scopeValue("validate",{ref:d.validate}):(0,r._)`${v.scopeValue("wrapper",{ref:d})}.validate`}Ge.getValidate=i;function c(l,d,v,m){const{gen:_,it:$}=l,{allErrors:S,schemaEnv:p,opts:g}=$,u=g.passContext?n.default.this:r.nil;m?h():w();function h(){if(!p.$async)throw new Error("async schema referenced by sync schema");const k=_.let("valid");_.try(()=>{_.code((0,r._)`await ${(0,t.callValidateCode)(l,d,u)}`),b(d),S||_.assign(k,!0)},N=>{_.if((0,r._)`!(${N} instanceof ${$.ValidationError})`,()=>_.throw(N)),f(N),S||_.assign(k,!1)}),l.ok(k)}function w(){l.result((0,t.callValidateCode)(l,d,u),()=>b(d),()=>f(d))}function f(k){const N=(0,r._)`${k}.errors`;_.assign(n.default.vErrors,(0,r._)`${n.default.vErrors} === null ? ${N} : ${n.default.vErrors}.concat(${N})`),_.assign(n.default.errors,(0,r._)`${n.default.vErrors}.length`)}function b(k){var N;if(!$.opts.unevaluated)return;const M=(N=v?.validate)===null||N===void 0?void 0:N.evaluated;if($.props!==!0)if(M&&!M.dynamicProps)M.props!==void 0&&($.props=o.mergeEvaluated.props(_,M.props,$.props));else{const U=_.var("props",(0,r._)`${k}.evaluated.props`);$.props=o.mergeEvaluated.props(_,U,$.props,r.Name)}if($.items!==!0)if(M&&!M.dynamicItems)M.items!==void 0&&($.items=o.mergeEvaluated.items(_,M.items,$.items));else{const U=_.var("items",(0,r._)`${k}.evaluated.items`);$.items=o.mergeEvaluated.items(_,U,$.items,r.Name)}}}return Ge.callRef=c,Ge.default=a,Ge}var Fs;function Dh(){if(Fs)return Ut;Fs=1,Object.defineProperty(Ut,"__esModule",{value:!0});const e=Ah(),t=Mh(),r=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",e.default,t.default];return Ut.default=r,Ut}var Lt={},xt={},Ls;function Zh(){if(Ls)return xt;Ls=1,Object.defineProperty(xt,"__esModule",{value:!0});const e=Q(),t=e.operators,r={maximum:{okStr:"<=",ok:t.LTE,fail:t.GT},minimum:{okStr:">=",ok:t.GTE,fail:t.LT},exclusiveMaximum:{okStr:"<",ok:t.LT,fail:t.GTE},exclusiveMinimum:{okStr:">",ok:t.GT,fail:t.LTE}},n={message:({keyword:o,schemaCode:a})=>(0,e.str)`must be ${r[o].okStr} ${a}`,params:({keyword:o,schemaCode:a})=>(0,e._)`{comparison: ${r[o].okStr}, limit: ${a}}`},s={keyword:Object.keys(r),type:"number",schemaType:"number",$data:!0,error:n,code(o){const{keyword:a,data:i,schemaCode:c}=o;o.fail$data((0,e._)`${i} ${r[a].fail} ${c} || isNaN(${i})`)}};return xt.default=s,xt}var Ht={},xs;function Vh(){if(xs)return Ht;xs=1,Object.defineProperty(Ht,"__esModule",{value:!0});const e=Q(),r={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:n})=>(0,e.str)`must be multiple of ${n}`,params:({schemaCode:n})=>(0,e._)`{multipleOf: ${n}}`},code(n){const{gen:s,data:o,schemaCode:a,it:i}=n,c=i.opts.multipleOfPrecision,l=s.let("res"),d=c?(0,e._)`Math.abs(Math.round(${l}) - ${l}) > 1e-${c}`:(0,e._)`${l} !== parseInt(${l})`;n.fail$data((0,e._)`(${a} === 0 || (${l} = ${o}/${a}, ${d}))`)}};return Ht.default=r,Ht}var Kt={},Jt={},Hs;function Uh(){if(Hs)return Jt;Hs=1,Object.defineProperty(Jt,"__esModule",{value:!0});function e(t){const r=t.length;let n=0,s=0,o;for(;s<r;)n++,o=t.charCodeAt(s++),o>=55296&&o<=56319&&s<r&&(o=t.charCodeAt(s),(o&64512)===56320&&s++);return n}return Jt.default=e,e.code='require("ajv/dist/runtime/ucs2length").default',Jt}var Ks;function Fh(){if(Ks)return Kt;Ks=1,Object.defineProperty(Kt,"__esModule",{value:!0});const e=Q(),t=ne(),r=Uh(),s={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:o,schemaCode:a}){const i=o==="maxLength"?"more":"fewer";return(0,e.str)`must NOT have ${i} than ${a} characters`},params:({schemaCode:o})=>(0,e._)`{limit: ${o}}`},code(o){const{keyword:a,data:i,schemaCode:c,it:l}=o,d=a==="maxLength"?e.operators.GT:e.operators.LT,v=l.opts.unicode===!1?(0,e._)`${i}.length`:(0,e._)`${(0,t.useFunc)(o.gen,r.default)}(${i})`;o.fail$data((0,e._)`${v} ${d} ${c}`)}};return Kt.default=s,Kt}var Gt={},Js;function Lh(){if(Js)return Gt;Js=1,Object.defineProperty(Gt,"__esModule",{value:!0});const e=xe(),t=Q(),n={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:s})=>(0,t.str)`must match pattern "${s}"`,params:({schemaCode:s})=>(0,t._)`{pattern: ${s}}`},code(s){const{data:o,$data:a,schema:i,schemaCode:c,it:l}=s,d=l.opts.unicodeRegExp?"u":"",v=a?(0,t._)`(new RegExp(${c}, ${d}))`:(0,e.usePattern)(s,i);s.fail$data((0,t._)`!${v}.test(${o})`)}};return Gt.default=n,Gt}var Bt={},Gs;function xh(){if(Gs)return Bt;Gs=1,Object.defineProperty(Bt,"__esModule",{value:!0});const e=Q(),r={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:n,schemaCode:s}){const o=n==="maxProperties"?"more":"fewer";return(0,e.str)`must NOT have ${o} than ${s} properties`},params:({schemaCode:n})=>(0,e._)`{limit: ${n}}`},code(n){const{keyword:s,data:o,schemaCode:a}=n,i=s==="maxProperties"?e.operators.GT:e.operators.LT;n.fail$data((0,e._)`Object.keys(${o}).length ${i} ${a}`)}};return Bt.default=r,Bt}var Wt={},Bs;function Hh(){if(Bs)return Wt;Bs=1,Object.defineProperty(Wt,"__esModule",{value:!0});const e=xe(),t=Q(),r=ne(),s={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:o}})=>(0,t.str)`must have required property '${o}'`,params:({params:{missingProperty:o}})=>(0,t._)`{missingProperty: ${o}}`},code(o){const{gen:a,schema:i,schemaCode:c,data:l,$data:d,it:v}=o,{opts:m}=v;if(!d&&i.length===0)return;const _=i.length>=m.loopRequired;if(v.allErrors?$():S(),m.strictRequired){const u=o.parentSchema.properties,{definedProperties:h}=o.it;for(const w of i)if(u?.[w]===void 0&&!h.has(w)){const f=v.schemaEnv.baseId+v.errSchemaPath,b=`required property "${w}" is not defined at "${f}" (strictRequired)`;(0,r.checkStrictMode)(v,b,v.opts.strictRequired)}}function $(){if(_||d)o.block$data(t.nil,p);else for(const u of i)(0,e.checkReportMissingProp)(o,u)}function S(){const u=a.let("missing");if(_||d){const h=a.let("valid",!0);o.block$data(h,()=>g(u,h)),o.ok(h)}else a.if((0,e.checkMissingProp)(o,i,u)),(0,e.reportMissingProp)(o,u),a.else()}function p(){a.forOf("prop",c,u=>{o.setParams({missingProperty:u}),a.if((0,e.noPropertyInData)(a,l,u,m.ownProperties),()=>o.error())})}function g(u,h){o.setParams({missingProperty:u}),a.forOf(u,c,()=>{a.assign(h,(0,e.propertyInData)(a,l,u,m.ownProperties)),a.if((0,t.not)(h),()=>{o.error(),a.break()})},t.nil)}}};return Wt.default=s,Wt}var Qt={},Ws;function Kh(){if(Ws)return Qt;Ws=1,Object.defineProperty(Qt,"__esModule",{value:!0});const e=Q(),r={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:n,schemaCode:s}){const o=n==="maxItems"?"more":"fewer";return(0,e.str)`must NOT have ${o} than ${s} items`},params:({schemaCode:n})=>(0,e._)`{limit: ${n}}`},code(n){const{keyword:s,data:o,schemaCode:a}=n,i=s==="maxItems"?e.operators.GT:e.operators.LT;n.fail$data((0,e._)`${o}.length ${i} ${a}`)}};return Qt.default=r,Qt}var Yt={},Xt={},Qs;function Vn(){if(Qs)return Xt;Qs=1,Object.defineProperty(Xt,"__esModule",{value:!0});const e=Va();return e.code='require("ajv/dist/runtime/equal").default',Xt.default=e,Xt}var Ys;function Jh(){if(Ys)return Yt;Ys=1,Object.defineProperty(Yt,"__esModule",{value:!0});const e=Tr(),t=Q(),r=ne(),n=Vn(),o={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:a,j:i}})=>(0,t.str)`must NOT have duplicate items (items ## ${i} and ${a} are identical)`,params:({params:{i:a,j:i}})=>(0,t._)`{i: ${a}, j: ${i}}`},code(a){const{gen:i,data:c,$data:l,schema:d,parentSchema:v,schemaCode:m,it:_}=a;if(!l&&!d)return;const $=i.let("valid"),S=v.items?(0,e.getSchemaTypes)(v.items):[];a.block$data($,p,(0,t._)`${m} === false`),a.ok($);function p(){const w=i.let("i",(0,t._)`${c}.length`),f=i.let("j");a.setParams({i:w,j:f}),i.assign($,!0),i.if((0,t._)`${w} > 1`,()=>(g()?u:h)(w,f))}function g(){return S.length>0&&!S.some(w=>w==="object"||w==="array")}function u(w,f){const b=i.name("item"),k=(0,e.checkDataTypes)(S,b,_.opts.strictNumbers,e.DataType.Wrong),N=i.const("indices",(0,t._)`{}`);i.for((0,t._)`;${w}--;`,()=>{i.let(b,(0,t._)`${c}[${w}]`),i.if(k,(0,t._)`continue`),S.length>1&&i.if((0,t._)`typeof ${b} == "string"`,(0,t._)`${b} += "_"`),i.if((0,t._)`typeof ${N}[${b}] == "number"`,()=>{i.assign(f,(0,t._)`${N}[${b}]`),a.error(),i.assign($,!1).break()}).code((0,t._)`${N}[${b}] = ${w}`)})}function h(w,f){const b=(0,r.useFunc)(i,n.default),k=i.name("outer");i.label(k).for((0,t._)`;${w}--;`,()=>i.for((0,t._)`${f} = ${w}; ${f}--;`,()=>i.if((0,t._)`${b}(${c}[${w}], ${c}[${f}])`,()=>{a.error(),i.assign($,!1).break(k)})))}}};return Yt.default=o,Yt}var er={},Xs;function Gh(){if(Xs)return er;Xs=1,Object.defineProperty(er,"__esModule",{value:!0});const e=Q(),t=ne(),r=Vn(),s={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:o})=>(0,e._)`{allowedValue: ${o}}`},code(o){const{gen:a,data:i,$data:c,schemaCode:l,schema:d}=o;c||d&&typeof d=="object"?o.fail$data((0,e._)`!${(0,t.useFunc)(a,r.default)}(${i}, ${l})`):o.fail((0,e._)`${d} !== ${i}`)}};return er.default=s,er}var tr={},eo;function Bh(){if(eo)return tr;eo=1,Object.defineProperty(tr,"__esModule",{value:!0});const e=Q(),t=ne(),r=Vn(),s={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:o})=>(0,e._)`{allowedValues: ${o}}`},code(o){const{gen:a,data:i,$data:c,schema:l,schemaCode:d,it:v}=o;if(!c&&l.length===0)throw new Error("enum must have non-empty array");const m=l.length>=v.opts.loopEnum;let _;const $=()=>_??(_=(0,t.useFunc)(a,r.default));let S;if(m||c)S=a.let("valid"),o.block$data(S,p);else{if(!Array.isArray(l))throw new Error("ajv implementation error");const u=a.const("vSchema",d);S=(0,e.or)(...l.map((h,w)=>g(u,w)))}o.pass(S);function p(){a.assign(S,!1),a.forOf("v",d,u=>a.if((0,e._)`${$()}(${i}, ${u})`,()=>a.assign(S,!0).break()))}function g(u,h){const w=l[h];return typeof w=="object"&&w!==null?(0,e._)`${$()}(${i}, ${u}[${h}])`:(0,e._)`${i} === ${w}`}}};return tr.default=s,tr}var to;function Wh(){if(to)return Lt;to=1,Object.defineProperty(Lt,"__esModule",{value:!0});const e=Zh(),t=Vh(),r=Fh(),n=Lh(),s=xh(),o=Hh(),a=Kh(),i=Jh(),c=Gh(),l=Bh(),d=[e.default,t.default,r.default,n.default,s.default,o.default,a.default,i.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},c.default,l.default];return Lt.default=d,Lt}var rr={},it={},ro;function Fa(){if(ro)return it;ro=1,Object.defineProperty(it,"__esModule",{value:!0}),it.validateAdditionalItems=void 0;const e=Q(),t=ne(),n={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:o}})=>(0,e.str)`must NOT have more than ${o} items`,params:({params:{len:o}})=>(0,e._)`{limit: ${o}}`},code(o){const{parentSchema:a,it:i}=o,{items:c}=a;if(!Array.isArray(c)){(0,t.checkStrictMode)(i,'"additionalItems" is ignored when "items" is not an array of schemas');return}s(o,c)}};function s(o,a){const{gen:i,schema:c,data:l,keyword:d,it:v}=o;v.items=!0;const m=i.const("len",(0,e._)`${l}.length`);if(c===!1)o.setParams({len:a.length}),o.pass((0,e._)`${m} <= ${a.length}`);else if(typeof c=="object"&&!(0,t.alwaysValidSchema)(v,c)){const $=i.var("valid",(0,e._)`${m} <= ${a.length}`);i.if((0,e.not)($),()=>_($)),o.ok($)}function _($){i.forRange("i",a.length,m,S=>{o.subschema({keyword:d,dataProp:S,dataPropType:t.Type.Num},$),v.allErrors||i.if((0,e.not)($),()=>i.break())})}}return it.validateAdditionalItems=s,it.default=n,it}var nr={},ct={},no;function La(){if(no)return ct;no=1,Object.defineProperty(ct,"__esModule",{value:!0}),ct.validateTuple=void 0;const e=Q(),t=ne(),r=xe(),n={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(o){const{schema:a,it:i}=o;if(Array.isArray(a))return s(o,"additionalItems",a);i.items=!0,!(0,t.alwaysValidSchema)(i,a)&&o.ok((0,r.validateArray)(o))}};function s(o,a,i=o.schema){const{gen:c,parentSchema:l,data:d,keyword:v,it:m}=o;S(l),m.opts.unevaluated&&i.length&&m.items!==!0&&(m.items=t.mergeEvaluated.items(c,i.length,m.items));const _=c.name("valid"),$=c.const("len",(0,e._)`${d}.length`);i.forEach((p,g)=>{(0,t.alwaysValidSchema)(m,p)||(c.if((0,e._)`${$} > ${g}`,()=>o.subschema({keyword:v,schemaProp:g,dataProp:g},_)),o.ok(_))});function S(p){const{opts:g,errSchemaPath:u}=m,h=i.length,w=h===p.minItems&&(h===p.maxItems||p[a]===!1);if(g.strictTuples&&!w){const f=`"${v}" is ${h}-tuple, but minItems or maxItems/${a} are not specified or different at path "${u}"`;(0,t.checkStrictMode)(m,f,g.strictTuples)}}}return ct.validateTuple=s,ct.default=n,ct}var so;function Qh(){if(so)return nr;so=1,Object.defineProperty(nr,"__esModule",{value:!0});const e=La(),t={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:r=>(0,e.validateTuple)(r,"items")};return nr.default=t,nr}var sr={},oo;function Yh(){if(oo)return sr;oo=1,Object.defineProperty(sr,"__esModule",{value:!0});const e=Q(),t=ne(),r=xe(),n=Fa(),o={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:a}})=>(0,e.str)`must NOT have more than ${a} items`,params:({params:{len:a}})=>(0,e._)`{limit: ${a}}`},code(a){const{schema:i,parentSchema:c,it:l}=a,{prefixItems:d}=c;l.items=!0,!(0,t.alwaysValidSchema)(l,i)&&(d?(0,n.validateAdditionalItems)(a,d):a.ok((0,r.validateArray)(a)))}};return sr.default=o,sr}var or={},ao;function Xh(){if(ao)return or;ao=1,Object.defineProperty(or,"__esModule",{value:!0});const e=Q(),t=ne(),n={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:s,max:o}})=>o===void 0?(0,e.str)`must contain at least ${s} valid item(s)`:(0,e.str)`must contain at least ${s} and no more than ${o} valid item(s)`,params:({params:{min:s,max:o}})=>o===void 0?(0,e._)`{minContains: ${s}}`:(0,e._)`{minContains: ${s}, maxContains: ${o}}`},code(s){const{gen:o,schema:a,parentSchema:i,data:c,it:l}=s;let d,v;const{minContains:m,maxContains:_}=i;l.opts.next?(d=m===void 0?1:m,v=_):d=1;const $=o.const("len",(0,e._)`${c}.length`);if(s.setParams({min:d,max:v}),v===void 0&&d===0){(0,t.checkStrictMode)(l,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(v!==void 0&&d>v){(0,t.checkStrictMode)(l,'"minContains" > "maxContains" is always invalid'),s.fail();return}if((0,t.alwaysValidSchema)(l,a)){let h=(0,e._)`${$} >= ${d}`;v!==void 0&&(h=(0,e._)`${h} && ${$} <= ${v}`),s.pass(h);return}l.items=!0;const S=o.name("valid");v===void 0&&d===1?g(S,()=>o.if(S,()=>o.break())):d===0?(o.let(S,!0),v!==void 0&&o.if((0,e._)`${c}.length > 0`,p)):(o.let(S,!1),p()),s.result(S,()=>s.reset());function p(){const h=o.name("_valid"),w=o.let("count",0);g(h,()=>o.if(h,()=>u(w)))}function g(h,w){o.forRange("i",0,$,f=>{s.subschema({keyword:"contains",dataProp:f,dataPropType:t.Type.Num,compositeRule:!0},h),w()})}function u(h){o.code((0,e._)`${h}++`),v===void 0?o.if((0,e._)`${h} >= ${d}`,()=>o.assign(S,!0).break()):(o.if((0,e._)`${h} > ${v}`,()=>o.assign(S,!1).break()),d===1?o.assign(S,!0):o.if((0,e._)`${h} >= ${d}`,()=>o.assign(S,!0)))}}};return or.default=n,or}var tn={},io;function ep(){return io||(io=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Q(),r=ne(),n=xe();e.error={message:({params:{property:c,depsCount:l,deps:d}})=>{const v=l===1?"property":"properties";return(0,t.str)`must have ${v} ${d} when property ${c} is present`},params:({params:{property:c,depsCount:l,deps:d,missingProperty:v}})=>(0,t._)`{property: ${c},
    missingProperty: ${v},
    depsCount: ${l},
    deps: ${d}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(c){const[l,d]=o(c);a(c,l),i(c,d)}};function o({schema:c}){const l={},d={};for(const v in c){if(v==="__proto__")continue;const m=Array.isArray(c[v])?l:d;m[v]=c[v]}return[l,d]}function a(c,l=c.schema){const{gen:d,data:v,it:m}=c;if(Object.keys(l).length===0)return;const _=d.let("missing");for(const $ in l){const S=l[$];if(S.length===0)continue;const p=(0,n.propertyInData)(d,v,$,m.opts.ownProperties);c.setParams({property:$,depsCount:S.length,deps:S.join(", ")}),m.allErrors?d.if(p,()=>{for(const g of S)(0,n.checkReportMissingProp)(c,g)}):(d.if((0,t._)`${p} && (${(0,n.checkMissingProp)(c,S,_)})`),(0,n.reportMissingProp)(c,_),d.else())}}e.validatePropertyDeps=a;function i(c,l=c.schema){const{gen:d,data:v,keyword:m,it:_}=c,$=d.name("valid");for(const S in l)(0,r.alwaysValidSchema)(_,l[S])||(d.if((0,n.propertyInData)(d,v,S,_.opts.ownProperties),()=>{const p=c.subschema({keyword:m,schemaProp:S},$);c.mergeValidEvaluated(p,$)},()=>d.var($,!0)),c.ok($))}e.validateSchemaDeps=i,e.default=s})(tn)),tn}var ar={},co;function tp(){if(co)return ar;co=1,Object.defineProperty(ar,"__esModule",{value:!0});const e=Q(),t=ne(),n={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:s})=>(0,e._)`{propertyName: ${s.propertyName}}`},code(s){const{gen:o,schema:a,data:i,it:c}=s;if((0,t.alwaysValidSchema)(c,a))return;const l=o.name("valid");o.forIn("key",i,d=>{s.setParams({propertyName:d}),s.subschema({keyword:"propertyNames",data:d,dataTypes:["string"],propertyName:d,compositeRule:!0},l),o.if((0,e.not)(l),()=>{s.error(!0),c.allErrors||o.break()})}),s.ok(l)}};return ar.default=n,ar}var ir={},uo;function xa(){if(uo)return ir;uo=1,Object.defineProperty(ir,"__esModule",{value:!0});const e=xe(),t=Q(),r=Xe(),n=ne(),o={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:a})=>(0,t._)`{additionalProperty: ${a.additionalProperty}}`},code(a){const{gen:i,schema:c,parentSchema:l,data:d,errsCount:v,it:m}=a;if(!v)throw new Error("ajv implementation error");const{allErrors:_,opts:$}=m;if(m.props=!0,$.removeAdditional!=="all"&&(0,n.alwaysValidSchema)(m,c))return;const S=(0,e.allSchemaProperties)(l.properties),p=(0,e.allSchemaProperties)(l.patternProperties);g(),a.ok((0,t._)`${v} === ${r.default.errors}`);function g(){i.forIn("key",d,b=>{!S.length&&!p.length?w(b):i.if(u(b),()=>w(b))})}function u(b){let k;if(S.length>8){const N=(0,n.schemaRefOrVal)(m,l.properties,"properties");k=(0,e.isOwnProperty)(i,N,b)}else S.length?k=(0,t.or)(...S.map(N=>(0,t._)`${b} === ${N}`)):k=t.nil;return p.length&&(k=(0,t.or)(k,...p.map(N=>(0,t._)`${(0,e.usePattern)(a,N)}.test(${b})`))),(0,t.not)(k)}function h(b){i.code((0,t._)`delete ${d}[${b}]`)}function w(b){if($.removeAdditional==="all"||$.removeAdditional&&c===!1){h(b);return}if(c===!1){a.setParams({additionalProperty:b}),a.error(),_||i.break();return}if(typeof c=="object"&&!(0,n.alwaysValidSchema)(m,c)){const k=i.name("valid");$.removeAdditional==="failing"?(f(b,k,!1),i.if((0,t.not)(k),()=>{a.reset(),h(b)})):(f(b,k),_||i.if((0,t.not)(k),()=>i.break()))}}function f(b,k,N){const M={keyword:"additionalProperties",dataProp:b,dataPropType:n.Type.Str};N===!1&&Object.assign(M,{compositeRule:!0,createErrors:!1,allErrors:!1}),a.subschema(M,k)}}};return ir.default=o,ir}var cr={},lo;function rp(){if(lo)return cr;lo=1,Object.defineProperty(cr,"__esModule",{value:!0});const e=Dr(),t=xe(),r=ne(),n=xa(),s={keyword:"properties",type:"object",schemaType:"object",code(o){const{gen:a,schema:i,parentSchema:c,data:l,it:d}=o;d.opts.removeAdditional==="all"&&c.additionalProperties===void 0&&n.default.code(new e.KeywordCxt(d,n.default,"additionalProperties"));const v=(0,t.allSchemaProperties)(i);for(const p of v)d.definedProperties.add(p);d.opts.unevaluated&&v.length&&d.props!==!0&&(d.props=r.mergeEvaluated.props(a,(0,r.toHash)(v),d.props));const m=v.filter(p=>!(0,r.alwaysValidSchema)(d,i[p]));if(m.length===0)return;const _=a.name("valid");for(const p of m)$(p)?S(p):(a.if((0,t.propertyInData)(a,l,p,d.opts.ownProperties)),S(p),d.allErrors||a.else().var(_,!0),a.endIf()),o.it.definedProperties.add(p),o.ok(_);function $(p){return d.opts.useDefaults&&!d.compositeRule&&i[p].default!==void 0}function S(p){o.subschema({keyword:"properties",schemaProp:p,dataProp:p},_)}}};return cr.default=s,cr}var ur={},fo;function np(){if(fo)return ur;fo=1,Object.defineProperty(ur,"__esModule",{value:!0});const e=xe(),t=Q(),r=ne(),n=ne(),s={keyword:"patternProperties",type:"object",schemaType:"object",code(o){const{gen:a,schema:i,data:c,parentSchema:l,it:d}=o,{opts:v}=d,m=(0,e.allSchemaProperties)(i),_=m.filter(w=>(0,r.alwaysValidSchema)(d,i[w]));if(m.length===0||_.length===m.length&&(!d.opts.unevaluated||d.props===!0))return;const $=v.strictSchema&&!v.allowMatchingProperties&&l.properties,S=a.name("valid");d.props!==!0&&!(d.props instanceof t.Name)&&(d.props=(0,n.evaluatedPropsToName)(a,d.props));const{props:p}=d;g();function g(){for(const w of m)$&&u(w),d.allErrors?h(w):(a.var(S,!0),h(w),a.if(S))}function u(w){for(const f in $)new RegExp(w).test(f)&&(0,r.checkStrictMode)(d,`property ${f} matches pattern ${w} (use allowMatchingProperties)`)}function h(w){a.forIn("key",c,f=>{a.if((0,t._)`${(0,e.usePattern)(o,w)}.test(${f})`,()=>{const b=_.includes(w);b||o.subschema({keyword:"patternProperties",schemaProp:w,dataProp:f,dataPropType:n.Type.Str},S),d.opts.unevaluated&&p!==!0?a.assign((0,t._)`${p}[${f}]`,!0):!b&&!d.allErrors&&a.if((0,t.not)(S),()=>a.break())})})}}};return ur.default=s,ur}var lr={},ho;function sp(){if(ho)return lr;ho=1,Object.defineProperty(lr,"__esModule",{value:!0});const e=ne(),t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(r){const{gen:n,schema:s,it:o}=r;if((0,e.alwaysValidSchema)(o,s)){r.fail();return}const a=n.name("valid");r.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},a),r.failResult(a,()=>r.reset(),()=>r.error())},error:{message:"must NOT be valid"}};return lr.default=t,lr}var dr={},po;function op(){if(po)return dr;po=1,Object.defineProperty(dr,"__esModule",{value:!0});const t={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:xe().validateUnion,error:{message:"must match a schema in anyOf"}};return dr.default=t,dr}var fr={},mo;function ap(){if(mo)return fr;mo=1,Object.defineProperty(fr,"__esModule",{value:!0});const e=Q(),t=ne(),n={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:s})=>(0,e._)`{passingSchemas: ${s.passing}}`},code(s){const{gen:o,schema:a,parentSchema:i,it:c}=s;if(!Array.isArray(a))throw new Error("ajv implementation error");if(c.opts.discriminator&&i.discriminator)return;const l=a,d=o.let("valid",!1),v=o.let("passing",null),m=o.name("_valid");s.setParams({passing:v}),o.block(_),s.result(d,()=>s.reset(),()=>s.error(!0));function _(){l.forEach(($,S)=>{let p;(0,t.alwaysValidSchema)(c,$)?o.var(m,!0):p=s.subschema({keyword:"oneOf",schemaProp:S,compositeRule:!0},m),S>0&&o.if((0,e._)`${m} && ${d}`).assign(d,!1).assign(v,(0,e._)`[${v}, ${S}]`).else(),o.if(m,()=>{o.assign(d,!0),o.assign(v,S),p&&s.mergeEvaluated(p,e.Name)})})}}};return fr.default=n,fr}var hr={},_o;function ip(){if(_o)return hr;_o=1,Object.defineProperty(hr,"__esModule",{value:!0});const e=ne(),t={keyword:"allOf",schemaType:"array",code(r){const{gen:n,schema:s,it:o}=r;if(!Array.isArray(s))throw new Error("ajv implementation error");const a=n.name("valid");s.forEach((i,c)=>{if((0,e.alwaysValidSchema)(o,i))return;const l=r.subschema({keyword:"allOf",schemaProp:c},a);r.ok(a),r.mergeEvaluated(l)})}};return hr.default=t,hr}var pr={},go;function cp(){if(go)return pr;go=1,Object.defineProperty(pr,"__esModule",{value:!0});const e=Q(),t=ne(),n={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:o})=>(0,e.str)`must match "${o.ifClause}" schema`,params:({params:o})=>(0,e._)`{failingKeyword: ${o.ifClause}}`},code(o){const{gen:a,parentSchema:i,it:c}=o;i.then===void 0&&i.else===void 0&&(0,t.checkStrictMode)(c,'"if" without "then" and "else" is ignored');const l=s(c,"then"),d=s(c,"else");if(!l&&!d)return;const v=a.let("valid",!0),m=a.name("_valid");if(_(),o.reset(),l&&d){const S=a.let("ifClause");o.setParams({ifClause:S}),a.if(m,$("then",S),$("else",S))}else l?a.if(m,$("then")):a.if((0,e.not)(m),$("else"));o.pass(v,()=>o.error(!0));function _(){const S=o.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},m);o.mergeEvaluated(S)}function $(S,p){return()=>{const g=o.subschema({keyword:S},m);a.assign(v,m),o.mergeValidEvaluated(g,v),p?a.assign(p,(0,e._)`${S}`):o.setParams({ifClause:S})}}}};function s(o,a){const i=o.schema[a];return i!==void 0&&!(0,t.alwaysValidSchema)(o,i)}return pr.default=n,pr}var mr={},yo;function up(){if(yo)return mr;yo=1,Object.defineProperty(mr,"__esModule",{value:!0});const e=ne(),t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:r,parentSchema:n,it:s}){n.if===void 0&&(0,e.checkStrictMode)(s,`"${r}" without "if" is ignored`)}};return mr.default=t,mr}var vo;function lp(){if(vo)return rr;vo=1,Object.defineProperty(rr,"__esModule",{value:!0});const e=Fa(),t=Qh(),r=La(),n=Yh(),s=Xh(),o=ep(),a=tp(),i=xa(),c=rp(),l=np(),d=sp(),v=op(),m=ap(),_=ip(),$=cp(),S=up();function p(g=!1){const u=[d.default,v.default,m.default,_.default,$.default,S.default,a.default,i.default,o.default,c.default,l.default];return g?u.push(t.default,n.default):u.push(e.default,r.default),u.push(s.default),u}return rr.default=p,rr}var _r={},gr={},wo;function dp(){if(wo)return gr;wo=1,Object.defineProperty(gr,"__esModule",{value:!0});const e=Q(),r={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:n})=>(0,e.str)`must match format "${n}"`,params:({schemaCode:n})=>(0,e._)`{format: ${n}}`},code(n,s){const{gen:o,data:a,$data:i,schema:c,schemaCode:l,it:d}=n,{opts:v,errSchemaPath:m,schemaEnv:_,self:$}=d;if(!v.validateFormats)return;i?S():p();function S(){const g=o.scopeValue("formats",{ref:$.formats,code:v.code.formats}),u=o.const("fDef",(0,e._)`${g}[${l}]`),h=o.let("fType"),w=o.let("format");o.if((0,e._)`typeof ${u} == "object" && !(${u} instanceof RegExp)`,()=>o.assign(h,(0,e._)`${u}.type || "string"`).assign(w,(0,e._)`${u}.validate`),()=>o.assign(h,(0,e._)`"string"`).assign(w,u)),n.fail$data((0,e.or)(f(),b()));function f(){return v.strictSchema===!1?e.nil:(0,e._)`${l} && !${w}`}function b(){const k=_.$async?(0,e._)`(${u}.async ? await ${w}(${a}) : ${w}(${a}))`:(0,e._)`${w}(${a})`,N=(0,e._)`(typeof ${w} == "function" ? ${k} : ${w}.test(${a}))`;return(0,e._)`${w} && ${w} !== true && ${h} === ${s} && !${N}`}}function p(){const g=$.formats[c];if(!g){f();return}if(g===!0)return;const[u,h,w]=b(g);u===s&&n.pass(k());function f(){if(v.strictSchema===!1){$.logger.warn(N());return}throw new Error(N());function N(){return`unknown format "${c}" ignored in schema at path "${m}"`}}function b(N){const M=N instanceof RegExp?(0,e.regexpCode)(N):v.code.formats?(0,e._)`${v.code.formats}${(0,e.getProperty)(c)}`:void 0,U=o.scopeValue("formats",{key:c,ref:N,code:M});return typeof N=="object"&&!(N instanceof RegExp)?[N.type||"string",N.validate,(0,e._)`${U}.validate`]:["string",N,U]}function k(){if(typeof g=="object"&&!(g instanceof RegExp)&&g.async){if(!_.$async)throw new Error("async format in sync schema");return(0,e._)`await ${w}(${a})`}return typeof h=="function"?(0,e._)`${w}(${a})`:(0,e._)`${w}.test(${a})`}}}};return gr.default=r,gr}var $o;function fp(){if($o)return _r;$o=1,Object.defineProperty(_r,"__esModule",{value:!0});const t=[dp().default];return _r.default=t,_r}var nt={},bo;function hp(){return bo||(bo=1,Object.defineProperty(nt,"__esModule",{value:!0}),nt.contentVocabulary=nt.metadataVocabulary=void 0,nt.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],nt.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),nt}var So;function pp(){if(So)return Vt;So=1,Object.defineProperty(Vt,"__esModule",{value:!0});const e=Dh(),t=Wh(),r=lp(),n=fp(),s=hp(),o=[e.default,t.default,(0,r.default)(),n.default,s.metadataVocabulary,s.contentVocabulary];return Vt.default=o,Vt}var yr={},wt={},ko;function mp(){if(ko)return wt;ko=1,Object.defineProperty(wt,"__esModule",{value:!0}),wt.DiscrError=void 0;var e;return(function(t){t.Tag="tag",t.Mapping="mapping"})(e||(wt.DiscrError=e={})),wt}var Eo;function _p(){if(Eo)return yr;Eo=1,Object.defineProperty(yr,"__esModule",{value:!0});const e=Q(),t=mp(),r=Zn(),n=Zr(),s=ne(),a={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:i,tagName:c}})=>i===t.DiscrError.Tag?`tag "${c}" must be string`:`value of tag "${c}" must be in oneOf`,params:({params:{discrError:i,tag:c,tagName:l}})=>(0,e._)`{error: ${i}, tag: ${l}, tagValue: ${c}}`},code(i){const{gen:c,data:l,schema:d,parentSchema:v,it:m}=i,{oneOf:_}=v;if(!m.opts.discriminator)throw new Error("discriminator: requires discriminator option");const $=d.propertyName;if(typeof $!="string")throw new Error("discriminator: requires propertyName");if(d.mapping)throw new Error("discriminator: mapping is not supported");if(!_)throw new Error("discriminator: requires oneOf keyword");const S=c.let("valid",!1),p=c.const("tag",(0,e._)`${l}${(0,e.getProperty)($)}`);c.if((0,e._)`typeof ${p} == "string"`,()=>g(),()=>i.error(!1,{discrError:t.DiscrError.Tag,tag:p,tagName:$})),i.ok(S);function g(){const w=h();c.if(!1);for(const f in w)c.elseIf((0,e._)`${p} === ${f}`),c.assign(S,u(w[f]));c.else(),i.error(!1,{discrError:t.DiscrError.Mapping,tag:p,tagName:$}),c.endIf()}function u(w){const f=c.name("valid"),b=i.subschema({keyword:"oneOf",schemaProp:w},f);return i.mergeEvaluated(b,e.Name),f}function h(){var w;const f={},b=N(v);let k=!0;for(let q=0;q<_.length;q++){let V=_[q];if(V?.$ref&&!(0,s.schemaHasRulesButRef)(V,m.self.RULES)){const x=V.$ref;if(V=r.resolveRef.call(m.self,m.schemaEnv.root,m.baseId,x),V instanceof r.SchemaEnv&&(V=V.schema),V===void 0)throw new n.default(m.opts.uriResolver,m.baseId,x)}const L=(w=V?.properties)===null||w===void 0?void 0:w[$];if(typeof L!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${$}"`);k=k&&(b||N(V)),M(L,q)}if(!k)throw new Error(`discriminator: "${$}" must be required`);return f;function N({required:q}){return Array.isArray(q)&&q.includes($)}function M(q,V){if(q.const)U(q.const,V);else if(q.enum)for(const L of q.enum)U(L,V);else throw new Error(`discriminator: "properties/${$}" must have "const" or "enum"`)}function U(q,V){if(typeof q!="string"||q in f)throw new Error(`discriminator: "${$}" values must be unique strings`);f[q]=V}}}};return yr.default=a,yr}const gp="http://json-schema.org/draft-07/schema#",yp="http://json-schema.org/draft-07/schema#",vp="Core schema meta-schema",wp={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},$p=["object","boolean"],bp={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Sp={$schema:gp,$id:yp,title:vp,definitions:wp,type:$p,properties:bp,default:!0};var Po;function Ha(){return Po||(Po=1,(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const r=Ch(),n=pp(),s=_p(),o=Sp,a=["/properties"],i="http://json-schema.org/draft-07/schema";class c extends r.default{_addVocabularies(){super._addVocabularies(),n.default.forEach($=>this.addVocabulary($)),this.opts.discriminator&&this.addKeyword(s.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const $=this.opts.$data?this.$dataMetaSchema(o,a):o;this.addMetaSchema($,i,!1),this.refs["http://json-schema.org/schema"]=i}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(i)?i:void 0)}}t.Ajv=c,e.exports=t=c,e.exports.Ajv=c,Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var l=Dr();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var d=Q();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return d._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return d.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return d.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return d.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return d.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return d.CodeGen}});var v=Dn();Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return v.default}});var m=Zr();Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return m.default}})})(Ct,Ct.exports)),Ct.exports}var kp=Ha();const Ep=Ma(kp);var vr={exports:{}},rn={},To;function Pp(){return To||(To=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatNames=e.fastFormats=e.fullFormats=void 0;function t(q,V){return{validate:q,compare:V}}e.fullFormats={date:t(o,a),time:t(c(!0),l),"date-time":t(m(!0),_),"iso-time":t(c(),d),"iso-date-time":t(m(),$),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:g,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:U,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:h,int32:{type:"number",validate:b},int64:{type:"number",validate:k},float:{type:"number",validate:N},double:{type:"number",validate:N},password:!0,binary:!0},e.fastFormats={...e.fullFormats,date:t(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,a),time:t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,l),"date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,_),"iso-time":t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,d),"iso-date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,$),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},e.formatNames=Object.keys(e.fullFormats);function r(q){return q%4===0&&(q%100!==0||q%400===0)}const n=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,s=[0,31,28,31,30,31,30,31,31,30,31,30,31];function o(q){const V=n.exec(q);if(!V)return!1;const L=+V[1],x=+V[2],oe=+V[3];return x>=1&&x<=12&&oe>=1&&oe<=(x===2&&r(L)?29:s[x])}function a(q,V){if(q&&V)return q>V?1:q<V?-1:0}const i=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function c(q){return function(L){const x=i.exec(L);if(!x)return!1;const oe=+x[1],Pe=+x[2],Te=+x[3],ce=x[4],Ue=x[5]==="-"?-1:1,D=+(x[6]||0),T=+(x[7]||0);if(D>23||T>59||q&&!ce)return!1;if(oe<=23&&Pe<=59&&Te<60)return!0;const A=Pe-T*Ue,I=oe-D*Ue-(A<0?1:0);return(I===23||I===-1)&&(A===59||A===-1)&&Te<61}}function l(q,V){if(!(q&&V))return;const L=new Date("2020-01-01T"+q).valueOf(),x=new Date("2020-01-01T"+V).valueOf();if(L&&x)return L-x}function d(q,V){if(!(q&&V))return;const L=i.exec(q),x=i.exec(V);if(L&&x)return q=L[1]+L[2]+L[3],V=x[1]+x[2]+x[3],q>V?1:q<V?-1:0}const v=/t|\s/i;function m(q){const V=c(q);return function(x){const oe=x.split(v);return oe.length===2&&o(oe[0])&&V(oe[1])}}function _(q,V){if(!(q&&V))return;const L=new Date(q).valueOf(),x=new Date(V).valueOf();if(L&&x)return L-x}function $(q,V){if(!(q&&V))return;const[L,x]=q.split(v),[oe,Pe]=V.split(v),Te=a(L,oe);if(Te!==void 0)return Te||l(x,Pe)}const S=/\/|:/,p=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function g(q){return S.test(q)&&p.test(q)}const u=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function h(q){return u.lastIndex=0,u.test(q)}const w=-2147483648,f=2**31-1;function b(q){return Number.isInteger(q)&&q<=f&&q>=w}function k(q){return Number.isInteger(q)}function N(){return!0}const M=/[^\\]\\Z/;function U(q){if(M.test(q))return!1;try{return new RegExp(q),!0}catch{return!1}}})(rn)),rn}var nn={},Ro;function Tp(){return Ro||(Ro=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatLimitDefinition=void 0;const t=Ha(),r=Q(),n=r.operators,s={formatMaximum:{okStr:"<=",ok:n.LTE,fail:n.GT},formatMinimum:{okStr:">=",ok:n.GTE,fail:n.LT},formatExclusiveMaximum:{okStr:"<",ok:n.LT,fail:n.GTE},formatExclusiveMinimum:{okStr:">",ok:n.GT,fail:n.LTE}},o={message:({keyword:i,schemaCode:c})=>(0,r.str)`should be ${s[i].okStr} ${c}`,params:({keyword:i,schemaCode:c})=>(0,r._)`{comparison: ${s[i].okStr}, limit: ${c}}`};e.formatLimitDefinition={keyword:Object.keys(s),type:"string",schemaType:"string",$data:!0,error:o,code(i){const{gen:c,data:l,schemaCode:d,keyword:v,it:m}=i,{opts:_,self:$}=m;if(!_.validateFormats)return;const S=new t.KeywordCxt(m,$.RULES.all.format.definition,"format");S.$data?p():g();function p(){const h=c.scopeValue("formats",{ref:$.formats,code:_.code.formats}),w=c.const("fmt",(0,r._)`${h}[${S.schemaCode}]`);i.fail$data((0,r.or)((0,r._)`typeof ${w} != "object"`,(0,r._)`${w} instanceof RegExp`,(0,r._)`typeof ${w}.compare != "function"`,u(w)))}function g(){const h=S.schema,w=$.formats[h];if(!w||w===!0)return;if(typeof w!="object"||w instanceof RegExp||typeof w.compare!="function")throw new Error(`"${v}": format "${h}" does not define "compare" function`);const f=c.scopeValue("formats",{key:h,ref:w,code:_.code.formats?(0,r._)`${_.code.formats}${(0,r.getProperty)(h)}`:void 0});i.fail$data(u(f))}function u(h){return(0,r._)`${h}.compare(${l}, ${d}) ${s[v].fail} 0`}},dependencies:["format"]};const a=i=>(i.addKeyword(e.formatLimitDefinition),i);e.default=a})(nn)),nn}var Io;function Rp(){return Io||(Io=1,(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=Pp(),n=Tp(),s=Q(),o=new s.Name("fullFormats"),a=new s.Name("fastFormats"),i=(l,d={keywords:!0})=>{if(Array.isArray(d))return c(l,d,r.fullFormats,o),l;const[v,m]=d.mode==="fast"?[r.fastFormats,a]:[r.fullFormats,o],_=d.formats||r.formatNames;return c(l,_,v,m),d.keywords&&(0,n.default)(l),l};i.get=(l,d="full")=>{const m=(d==="fast"?r.fastFormats:r.fullFormats)[l];if(!m)throw new Error(`Unknown format "${l}"`);return m};function c(l,d,v,m){var _,$;(_=($=l.opts.code).formats)!==null&&_!==void 0||($.formats=(0,s._)`require("ajv-formats/dist/formats").${m}`);for(const S of d)l.addFormat(S,v[S])}e.exports=t=i,Object.defineProperty(t,"__esModule",{value:!0}),t.default=i})(vr,vr.exports)),vr.exports}var Ip=Rp();const zp=Ma(Ip);function Np(){const e=new Ep({strict:!1,validateFormats:!0,validateSchema:!1,allErrors:!0});return zp(e),e}class Op{constructor(t){this._ajv=t??Np()}getValidator(t){const r="$id"in t&&typeof t.$id=="string"?this._ajv.getSchema(t.$id)??this._ajv.compile(t):this._ajv.compile(t);return n=>r(n)?{valid:!0,data:n,errorMessage:void 0}:{valid:!1,data:void 0,errorMessage:this._ajv.errorsText(r.errors)}}}class jp{constructor(t){this._server=t}requestStream(t,r,n){return this._server.requestStream(t,r,n)}async getTask(t,r){return this._server.getTask({taskId:t},r)}async getTaskResult(t,r,n){return this._server.getTaskResult({taskId:t},r,n)}async listTasks(t,r){return this._server.listTasks(t?{cursor:t}:void 0,r)}async cancelTask(t,r){return this._server.cancelTask({taskId:t},r)}}function qp(e,t,r){if(!e)throw new Error(`${r} does not support task creation (required for ${t})`);switch(t){case"tools/call":if(!e.tools?.call)throw new Error(`${r} does not support task creation for tools/call (required for ${t})`);break}}function Cp(e,t,r){if(!e)throw new Error(`${r} does not support task creation (required for ${t})`);switch(t){case"sampling/createMessage":if(!e.sampling?.createMessage)throw new Error(`${r} does not support task creation for sampling/createMessage (required for ${t})`);break;case"elicitation/create":if(!e.elicitation?.create)throw new Error(`${r} does not support task creation for elicitation/create (required for ${t})`);break}}class Ap extends yh{constructor(t,r){super(r),this._serverInfo=t,this._loggingLevels=new Map,this.LOG_LEVEL_SEVERITY=new Map(kr.options.map((n,s)=>[n,s])),this.isMessageIgnored=(n,s)=>{const o=this._loggingLevels.get(s);return o?this.LOG_LEVEL_SEVERITY.get(n)<this.LOG_LEVEL_SEVERITY.get(o):!1},this._capabilities=r?.capabilities??{},this._instructions=r?.instructions,this._jsonSchemaValidator=r?.jsonSchemaValidator??new Op,this.setRequestHandler(Ea,n=>this._oninitialize(n)),this.setNotificationHandler(Pa,()=>this.oninitialized?.()),this._capabilities.logging&&this.setRequestHandler(ja,async(n,s)=>{const o=s.sessionId||s.requestInfo?.headers["mcp-session-id"]||void 0,{level:a}=n.params,i=kr.safeParse(a);return i.success&&this._loggingLevels.set(o,i.data),{}})}get experimental(){return this._experimental||(this._experimental={tasks:new jp(this)}),this._experimental}registerCapabilities(t){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=vh(this._capabilities,t)}setRequestHandler(t,r){const s=aa(t)?.method;if(!s)throw new Error("Schema is missing a method literal");let o;if(Or(s)){const i=s;o=i._zod?.def?.value??i.value}else{const i=s;o=i._def?.value??i.value}if(typeof o!="string")throw new Error("Schema method literal must be a string");if(o==="tools/call"){const i=async(c,l)=>{const d=bt(Mn,c);if(!d.success){const $=d.error instanceof Error?d.error.message:String(d.error);throw new X(re.InvalidParams,`Invalid tools/call request: ${$}`)}const{params:v}=d.data,m=await Promise.resolve(r(c,l));if(v.task){const $=bt(Cr,m);if(!$.success){const S=$.error instanceof Error?$.error.message:String($.error);throw new X(re.InvalidParams,`Invalid task creation result: ${S}`)}return $.data}const _=bt(An,m);if(!_.success){const $=_.error instanceof Error?_.error.message:String(_.error);throw new X(re.InvalidParams,`Invalid tools/call result: ${$}`)}return _.data};return super.setRequestHandler(t,i)}return super.setRequestHandler(t,r)}assertCapabilityForMethod(t){switch(t){case"sampling/createMessage":if(!this._clientCapabilities?.sampling)throw new Error(`Client does not support sampling (required for ${t})`);break;case"elicitation/create":if(!this._clientCapabilities?.elicitation)throw new Error(`Client does not support elicitation (required for ${t})`);break;case"roots/list":if(!this._clientCapabilities?.roots)throw new Error(`Client does not support listing roots (required for ${t})`);break}}assertNotificationCapability(t){switch(t){case"notifications/message":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${t})`);break;case"notifications/resources/updated":case"notifications/resources/list_changed":if(!this._capabilities.resources)throw new Error(`Server does not support notifying about resources (required for ${t})`);break;case"notifications/tools/list_changed":if(!this._capabilities.tools)throw new Error(`Server does not support notifying of tool list changes (required for ${t})`);break;case"notifications/prompts/list_changed":if(!this._capabilities.prompts)throw new Error(`Server does not support notifying of prompt list changes (required for ${t})`);break;case"notifications/elicitation/complete":if(!this._clientCapabilities?.elicitation?.url)throw new Error(`Client does not support URL elicitation (required for ${t})`);break}}assertRequestHandlerCapability(t){if(this._capabilities)switch(t){case"completion/complete":if(!this._capabilities.completions)throw new Error(`Server does not support completions (required for ${t})`);break;case"logging/setLevel":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${t})`);break;case"prompts/get":case"prompts/list":if(!this._capabilities.prompts)throw new Error(`Server does not support prompts (required for ${t})`);break;case"resources/list":case"resources/templates/list":case"resources/read":if(!this._capabilities.resources)throw new Error(`Server does not support resources (required for ${t})`);break;case"tools/call":case"tools/list":if(!this._capabilities.tools)throw new Error(`Server does not support tools (required for ${t})`);break;case"tasks/get":case"tasks/list":case"tasks/result":case"tasks/cancel":if(!this._capabilities.tasks)throw new Error(`Server does not support tasks capability (required for ${t})`);break}}assertTaskCapability(t){Cp(this._clientCapabilities?.tasks?.requests,t,"Client")}assertTaskHandlerCapability(t){this._capabilities&&qp(this._capabilities.tasks?.requests,t,"Server")}async _oninitialize(t){const r=t.params.protocolVersion;return this._clientCapabilities=t.params.capabilities,this._clientVersion=t.params.clientInfo,{protocolVersion:Nd.includes(r)?r:va,capabilities:this.getCapabilities(),serverInfo:this._serverInfo,...this._instructions&&{instructions:this._instructions}}}getClientCapabilities(){return this._clientCapabilities}getClientVersion(){return this._clientVersion}getCapabilities(){return this._capabilities}async ping(){return this.request({method:"ping"},wn)}async createMessage(t,r){if((t.tools||t.toolChoice)&&!this._clientCapabilities?.sampling?.tools)throw new Error("Client does not support sampling tools capability.");if(t.messages.length>0){const n=t.messages[t.messages.length-1],s=Array.isArray(n.content)?n.content:[n.content],o=s.some(l=>l.type==="tool_result"),a=t.messages.length>1?t.messages[t.messages.length-2]:void 0,i=a?Array.isArray(a.content)?a.content:[a.content]:[],c=i.some(l=>l.type==="tool_use");if(o){if(s.some(l=>l.type!=="tool_result"))throw new Error("The last message must contain only tool_result content if any is present");if(!c)throw new Error("tool_result blocks are not matching any tool_use from the previous message")}if(c){const l=new Set(i.filter(v=>v.type==="tool_use").map(v=>v.id)),d=new Set(s.filter(v=>v.type==="tool_result").map(v=>v.toolUseId));if(l.size!==d.size||![...l].every(v=>d.has(v)))throw new Error("ids of tool_result blocks and tool_use blocks from previous message do not match")}}return t.tools?this.request({method:"sampling/createMessage",params:t},Ca,r):this.request({method:"sampling/createMessage",params:t},qa,r)}async elicitInput(t,r){switch(t.mode??"form"){case"url":{if(!this._clientCapabilities?.elicitation?.url)throw new Error("Client does not support url elicitation.");const s=t;return this.request({method:"elicitation/create",params:s},un,r)}case"form":{if(!this._clientCapabilities?.elicitation?.form)throw new Error("Client does not support form elicitation.");const s=t.mode==="form"?t:{...t,mode:"form"},o=await this.request({method:"elicitation/create",params:s},un,r);if(o.action==="accept"&&o.content&&s.requestedSchema)try{const i=this._jsonSchemaValidator.getValidator(s.requestedSchema)(o.content);if(!i.valid)throw new X(re.InvalidParams,`Elicitation response content does not match requested schema: ${i.errorMessage}`)}catch(a){throw a instanceof X?a:new X(re.InternalError,`Error validating elicitation response: ${a instanceof Error?a.message:String(a)}`)}return o}}}createElicitationCompletionNotifier(t,r){if(!this._clientCapabilities?.elicitation?.url)throw new Error("Client does not support URL elicitation (required for notifications/elicitation/complete)");return()=>this.notification({method:"notifications/elicitation/complete",params:{elicitationId:t}},r)}async listRoots(t,r){return this.request({method:"roots/list",params:t},Aa,r)}async sendLoggingMessage(t,r){if(this._capabilities.logging&&!this.isMessageIgnored(t.level,r))return this.notification({method:"notifications/message",params:t})}async sendResourceUpdated(t){return this.notification({method:"notifications/resources/updated",params:t})}async sendResourceListChanged(){return this.notification({method:"notifications/resources/list_changed"})}async sendToolListChanged(){return this.notification({method:"notifications/tools/list_changed"})}async sendPromptListChanged(){return this.notification({method:"notifications/prompts/list_changed"})}}class Mp{append(t){this._buffer=this._buffer?Buffer.concat([this._buffer,t]):t}readMessage(){if(!this._buffer)return null;const t=this._buffer.indexOf(`
`);if(t===-1)return null;const r=this._buffer.toString("utf8",0,t).replace(/\r$/,"");return this._buffer=this._buffer.subarray(t+1),Dp(r)}clear(){this._buffer=void 0}}function Dp(e){return Md.parse(JSON.parse(e))}function Zp(e){return JSON.stringify(e)+`
`}class Vp{constructor(t=Ln.stdin,r=Ln.stdout){this._stdin=t,this._stdout=r,this._readBuffer=new Mp,this._started=!1,this._ondata=n=>{this._readBuffer.append(n),this.processReadBuffer()},this._onerror=n=>{this.onerror?.(n)}}async start(){if(this._started)throw new Error("StdioServerTransport already started! If using Server class, note that connect() calls start() automatically.");this._started=!0,this._stdin.on("data",this._ondata),this._stdin.on("error",this._onerror)}processReadBuffer(){for(;;)try{const t=this._readBuffer.readMessage();if(t===null)break;this.onmessage?.(t)}catch(t){this.onerror?.(t)}}async close(){this._stdin.off("data",this._ondata),this._stdin.off("error",this._onerror),this._stdin.listenerCount("data")===0&&this._stdin.pause(),this._readBuffer.clear(),this.onclose?.()}send(t){return new Promise(r=>{const n=Zp(t);this._stdout.write(n)?r():this._stdout.once("drain",r)})}}class Up{skillsDir;server;skills=new Map;executor=new Lr.SkillExecutor;constructor(t){this.skillsDir=t,this.server=new Ap({name:"skills-router",version:"1.0.0"},{capabilities:{tools:{}}}),this.setupHandlers()}async refreshSkills(){const t=new Lr.SkillScanner(this.skillsDir),r=new Lr.SkillParser,n=await t.scan();console.error(`Discovered ${n.length} skill folders`);const s=new Map;for(const o of n)try{const a=await r.parse(o.skillMdPath);console.error(`Parsed skill: ${a.name}`),s.set(a.name,{metadata:a,path:o.path})}catch(a){console.error(`Failed to parse skill at ${o.path}:`,a)}this.skills=s}setupHandlers(){this.server.setRequestHandler(Oa,async()=>(await this.refreshSkills(),{tools:Array.from(this.skills.entries()).map(([r,n])=>({name:r,description:n.metadata.description,inputSchema:{type:"object",properties:n.metadata.parameters||{},required:Object.keys(n.metadata.parameters||{})}}))})),this.server.setRequestHandler(Mn,async t=>{const{name:r,arguments:n}=t.params,s=this.skills.get(r);if(!s)throw new Error(`Skill ${r} not found`);const o=s.metadata.scripts?.[0];if(!o)try{return{content:[{type:"text",text:(await Ja.readFile(No.join(s.path,"SKILL.md"),"utf-8")).replace(/^---[\s\S]*?---/,"").trim()}]}}catch{return{content:[{type:"text",text:"Failed to read skill instructions."}],isError:!0}}return{content:[{type:"text",text:await this.executor.execute(s.path,o,n||{})}]}})}async run(){const t=new Vp;await this.server.connect(t),console.error("Skills Router MCP server running on stdio")}}const zo=process.env.SKILLS_DIR||No.join(process.env.HOME||"","Library/Application Support/SkillsRouter","skills");async function Fp(){console.error(`Status: Initializing skills-router MCP server with directory: ${zo}`);const e=new Up(zo);await e.refreshSkills(),await e.run()}Fp().catch(e=>{console.error("Fatal error in skills-router MCP server:",e),process.exit(1)});
